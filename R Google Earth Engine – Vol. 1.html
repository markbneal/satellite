
<!-- saved from url=(0141)http://webcache.googleusercontent.com/search?q=cache:6_r5DwAFI7YJ:amazeone.com.br/barebra/pandora/rgeebookT1eng.pdf+&cd=1&hl=en&ct=clnk&gl=nz -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><style>body{margin-left:0;margin-right:0;margin-top:0}#bN015htcoyT__google-cache-hdr{background:#f8f9fa;font:13px arial,sans-serif;text-align:left;color:#202124;border:0;margin:0;border-bottom:1px solid #dadce0;line-height:16px;padding:16px 28px 24px 28px}#bN015htcoyT__google-cache-hdr *{display:inline;font:inherit;text-align:inherit;color:inherit;line-height:inherit;background:none;border:0;margin:0;padding:0;letter-spacing:0}#bN015htcoyT__google-cache-hdr a{text-decoration:none;color:#1a0dab}#bN015htcoyT__google-cache-hdr a:hover{text-decoration:underline}#bN015htcoyT__google-cache-hdr a:visited{color:#4b11a8}#bN015htcoyT__google-cache-hdr div{display:block;margin-top:4px}#bN015htcoyT__google-cache-hdr b{font-weight:bold;display:inline-block;direction:ltr}</style></head><body bgcolor="#ffffff" vlink="blue" link="blue"><div id="bN015htcoyT__google-cache-hdr"><div><span>This is the HTML version of the file <a href="http://amazeone.com.br/barebra/pandora/rgeebookT1eng.pdf">http://amazeone.com.br/barebra/pandora/rgeebookT1eng.pdf</a>. Google automatically generates HTML versions of documents as we crawl the web.</span></div><span style="display:inline-block;margin-top:8px;color:#70757a"><span>Tip: To quickly find your search term on this page, press <b>Ctrl+F</b> or <b>⌘-F</b> (Mac) and use the find bar.</span></span></div><div style="position:relative;">


<meta name="Creator" content="Writer">
<meta name="Producer" content="LibreOffice 6.4">
<meta name="CreationDate" content="D:20200718135005-03&#39;00&#39;">
<title>R Google Earth Engine – Vol. 1</title>

<table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="1"><b>Page 1</b></a></font></td></tr></tbody></table><font size="5" face="Times"><span style="font-size:31px;font-family:Times">
<div style="position:absolute;top:367;left:90"><nobr><b>R Google Earth Engine – Vol. 1</b></nobr></div>
</span></font>
<font size="3" color="#24292e" face="Times"><span style="font-size:16px;font-family:Times;color:#24292e">
<div style="position:absolute;top:1121;left:554"><nobr><b>André Luiz Lima Costa</b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:1151;left:658"><nobr><b>License: CC BY 4.0</b></nobr></div>
</span></font>
<font size="3" color="#24292e" face="Times"><span style="font-size:10px;font-family:Times;color:#24292e">
<div style="position:absolute;top:1199;left:85"><nobr>RGEE - created byr:</nobr></div>
<div style="position:absolute;top:1241;left:85"><nobr>C Aybar, Q Wu, L Bautista, R Yali and A Barja (<font color="#005cc5">2020</font>) rgee<font color="#d73a49">: </font>An R</nobr></div>
<div style="position:absolute;top:1255;left:100"><nobr>package <font color="#d73a49">for </font>interacting with Google Earth Engine Journal of Open</nobr></div>
<div style="position:absolute;top:1276;left:100"><nobr>Source Software URL https<font color="#d73a49">://</font>github.com<font color="#d73a49">/</font>r<font color="#d73a49">-</font>spatial<font color="#d73a49">/</font>rgee<font color="#d73a49">/</font></nobr></div>
</span></font>

<div style="position:absolute;top:1437;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="2"><b>Page 2</b></a></font></td></tr></tbody></table></div><font size="4" face="Times"><span style="font-size:22px;font-family:Times">
<div style="position:absolute;top:1541;left:85"><nobr><b>Index</b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:1578;left:85"><nobr><a href="http://webcache.googleusercontent.com/search?q=cache:6_r5DwAFI7YJ:amazeone.com.br/barebra/pandora/rgeebookT1eng.pdf+&amp;cd=1&amp;hl=en&amp;ct=clnk&amp;gl=nz#3">INSTALLING.......................................................................................................................................3</a></nobr></div>
<div style="position:absolute;top:1598;left:85"><nobr><a href="http://webcache.googleusercontent.com/search?q=cache:6_r5DwAFI7YJ:amazeone.com.br/barebra/pandora/rgeebookT1eng.pdf+&amp;cd=1&amp;hl=en&amp;ct=clnk&amp;gl=nz#4">A BASIC OVERVIEW.........................................................................................................................4</a></nobr></div>
<div style="position:absolute;top:1619;left:85"><nobr><a href="http://webcache.googleusercontent.com/search?q=cache:6_r5DwAFI7YJ:amazeone.com.br/barebra/pandora/rgeebookT1eng.pdf+&amp;cd=1&amp;hl=en&amp;ct=clnk&amp;gl=nz#9">EXAMPLES OF DATA FROM OTHER SOURCES..........................................................................9</a></nobr></div>
<div style="position:absolute;top:1640;left:85"><nobr><a href="http://webcache.googleusercontent.com/search?q=cache:6_r5DwAFI7YJ:amazeone.com.br/barebra/pandora/rgeebookT1eng.pdf+&amp;cd=1&amp;hl=en&amp;ct=clnk&amp;gl=nz#14">A NOTE ON HOW GOOGLE EARTH ENGINE WORKS..............................................................14</a></nobr></div>
<div style="position:absolute;top:1660;left:85"><nobr><a href="http://webcache.googleusercontent.com/search?q=cache:6_r5DwAFI7YJ:amazeone.com.br/barebra/pandora/rgeebookT1eng.pdf+&amp;cd=1&amp;hl=en&amp;ct=clnk&amp;gl=nz#21">ee$Image.............................................................................................................................................21</a></nobr></div>
<div style="position:absolute;top:1681;left:107"><nobr><a href="http://webcache.googleusercontent.com/search?q=cache:6_r5DwAFI7YJ:amazeone.com.br/barebra/pandora/rgeebookT1eng.pdf+&amp;cd=1&amp;hl=en&amp;ct=clnk&amp;gl=nz#22">ee$Image Constructor....................................................................................................................22</a></nobr></div>
<div style="position:absolute;top:1702;left:107"><nobr><a href="http://webcache.googleusercontent.com/search?q=cache:6_r5DwAFI7YJ:amazeone.com.br/barebra/pandora/rgeebookT1eng.pdf+&amp;cd=1&amp;hl=en&amp;ct=clnk&amp;gl=nz#27">ee$Image visualization..................................................................................................................27</a></nobr></div>
<div style="position:absolute;top:1722;left:107"><nobr><a href="http://webcache.googleusercontent.com/search?q=cache:6_r5DwAFI7YJ:amazeone.com.br/barebra/pandora/rgeebookT1eng.pdf+&amp;cd=1&amp;hl=en&amp;ct=clnk&amp;gl=nz#31">ee$Image information and metadata..............................................................................................31</a></nobr></div>
<div style="position:absolute;top:1743;left:107"><nobr><a href="http://webcache.googleusercontent.com/search?q=cache:6_r5DwAFI7YJ:amazeone.com.br/barebra/pandora/rgeebookT1eng.pdf+&amp;cd=1&amp;hl=en&amp;ct=clnk&amp;gl=nz#34">ee$Image arithmetic operations.....................................................................................................34</a></nobr></div>
<div style="position:absolute;top:1764;left:107"><nobr><a href="http://webcache.googleusercontent.com/search?q=cache:6_r5DwAFI7YJ:amazeone.com.br/barebra/pandora/rgeebookT1eng.pdf+&amp;cd=1&amp;hl=en&amp;ct=clnk&amp;gl=nz#36">ee#Image relational, boolean and conditional operations..............................................................36</a></nobr></div>
<div style="position:absolute;top:1785;left:107"><nobr><a href="http://webcache.googleusercontent.com/search?q=cache:6_r5DwAFI7YJ:amazeone.com.br/barebra/pandora/rgeebookT1eng.pdf+&amp;cd=1&amp;hl=en&amp;ct=clnk&amp;gl=nz#38">Spectral transformation with ee$Image.........................................................................................38</a></nobr></div>
<div style="position:absolute;top:1805;left:107"><nobr><a href="http://webcache.googleusercontent.com/search?q=cache:6_r5DwAFI7YJ:amazeone.com.br/barebra/pandora/rgeebookT1eng.pdf+&amp;cd=1&amp;hl=en&amp;ct=clnk&amp;gl=nz#41">ee$image Gradient.........................................................................................................................41</a></nobr></div>
<div style="position:absolute;top:1826;left:107"><nobr><a href="http://webcache.googleusercontent.com/search?q=cache:6_r5DwAFI7YJ:amazeone.com.br/barebra/pandora/rgeebookT1eng.pdf+&amp;cd=1&amp;hl=en&amp;ct=clnk&amp;gl=nz#43">ee$Image convolution and edge detection.....................................................................................43</a></nobr></div>
<div style="position:absolute;top:1847;left:85"><nobr><a href="http://webcache.googleusercontent.com/search?q=cache:6_r5DwAFI7YJ:amazeone.com.br/barebra/pandora/rgeebookT1eng.pdf+&amp;cd=1&amp;hl=en&amp;ct=clnk&amp;gl=nz#50">ee$ImageCollection............................................................................................................................50</a></nobr></div>
<div style="position:absolute;top:1867;left:107"><nobr><a href="http://webcache.googleusercontent.com/search?q=cache:6_r5DwAFI7YJ:amazeone.com.br/barebra/pandora/rgeebookT1eng.pdf+&amp;cd=1&amp;hl=en&amp;ct=clnk&amp;gl=nz#50">ee$ImageCollection constructors...................................................................................................50</a></nobr></div>
<div style="position:absolute;top:1888;left:107"><nobr><a href="http://webcache.googleusercontent.com/search?q=cache:6_r5DwAFI7YJ:amazeone.com.br/barebra/pandora/rgeebookT1eng.pdf+&amp;cd=1&amp;hl=en&amp;ct=clnk&amp;gl=nz#52">Filtering ee$ImageCollection........................................................................................................52</a></nobr></div>
<div style="position:absolute;top:1909;left:107"><nobr><a href="http://webcache.googleusercontent.com/search?q=cache:6_r5DwAFI7YJ:amazeone.com.br/barebra/pandora/rgeebookT1eng.pdf+&amp;cd=1&amp;hl=en&amp;ct=clnk&amp;gl=nz#52">ee$ImageCollection informations and metadata............................................................................52</a></nobr></div>
<div style="position:absolute;top:1929;left:107"><nobr><a href="http://webcache.googleusercontent.com/search?q=cache:6_r5DwAFI7YJ:amazeone.com.br/barebra/pandora/rgeebookT1eng.pdf+&amp;cd=1&amp;hl=en&amp;ct=clnk&amp;gl=nz#53">Visualizing ee$ImageCollection....................................................................................................53</a></nobr></div>
<div style="position:absolute;top:1950;left:107"><nobr><a href="http://webcache.googleusercontent.com/search?q=cache:6_r5DwAFI7YJ:amazeone.com.br/barebra/pandora/rgeebookT1eng.pdf+&amp;cd=1&amp;hl=en&amp;ct=clnk&amp;gl=nz#55">Advanced visualization techniques using ee$ImageCollection.....................................................55</a></nobr></div>
<div style="position:absolute;top:1971;left:85"><nobr><a href="http://webcache.googleusercontent.com/search?q=cache:6_r5DwAFI7YJ:amazeone.com.br/barebra/pandora/rgeebookT1eng.pdf+&amp;cd=1&amp;hl=en&amp;ct=clnk&amp;gl=nz#58">ee$Geometry.......................................................................................................................................58</a></nobr></div>
<div style="position:absolute;top:1992;left:107"><nobr><a href="http://webcache.googleusercontent.com/search?q=cache:6_r5DwAFI7YJ:amazeone.com.br/barebra/pandora/rgeebookT1eng.pdf+&amp;cd=1&amp;hl=en&amp;ct=clnk&amp;gl=nz#60">Planar x Geodesic..........................................................................................................................60</a></nobr></div>
<div style="position:absolute;top:2012;left:107"><nobr><a href="http://webcache.googleusercontent.com/search?q=cache:6_r5DwAFI7YJ:amazeone.com.br/barebra/pandora/rgeebookT1eng.pdf+&amp;cd=1&amp;hl=en&amp;ct=clnk&amp;gl=nz#61">ee$Geometry information and metadata........................................................................................61</a></nobr></div>
<div style="position:absolute;top:2033;left:107"><nobr><a href="http://webcache.googleusercontent.com/search?q=cache:6_r5DwAFI7YJ:amazeone.com.br/barebra/pandora/rgeebookT1eng.pdf+&amp;cd=1&amp;hl=en&amp;ct=clnk&amp;gl=nz#62">ee$Geometry operations................................................................................................................62</a></nobr></div>
<div style="position:absolute;top:2054;left:85"><nobr><a href="http://webcache.googleusercontent.com/search?q=cache:6_r5DwAFI7YJ:amazeone.com.br/barebra/pandora/rgeebookT1eng.pdf+&amp;cd=1&amp;hl=en&amp;ct=clnk&amp;gl=nz#65">ee$Feature...........................................................................................................................................65</a></nobr></div>
<div style="position:absolute;top:2074;left:85"><nobr><a href="http://webcache.googleusercontent.com/search?q=cache:6_r5DwAFI7YJ:amazeone.com.br/barebra/pandora/rgeebookT1eng.pdf+&amp;cd=1&amp;hl=en&amp;ct=clnk&amp;gl=nz#66">ee$FeatureCollection..........................................................................................................................66</a></nobr></div>
<div style="position:absolute;top:2095;left:107"><nobr><a href="http://webcache.googleusercontent.com/search?q=cache:6_r5DwAFI7YJ:amazeone.com.br/barebra/pandora/rgeebookT1eng.pdf+&amp;cd=1&amp;hl=en&amp;ct=clnk&amp;gl=nz#68">ee$FeatureCollection visualization................................................................................................68</a></nobr></div>
<div style="position:absolute;top:2116;left:107"><nobr><a href="http://webcache.googleusercontent.com/search?q=cache:6_r5DwAFI7YJ:amazeone.com.br/barebra/pandora/rgeebookT1eng.pdf+&amp;cd=1&amp;hl=en&amp;ct=clnk&amp;gl=nz#72">ee$FeatureCollection information and metadata...........................................................................72</a></nobr></div>
<div style="position:absolute;top:2136;left:107"><nobr><a href="http://webcache.googleusercontent.com/search?q=cache:6_r5DwAFI7YJ:amazeone.com.br/barebra/pandora/rgeebookT1eng.pdf+&amp;cd=1&amp;hl=en&amp;ct=clnk&amp;gl=nz#74">ee$FeatureCollection filtering.......................................................................................................74</a></nobr></div>
<div style="position:absolute;top:2157;left:107"><nobr><a href="http://webcache.googleusercontent.com/search?q=cache:6_r5DwAFI7YJ:amazeone.com.br/barebra/pandora/rgeebookT1eng.pdf+&amp;cd=1&amp;hl=en&amp;ct=clnk&amp;gl=nz#74">Map an ee$FeatureCollection object.............................................................................................74</a></nobr></div>
<div style="position:absolute;top:2334;left:85"><nobr>VISIT:</nobr></div>
</span></font>
<font size="4" face="Times"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:2398;left:85"><nobr><b>amazeone.com.br</b></nobr></div>
</span></font>

<div style="position:absolute;top:2699;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="3"><b>Page 3</b></a></font></td></tr></tbody></table></div><font size="4" face="Times"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:2803;left:85"><nobr><b>INSTALLING</b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:2876;left:85"><nobr>RGEE is a bridge between R and Google Earth Engine that elegantly</nobr></div>
<div style="position:absolute;top:2907;left:85"><nobr>and in a simple way makes possible the access to all capabilities of</nobr></div>
<div style="position:absolute;top:2938;left:85"><nobr>Google Earth Engine geospatial tool.</nobr></div>
<div style="position:absolute;top:3000;left:85"><nobr>We will talk about the basic function as a starting point.</nobr></div>
<div style="position:absolute;top:3062;left:85"><nobr>But first we have to install the main libraries that will support rgee, if</nobr></div>
<div style="position:absolute;top:3093;left:85"><nobr>they are not already present in your system. They are the <b>sf </b>and</nobr></div>
<div style="position:absolute;top:3124;left:85"><nobr><b>mapview</b>. Also install the <b>remotes </b>package<b>.</b></nobr></div>
<div style="position:absolute;top:3172;left:85"><nobr>install.packages('sf')</nobr></div>
<div style="position:absolute;top:3190;left:85"><nobr>install.packages('mapview')</nobr></div>
<div style="position:absolute;top:3208;left:85"><nobr>install.packages('remotes')</nobr></div>
<div style="position:absolute;top:3259;left:85"><nobr>Now we can install rgee, remember that you will need an active</nobr></div>
<div style="position:absolute;top:3290;left:85"><nobr>account with Google Earth Engine during the installation process.</nobr></div>
<div style="position:absolute;top:3337;left:85"><nobr>library(remotes)</nobr></div>
<div style="position:absolute;top:3355;left:85"><nobr>install_github("r-spatial/rgee")</nobr></div>
<div style="position:absolute;top:3406;left:85"><nobr>After the install, execute the following two commands below just once</nobr></div>
<div style="position:absolute;top:3437;left:85"><nobr>to finalize the installation process.</nobr></div>
<div style="position:absolute;top:3484;left:85"><nobr>library(rgee)</nobr></div>
<div style="position:absolute;top:3502;left:85"><nobr>ee_install()</nobr></div>
<div style="position:absolute;top:3553;left:85"><nobr>Execute the ee_Initialize() command. You will be directed to your</nobr></div>
<div style="position:absolute;top:3584;left:85"><nobr>Google Earth Engine and get access to it using rgee.</nobr></div>
<div style="position:absolute;top:3614;left:85"><nobr>ee_Initialize()</nobr></div>
<div style="position:absolute;top:3665;left:85"><nobr>That’s it, rgee is ready to use now!!!</nobr></div>
</span></font>

<div style="position:absolute;top:3961;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="4"><b>Page 4</b></a></font></td></tr></tbody></table></div><font size="4" face="Times"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:4065;left:85"><nobr><b>A BASIC OVERVIEW</b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:4138;left:85"><nobr>We will make a quick tour showing how to execute basic process using</nobr></div>
<div style="position:absolute;top:4169;left:85"><nobr>rgee with Sentinel2 images. First we start rgee using:</nobr></div>
<div style="position:absolute;top:4216;left:85"><nobr>library(rgee)</nobr></div>
<div style="position:absolute;top:4234;left:85"><nobr>ee_Initialize()</nobr></div>
<div style="position:absolute;top:4252;left:85"><nobr><b>── rgee 0.6.1 ───────────── earthengine-api 0.1.225 ──</b></nobr></div>
<div style="position:absolute;top:4267;left:96"><nobr>✔ <b><font color="#2a6099">email: </font><font color="#00a933">not_defined</font></b></nobr></div>
<div style="position:absolute;top:4285;left:96"><nobr>✔ <b><font color="#2a6099">Initializing Google Earth Engine: </font><font color="#00a933">DONE!</font></b></nobr></div>
<div style="position:absolute;top:4303;left:96"><nobr>✔ <b><font color="#2a6099">Earth Engine user: </font><font color="#00a933">users/xxxxxxxx</font></b></nobr></div>
<div style="position:absolute;top:4324;left:85"><nobr><b>──────────────────────────────────────────────────────</b></nobr></div>
<div style="position:absolute;top:4375;left:85"><nobr>We are going to load a Sentinel2 RGB image using the bands 4, 3 and</nobr></div>
<div style="position:absolute;top:4406;left:85"><nobr>2. This is done by creating an Image Collection that will be filtered</nobr></div>
<div style="position:absolute;top:4437;left:85"><nobr>by a date range and has a geometry point on it. Don’t worry about</nobr></div>
<div style="position:absolute;top:4468;left:85"><nobr>these objects, we will cover them in detail as we move forward in this</nobr></div>
<div style="position:absolute;top:4499;left:85"><nobr>tutorial.</nobr></div>
<div style="position:absolute;top:4531;left:85"><nobr>Loading the first image set that satisfy the filtering parameters</nobr></div>
<div style="position:absolute;top:4562;left:85"><nobr>defined by date (start, end) and <b>point coordinates </b>(longitude,</nobr></div>
<div style="position:absolute;top:4593;left:85"><nobr>latitude)<b>.</b></nobr></div>
<div style="position:absolute;top:4641;left:85"><nobr>col&lt;-ee$ImageCollection('COPERNICUS/S2_SR')</nobr></div>
<div style="position:absolute;top:4659;left:85"><nobr>point &lt;- ee$Geometry$Point(-44.366,-18.145)</nobr></div>
<div style="position:absolute;top:4677;left:85"><nobr>start &lt;- ee$Date("2019-07-11")</nobr></div>
<div style="position:absolute;top:4695;left:85"><nobr>end &lt;- ee$Date("2019-07-20")</nobr></div>
<div style="position:absolute;top:4713;left:85"><nobr>filter&lt;-col$filterBounds(point)$filterDate(start,end)</nobr></div>
<div style="position:absolute;top:4731;left:85"><nobr>img &lt;- filter$first()</nobr></div>
<div style="position:absolute;top:4769;left:85"><nobr>Creating the visualization parameter list by listing the bands used,</nobr></div>
<div style="position:absolute;top:4800;left:85"><nobr>gamma correction for each band, minimum and maximum values used.</nobr></div>
<div style="position:absolute;top:4847;left:85"><nobr># RGB Visible</nobr></div>
<div style="position:absolute;top:4865;left:85"><nobr>vPar &lt;- list(bands = c("B4", "B3", "B2"),min = 100,max = 8000,</nobr></div>
<div style="position:absolute;top:4883;left:226"><nobr>gamma = c(1.9,1.7,1.7))</nobr></div>
<div style="position:absolute;top:4921;left:85"><nobr>Finally we define the center of the map coordinates and the map scale</nobr></div>
<div style="position:absolute;top:4952;left:85"><nobr>before plotting the map with the predefined parameter.</nobr></div>
<div style="position:absolute;top:4999;left:85"><nobr>Map$setCenter(-44.366,-17.69, zoom = 10)</nobr></div>
<div style="position:absolute;top:5017;left:85"><nobr>Map$addLayer(img, vPar, "True Color Image")</nobr></div>
<div style="position:absolute;top:5055;left:85"><nobr>The resulting map will be:</nobr></div>
</span></font>

<div style="position:absolute;top:5223;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="5"><b>Page 5</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:5693;left:85"><nobr>By changing the visualization parameter we can change the image to be</nobr></div>
<div style="position:absolute;top:5724;left:85"><nobr>displayed. Below we show how to combine the bands 12, 11 and 8A into</nobr></div>
<div style="position:absolute;top:5755;left:85"><nobr>the RGB image that enhances rocks and soil responses.</nobr></div>
<div style="position:absolute;top:5803;left:85"><nobr># SWIR RGB Geology and soils</nobr></div>
<div style="position:absolute;top:5821;left:85"><nobr>vPar2 &lt;- list(bands = c("B12", "B11", "B8"),min = 500,max = 5000,</nobr></div>
<div style="position:absolute;top:5839;left:236"><nobr>gamma = 1.6)</nobr></div>
<div style="position:absolute;top:5890;left:85"><nobr>and we plot it using:</nobr></div>
<div style="position:absolute;top:5937;left:85"><nobr>Map$addLayer(img, vPar2, "Geology/Soil")</nobr></div>
</span></font>

<div style="position:absolute;top:6485;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="6"><b>Page 6</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:6572;left:85"><nobr>We will create now three normalized  difference indexes for</nobr></div>
<div style="position:absolute;top:6603;left:85"><nobr>vegetation, water and moisture (NDVI, NDWI e NDMI) .</nobr></div>
<div style="position:absolute;top:6650;left:85"><nobr># NDVI</nobr></div>
<div style="position:absolute;top:6668;left:85"><nobr>getNDVI &lt;- function(image) {</nobr></div>
<div style="position:absolute;top:6686;left:107"><nobr>return(image$normalizedDifference(c("B8", "B4")))</nobr></div>
<div style="position:absolute;top:6704;left:85"><nobr>}</nobr></div>
<div style="position:absolute;top:6722;left:85"><nobr>ndvi1 &lt;- getNDVI(img)</nobr></div>
<div style="position:absolute;top:6740;left:85"><nobr>ndviPar &lt;- list(palette = c(</nobr></div>
<div style="position:absolute;top:6758;left:107"><nobr>"#cccccc", "#f46d43", "#fdae61", "#fee08b",</nobr></div>
<div style="position:absolute;top:6776;left:107"><nobr>"#d9ef8b", "#a6d96a", "#66bd63", "#1a9850"</nobr></div>
<div style="position:absolute;top:6794;left:85"><nobr>),min=0,max=1)</nobr></div>
<div style="position:absolute;top:6848;left:85"><nobr># NDWI</nobr></div>
<div style="position:absolute;top:6866;left:85"><nobr>getNDWI &lt;- function(image) {</nobr></div>
<div style="position:absolute;top:6884;left:107"><nobr>return(image$normalizedDifference(c("B3", "B5")))</nobr></div>
<div style="position:absolute;top:6902;left:85"><nobr>}</nobr></div>
<div style="position:absolute;top:6920;left:85"><nobr>ndwi &lt;- getNDWI(img)</nobr></div>
<div style="position:absolute;top:6938;left:85"><nobr>ndwiPar &lt;- list(palette = c("#ffffff", "#0000ff","#0000ff"),min=-</nobr></div>
<div style="position:absolute;top:6956;left:85"><nobr>0.25,max=0.75)</nobr></div>
<div style="position:absolute;top:6992;left:85"><nobr># NDMI</nobr></div>
<div style="position:absolute;top:7010;left:85"><nobr>getNDMI &lt;- function(image) {</nobr></div>
<div style="position:absolute;top:7028;left:107"><nobr>return(image$normalizedDifference(c("B8", "B11")))</nobr></div>
<div style="position:absolute;top:7046;left:85"><nobr>}</nobr></div>
<div style="position:absolute;top:7064;left:85"><nobr>ndmi &lt;- getNDMI(img)</nobr></div>
<div style="position:absolute;top:7082;left:85"><nobr>ndmiPar &lt;- list(palette = c(</nobr></div>
<div style="position:absolute;top:7100;left:107"><nobr>"#d73027", "#f46d43", "#fdae61", "#fee08b",</nobr></div>
<div style="position:absolute;top:7118;left:107"><nobr>"#d9ef8b", "#a6d96a", "#66bd63", "#1a9850"</nobr></div>
<div style="position:absolute;top:7136;left:85"><nobr>),min=-1,max=1)</nobr></div>
<div style="position:absolute;top:7187;left:85"><nobr>Creating the map with the three indexes:</nobr></div>
<div style="position:absolute;top:7234;left:85"><nobr>#----------------------------------------------------</nobr></div>
<div style="position:absolute;top:7252;left:85"><nobr># Centering the map and adding the images with the</nobr></div>
<div style="position:absolute;top:7270;left:85"><nobr>#  parameter created above</nobr></div>
<div style="position:absolute;top:7288;left:85"><nobr>#----------------------------------------------------</nobr></div>
<div style="position:absolute;top:7306;left:85"><nobr>Map$setCenter(-44.366,-17.69, zoom = 10)</nobr></div>
<div style="position:absolute;top:7324;left:85"><nobr>Map$addLayer(ndvi1, ndviPar, "NDVI")+Map$addLayer(ndwi, ndwiPar,</nobr></div>
<div style="position:absolute;top:7342;left:85"><nobr>"NDWI")+ Map$addLayer(ndmi, ndmiPar, "NDMI")</nobr></div>
<div style="position:absolute;top:7424;left:85"><nobr>The result will be a map with three images representing the NDVI,</nobr></div>
<div style="position:absolute;top:7455;left:85"><nobr>NDWI and NDMI indexes.</nobr></div>
</span></font>

<div style="position:absolute;top:7747;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="7"><b>Page 7</b></a></font></td></tr></tbody></table></div>
<div style="position:absolute;top:7747;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="8"><b>Page 8</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:7834;left:85"><nobr>Using Google Earth Engine is an advantage for us because most of the</nobr></div>
<div style="position:absolute;top:7865;left:85"><nobr>tasks are already algorithms/functions created within their system (and</nobr></div>
<div style="position:absolute;top:7896;left:85"><nobr>their huge data collections of different types of course). We just</nobr></div>
<div style="position:absolute;top:7927;left:85"><nobr>used one of these function above as an example,</nobr></div>
<div style="position:absolute;top:7964;left:85"><nobr>image$nomalizedDifference(c(banda,banda)) to compute the normalized</nobr></div>
<div style="position:absolute;top:7989;left:85"><nobr>indexes, also we don’t need to worry about different image</nobr></div>
<div style="position:absolute;top:8020;left:85"><nobr>resolutions of bands B5(20m) and B3(10m) used in NDWI, GEE takes</nobr></div>
<div style="position:absolute;top:8051;left:85"><nobr>care of it automatically.</nobr></div>
<div style="position:absolute;top:8114;left:85"><nobr>Another example now using a DEM ALOS AW3D30 image.</nobr></div>
<div style="position:absolute;top:8161;left:85"><nobr>library(rgee)</nobr></div>
<div style="position:absolute;top:8179;left:85"><nobr>ee_Initialize()   </nobr></div>
<div style="position:absolute;top:8197;left:85"><nobr>imgData &lt;- ee$Image("JAXA/ALOS/AW3D30_V1_1")</nobr></div>
<div style="position:absolute;top:8215;left:85"><nobr>elev &lt;- imgData$select("AVE")</nobr></div>
<div style="position:absolute;top:8233;left:85"><nobr>Map$setCenter(-44.366,-17.69, zoom = 10)</nobr></div>
<div style="position:absolute;top:8251;left:85"><nobr>Map$addLayer(eeObject=elev,visParams=list(palette = c(</nobr></div>
<div style="position:absolute;top:8269;left:96"><nobr>"#d73027", "#f46d43", "#fdae61", "#fee08b","#d9ef8b","#a6d96a", </nobr></div>
<div style="position:absolute;top:8287;left:96"><nobr>"#66bd63", "#1a9850"),min=200,max=1400),name="Elevation")</nobr></div>
<div style="position:absolute;top:8338;left:85"><nobr>The resulting map is:</nobr></div>
<div style="position:absolute;top:8782;left:85"><nobr>RGEE is very versatile and we will see a few more interesting examples</nobr></div>
<div style="position:absolute;top:8813;left:85"><nobr>before we deep in <b>ee$Image </b>and <b>ee$ImageCollection </b>in the</nobr></div>
<div style="position:absolute;top:8845;left:85"><nobr>following chapters.</nobr></div>
</span></font>

<div style="position:absolute;top:9009;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="9"><b>Page 9</b></a></font></td></tr></tbody></table></div><font size="4" face="Times"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:9113;left:85"><nobr><b>EXAMPLES OF DATA FROM OTHER SOURCES</b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:9186;left:85"><nobr>We can use images and features from different sources on a single</nobr></div>
<div style="position:absolute;top:9217;left:85"><nobr>map loading them from different resources and displaying them</nobr></div>
<div style="position:absolute;top:9248;left:85"><nobr>together.</nobr></div>
<div style="position:absolute;top:9310;left:85"><nobr>We will use an Aster image with the bands B3N, B02 and B01 and also</nobr></div>
<div style="position:absolute;top:9341;left:85"><nobr>we will use a hill shade created from ALOS AW3D30 DEM and overlay it</nobr></div>
<div style="position:absolute;top:9372;left:85"><nobr>on top of the Aster image to create a topography perception on the</nobr></div>
<div style="position:absolute;top:9403;left:85"><nobr>final image.</nobr></div>
<div style="position:absolute;top:9450;left:85"><nobr>library(rgee)</nobr></div>
<div style="position:absolute;top:9468;left:85"><nobr>ee_Initialize()</nobr></div>
<div style="position:absolute;top:9486;left:85"><nobr># loading the Aster image collection</nobr></div>
<div style="position:absolute;top:9504;left:85"><nobr>aster&lt;-ee$ImageCollection("ASTER/AST_L1T_003")</nobr></div>
<div style="position:absolute;top:9522;left:85"><nobr>point &lt;- ee$Geometry$Point(-44.21722,-18.31933)</nobr></div>
<div style="position:absolute;top:9540;left:85"><nobr>filter&lt;-aster$filterBounds(point)$filterDate('2013-06-15', '2013-</nobr></div>
<div style="position:absolute;top:9558;left:85"><nobr>09-15')</nobr></div>
<div style="position:absolute;top:9594;left:85"><nobr>#selecting the bands</nobr></div>
<div style="position:absolute;top:9612;left:85"><nobr>img &lt;- filter$select(c('B3N','B02','B01'))</nobr></div>
<div style="position:absolute;top:9630;left:85"><nobr>vPar &lt;- list(min = 0,max = 255)</nobr></div>
<div style="position:absolute;top:9666;left:85"><nobr># degrees to radians transformation</nobr></div>
<div style="position:absolute;top:9684;left:85"><nobr>Radians &lt;- function(img) {</nobr></div>
<div style="position:absolute;top:9702;left:107"><nobr>img$toFloat()$multiply(base::pi)$divide(180)</nobr></div>
<div style="position:absolute;top:9720;left:85"><nobr>}</nobr></div>
<div style="position:absolute;top:9738;left:85"><nobr># hillshade creation function</nobr></div>
<div style="position:absolute;top:9756;left:85"><nobr>Hillshade &lt;- function(az, ze, slope, aspect) {</nobr></div>
<div style="position:absolute;top:9774;left:107"><nobr>azimuth &lt;- Radians(ee$Image(az))</nobr></div>
<div style="position:absolute;top:9792;left:107"><nobr>zenith &lt;- Radians(ee$Image(ze))</nobr></div>
<div style="position:absolute;top:9810;left:107"><nobr>azimuth$subtract(aspect)$cos()$</nobr></div>
<div style="position:absolute;top:9828;left:128"><nobr>multiply(slope$sin())$</nobr></div>
<div style="position:absolute;top:9846;left:128"><nobr>multiply(zenith$sin())$</nobr></div>
<div style="position:absolute;top:9864;left:128"><nobr>add(zenith$cos()$multiply(slope$cos()))</nobr></div>
<div style="position:absolute;top:9882;left:85"><nobr>}</nobr></div>
<div style="position:absolute;top:9900;left:85"><nobr># loading the ALOS DEM image</nobr></div>
<div style="position:absolute;top:9918;left:85"><nobr>terrain &lt;- ee$Algorithms$Terrain(ee$Image("JAXA/ALOS/AW3D30_V1_1")</nobr></div>
<div style="position:absolute;top:9936;left:85"><nobr>$select("AVE"))</nobr></div>
<div style="position:absolute;top:9954;left:85"><nobr># extracting slope and aspect</nobr></div>
<div style="position:absolute;top:9972;left:85"><nobr>slope_img &lt;- Radians(terrain$select("slope"))</nobr></div>
<div style="position:absolute;top:9990;left:85"><nobr>aspect_img &lt;- Radians(terrain$select("aspect"))</nobr></div>
<div style="position:absolute;top:10008;left:85"><nobr># map central coordinate and zoom level</nobr></div>
<div style="position:absolute;top:10026;left:85"><nobr>Map$setCenter(-44.21722,-18.31933, zoom = 11)</nobr></div>
<div style="position:absolute;top:10044;left:85"><nobr># Adding the 2 images -  hill shade 25%    opacity</nobr></div>
<div style="position:absolute;top:10062;left:85"><nobr>Map$addLayer(img$median(), vPar, "Imagem Aster")+</nobr></div>
<div style="position:absolute;top:10080;left:85"><nobr>Map$addLayer(Hillshade(135, -60, slope_img,</nobr></div>
<div style="position:absolute;top:10098;left:85"><nobr>aspect_img),visParams=list(opacity=0.25),'Hill shade') </nobr></div>
</span></font>

<div style="position:absolute;top:10271;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="10"><b>Page 10</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:10358;left:85"><nobr>Image with hill shade.</nobr></div>
<div style="position:absolute;top:10876;left:85"><nobr>Image without hill shade.</nobr></div>
</span></font>

<div style="position:absolute;top:11533;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="11"><b>Page 11</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:11620;left:85"><nobr>Plotting only the hill shade image with 75% opacity:</nobr></div>
<div style="position:absolute;top:11649;left:85"><nobr>Map$addLayer(Hillshade(135, -60, slope_img,aspect_img),visParams=</nobr></div>
<div style="position:absolute;top:11667;left:85"><nobr>list(opacity=0.75),'Hill shade')</nobr></div>
<div style="position:absolute;top:12107;left:85"><nobr>Using a Sentinel-1 image and creating a composite image composed by</nobr></div>
<div style="position:absolute;top:12138;left:85"><nobr>polarization and back scattering characteristics.</nobr></div>
<div style="position:absolute;top:12198;left:85"><nobr>library(rgee)</nobr></div>
<div style="position:absolute;top:12216;left:85"><nobr>ee_Initialize()</nobr></div>
<div style="position:absolute;top:12252;left:85"><nobr># loading Sentinel-1 into a ImageCollection.</nobr></div>
<div style="position:absolute;top:12270;left:85"><nobr>sentinel1 &lt;- ee$ImageCollection("COPERNICUS/S1_GRD")</nobr></div>
<div style="position:absolute;top:12288;left:85"><nobr>$filterBounds(ee$Geometry$Point(-122.37383, 37.6193))</nobr></div>
<div style="position:absolute;top:12324;left:85"><nobr># Filtering using matadata information.</nobr></div>
<div style="position:absolute;top:12342;left:85"><nobr>vh &lt;-</nobr></div>
<div style="position:absolute;top:12360;left:85"><nobr>sentinel1$filter(ee$Filter$listContains("transmitterReceiverPolari</nobr></div>
<div style="position:absolute;top:12378;left:85"><nobr>sation", "VV"))</nobr></div>
<div style="position:absolute;top:12396;left:85"><nobr>$filter(ee$Filter$listContains("transmitterReceiverPolarisation",</nobr></div>
<div style="position:absolute;top:12414;left:85"><nobr>"VH"))$filter(ee$Filter$eq("instrumentMode", "IW"))</nobr></div>
<div style="position:absolute;top:12450;left:85"><nobr># Filtering to get images at different observation angle.</nobr></div>
<div style="position:absolute;top:12468;left:85"><nobr>vhAscending &lt;- vh$filter(ee$Filter$eq("orbitProperties_pass",</nobr></div>
<div style="position:absolute;top:12486;left:85"><nobr>"ASCENDING"))</nobr></div>
<div style="position:absolute;top:12504;left:85"><nobr>vhDescending &lt;- vh$filter(ee$Filter$eq("orbitProperties_pass",</nobr></div>
<div style="position:absolute;top:12522;left:85"><nobr>"DESCENDING"))</nobr></div>
<div style="position:absolute;top:12558;left:85"><nobr># Creating the final composite image</nobr></div>
<div style="position:absolute;top:12576;left:85"><nobr>VH_Ascending_mean &lt;- vhAscending$select("VH")$mean()</nobr></div>
<div style="position:absolute;top:12594;left:85"><nobr>VV_Ascending_Descending_mean &lt;- vhAscending$select("VV") %&gt;%</nobr></div>
<div style="position:absolute;top:12612;left:85"><nobr>ee$ImageCollection$merge(vhDescending$select("VV")) %&gt;%</nobr></div>
<div style="position:absolute;top:12630;left:85"><nobr>ee$ImageCollection$mean()</nobr></div>
<div style="position:absolute;top:12648;left:85"><nobr>VH_Descending_mean &lt;- vhDescending$select("VH")$mean()</nobr></div>
<div style="position:absolute;top:12666;left:85"><nobr>composite &lt;- ee$Image$cat(list(</nobr></div>
<div style="position:absolute;top:12684;left:107"><nobr>VH_Ascending_mean,</nobr></div>
</span></font>

<div style="position:absolute;top:12795;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="12"><b>Page 12</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:12880;left:107"><nobr>VV_Ascending_Descending_mean,</nobr></div>
<div style="position:absolute;top:12898;left:107"><nobr>VH_Descending_mean</nobr></div>
<div style="position:absolute;top:12916;left:85"><nobr>))$focal_median()</nobr></div>
<div style="position:absolute;top:12952;left:85"><nobr># Plotting the image composed by polarization and</nobr></div>
<div style="position:absolute;top:12970;left:85"><nobr># back scattering characteristics.</nobr></div>
<div style="position:absolute;top:12988;left:85"><nobr>Map$setCenter(-122.37383, 37.6193, 10)</nobr></div>
<div style="position:absolute;top:13006;left:85"><nobr>Map$addLayer(</nobr></div>
<div style="position:absolute;top:13024;left:107"><nobr>composite,</nobr></div>
<div style="position:absolute;top:13042;left:107"><nobr>list(min = c(-25, -20, -25), max = c(0, 10, 0)),</nobr></div>
<div style="position:absolute;top:13060;left:107"><nobr>"composite"</nobr></div>
<div style="position:absolute;top:13078;left:85"><nobr>)</nobr></div>
<div style="position:absolute;top:13098;left:85"><nobr>The resulting map is:</nobr></div>
<div style="position:absolute;top:13541;left:85"><nobr>To conclude this introductory part, we will see how to download an</nobr></div>
<div style="position:absolute;top:13572;left:85"><nobr>image from Google Earth Engine. There is a limitation on the size of</nobr></div>
<div style="position:absolute;top:13603;left:85"><nobr>the image to be downloaded and the path generated is temporary.</nobr></div>
<div style="position:absolute;top:13650;left:85"><nobr>library(rgee)</nobr></div>
<div style="position:absolute;top:13668;left:85"><nobr>ee_Initialize()</nobr></div>
<div style="position:absolute;top:13686;left:85"><nobr># loading the image to be downloaded</nobr></div>
<div style="position:absolute;top:13704;left:85"><nobr>image1 &lt;- ee$ImageCollection('ASTER/AST_L1T_003')</nobr></div>
<div style="position:absolute;top:13722;left:85"><nobr>$filterDate('2013-06-15', '2013-09-15')$median()</nobr></div>
<div style="position:absolute;top:13740;left:85"><nobr>geom_params &lt;-   list(</nobr></div>
<div style="position:absolute;top:13758;left:107"><nobr>scale = 30,</nobr></div>
<div style="position:absolute;top:13776;left:107"><nobr>crs = 'EPSG:4326',</nobr></div>
<div style="position:absolute;top:13794;left:107"><nobr>region = '[[-44.15, -18.25], [-44.35, -18.25], [-44.35, -18.35],</nobr></div>
<div style="position:absolute;top:13812;left:85"><nobr>[-44.15, -18.35]]'</nobr></div>
<div style="position:absolute;top:13830;left:85"><nobr>)</nobr></div>
<div style="position:absolute;top:13848;left:85"><nobr>path &lt;- image1$getDownloadUrl(geom_params)</nobr></div>
<div style="position:absolute;top:13866;left:85"><nobr>print(path)</nobr></div>
</span></font>

<div style="position:absolute;top:14057;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="13"><b>Page 13</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:14144;left:85"><nobr>The path displayed is an url that will be used to download the image.</nobr></div>
<div style="position:absolute;top:14191;left:85"><nobr>[1]</nobr></div>
<div style="position:absolute;top:14209;left:85"><nobr>"https://earthengine.googleapis.com/v1alpha/projects/earthengine-</nobr></div>
<div style="position:absolute;top:14227;left:85"><nobr>legacy/thumbnails/132ba605f16c0350a77b608984414295-</nobr></div>
<div style="position:absolute;top:14245;left:85"><nobr>3dafacadd346ad41d9cfc658a765fd1f:getPixels"</nobr></div>
<div style="position:absolute;top:14283;left:85"><nobr>Use wget at a command prompt (monitor) to download the compacted</nobr></div>
<div style="position:absolute;top:14314;left:85"><nobr>image and use unzip to extract it.</nobr></div>
<div style="position:absolute;top:14361;left:85"><nobr>wget</nobr></div>
<div style="position:absolute;top:14379;left:85"><nobr>https://earthengine.googleapis.com/v1alpha/projects/earthengine-</nobr></div>
<div style="position:absolute;top:14397;left:85"><nobr>legacy/thumbnails/132ba605f16c0350a77b608984414295-</nobr></div>
<div style="position:absolute;top:14415;left:85"><nobr>3dafacadd346ad41d9cfc658a765fd1f:getPixels</nobr></div>
<div style="position:absolute;top:14451;left:85"><nobr>unzip -x "132ba605f16c0350a77b608984414295-</nobr></div>
<div style="position:absolute;top:14469;left:85"><nobr>3dafacadd346ad41d9cfc658a765fd1f:getPixels"</nobr></div>
<div style="position:absolute;top:14507;left:85"><nobr>Back into the R environment use the raster package that it is normally</nobr></div>
<div style="position:absolute;top:14538;left:85"><nobr>used to work with local images. Lets create a thermal and a color</nobr></div>
<div style="position:absolute;top:14569;left:85"><nobr>composite image with the downloaded data:</nobr></div>
<div style="position:absolute;top:14629;left:85"><nobr>library(raster)</nobr></div>
<div style="position:absolute;top:14647;left:85"><nobr>thermal&lt;-</nobr></div>
<div style="position:absolute;top:14665;left:85"><nobr>stack('download.B10.tif','download.B11.tif','download.B12.tif')</nobr></div>
<div style="position:absolute;top:14683;left:85"><nobr>plotRGB(thermal,stretch='lin')</nobr></div>
<div style="position:absolute;top:14701;left:85"><nobr>visible&lt;-</nobr></div>
<div style="position:absolute;top:14719;left:85"><nobr>stack('download.B3N.tif','download.B02.tif','download.B01.tif')</nobr></div>
<div style="position:absolute;top:14745;left:85"><nobr>plotRGB(visible,stretch='lin')</nobr></div>
<div style="position:absolute;top:14771;left:85"><nobr>Thermal image (90m resolution):</nobr></div>
</span></font>

<div style="position:absolute;top:15319;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="14"><b>Page 14</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:15406;left:85"><nobr>Visible range image (15m resolution):</nobr></div>
</span></font>
<font size="4" face="Times"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:15870;left:85"><nobr><b>A NOTE ON HOW GOOGLE EARTH ENGINE WORKS</b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:15911;left:85"><nobr>Almost all transaction on google earth engine is basically the</nobr></div>
<div style="position:absolute;top:15942;left:85"><nobr>preparation of a JSON object that at the final stage is sent to</nobr></div>
<div style="position:absolute;top:15973;left:85"><nobr>google earth engine  server and translated into a final image or</nobr></div>
<div style="position:absolute;top:16004;left:85"><nobr>feature that is presented on a map or viewed as properties using the</nobr></div>
<div style="position:absolute;top:16035;left:85"><nobr>function getinfo() or ee_print().</nobr></div>
<div style="position:absolute;top:16066;left:85"><nobr>See the example below that illustrates how this is done:</nobr></div>
<div style="position:absolute;top:16095;left:85"><nobr>library(rgee)</nobr></div>
<div style="position:absolute;top:16113;left:85"><nobr>ee_Initialize()</nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:16px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:16131;left:85"><nobr>── rgee 0.6.1 ────────────────────── earthengine-api 0.1.225 ──</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:16147;left:96"><nobr>✔ <font color="#2a6099">email: not_defined</font></nobr></div>
<div style="position:absolute;top:16165;left:96"><nobr>✔ <font color="#2a6099">Initializing Google Earth Engine:  DONE!</font></nobr></div>
<div style="position:absolute;top:16183;left:96"><nobr>✔ <font color="#2a6099">Earth Engine user: users/?????????</font></nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:16px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:16203;left:85"><nobr>───────────────────────────────────────────────────────────────</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:16221;left:85"><nobr>aster&lt;-ee$ImageCollection("ASTER/AST_L1T_003")</nobr></div>
<div style="position:absolute;top:16239;left:85"><nobr>aster</nobr></div>
<div style="position:absolute;top:16257;left:85"><nobr><b>ee.ImageCollection</b>(<font color="#2a6099">{</font></nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:16px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:16275;left:107"><nobr>"type": "Invocation",</nobr></div>
<div style="position:absolute;top:16293;left:107"><nobr>"arguments": {</nobr></div>
<div style="position:absolute;top:16311;left:128"><nobr>"id": "ASTER/AST_L1T_003"</nobr></div>
<div style="position:absolute;top:16329;left:107"><nobr>},</nobr></div>
<div style="position:absolute;top:16347;left:107"><nobr>"functionName": "ImageCollection.load"</nobr></div>
<div style="position:absolute;top:16365;left:85"><nobr>})</nobr></div>
</span></font>

<div style="position:absolute;top:16581;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="15"><b>Page 15</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:16666;left:85"><nobr>point &lt;- ee$Geometry$Point(-44.21722,-18.31933)</nobr></div>
<div style="position:absolute;top:16684;left:85"><nobr>point</nobr></div>
<div style="position:absolute;top:16702;left:85"><nobr><b>ee.Geometry</b><font color="#2a6099">({</font></nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:16px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:16720;left:107"><nobr>"type": "Point",</nobr></div>
<div style="position:absolute;top:16738;left:107"><nobr>"coordinates": [</nobr></div>
<div style="position:absolute;top:16756;left:128"><nobr>-44.21722,</nobr></div>
<div style="position:absolute;top:16774;left:128"><nobr>-18.31933</nobr></div>
<div style="position:absolute;top:16792;left:107"><nobr>]</nobr></div>
<div style="position:absolute;top:16810;left:85"><nobr>})</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:16828;left:85"><nobr>filter&lt;-aster$filterBounds(point)$filterDate('2013-06-15', '2013-</nobr></div>
<div style="position:absolute;top:16846;left:85"><nobr>09-15')</nobr></div>
<div style="position:absolute;top:16864;left:85"><nobr>filter</nobr></div>
<div style="position:absolute;top:16882;left:85"><nobr><b>ee.ImageCollection</b><font color="#2a6099">({</font></nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:16px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:16900;left:107"><nobr>"type": "Invocation",</nobr></div>
<div style="position:absolute;top:16918;left:107"><nobr>"arguments": {</nobr></div>
<div style="position:absolute;top:16936;left:128"><nobr>"collection": {</nobr></div>
<div style="position:absolute;top:16954;left:150"><nobr>"type": "Invocation",</nobr></div>
<div style="position:absolute;top:16972;left:150"><nobr>"arguments": {</nobr></div>
<div style="position:absolute;top:16990;left:172"><nobr>"collection": {</nobr></div>
<div style="position:absolute;top:17008;left:193"><nobr>"type": "Invocation",</nobr></div>
<div style="position:absolute;top:17026;left:193"><nobr>"arguments": {</nobr></div>
<div style="position:absolute;top:17044;left:215"><nobr>"id": "ASTER/AST_L1T_003"</nobr></div>
<div style="position:absolute;top:17062;left:193"><nobr>},</nobr></div>
<div style="position:absolute;top:17080;left:193"><nobr>"functionName": "ImageCollection.load"</nobr></div>
<div style="position:absolute;top:17098;left:172"><nobr>},</nobr></div>
<div style="position:absolute;top:17116;left:172"><nobr>"filter": {</nobr></div>
<div style="position:absolute;top:17134;left:193"><nobr>"type": "Invocation",</nobr></div>
<div style="position:absolute;top:17152;left:193"><nobr>"arguments": {</nobr></div>
<div style="position:absolute;top:17170;left:215"><nobr>"leftField": ".all",</nobr></div>
<div style="position:absolute;top:17188;left:215"><nobr>"rightValue": {</nobr></div>
<div style="position:absolute;top:17206;left:236"><nobr>"type": "Invocation",</nobr></div>
<div style="position:absolute;top:17224;left:236"><nobr>"arguments": {</nobr></div>
<div style="position:absolute;top:17242;left:258"><nobr>"geometry": {</nobr></div>
<div style="position:absolute;top:17260;left:280"><nobr>"type": "Point",</nobr></div>
<div style="position:absolute;top:17278;left:280"><nobr>"coordinates": [</nobr></div>
<div style="position:absolute;top:17296;left:301"><nobr>-44.21722,</nobr></div>
<div style="position:absolute;top:17314;left:301"><nobr>-18.31933</nobr></div>
<div style="position:absolute;top:17332;left:280"><nobr>]</nobr></div>
<div style="position:absolute;top:17350;left:258"><nobr>}</nobr></div>
<div style="position:absolute;top:17368;left:236"><nobr>},</nobr></div>
<div style="position:absolute;top:17386;left:236"><nobr>"functionName": "Feature"</nobr></div>
<div style="position:absolute;top:17404;left:215"><nobr>}</nobr></div>
<div style="position:absolute;top:17422;left:193"><nobr>},</nobr></div>
<div style="position:absolute;top:17440;left:193"><nobr>"functionName": "Filter.intersects"</nobr></div>
<div style="position:absolute;top:17458;left:172"><nobr>}</nobr></div>
<div style="position:absolute;top:17476;left:150"><nobr>},</nobr></div>
<div style="position:absolute;top:17494;left:150"><nobr>"functionName": "Collection.filter"</nobr></div>
<div style="position:absolute;top:17512;left:128"><nobr>},</nobr></div>
<div style="position:absolute;top:17530;left:128"><nobr>"filter": {</nobr></div>
<div style="position:absolute;top:17548;left:150"><nobr>"type": "Invocation",</nobr></div>
<div style="position:absolute;top:17566;left:150"><nobr>"arguments": {</nobr></div>
<div style="position:absolute;top:17584;left:172"><nobr>"rightField": "system:time_start",</nobr></div>
<div style="position:absolute;top:17602;left:172"><nobr>"leftValue": {</nobr></div>
<div style="position:absolute;top:17620;left:193"><nobr>"type": "Invocation",</nobr></div>
<div style="position:absolute;top:17638;left:193"><nobr>"arguments": {</nobr></div>
<div style="position:absolute;top:17656;left:215"><nobr>"start": "2013-06-15",</nobr></div>
<div style="position:absolute;top:17674;left:215"><nobr>"end": "2013-09-15"</nobr></div>
<div style="position:absolute;top:17692;left:193"><nobr>},</nobr></div>
<div style="position:absolute;top:17710;left:193"><nobr>"functionName": "DateRange"</nobr></div>
<div style="position:absolute;top:17728;left:172"><nobr>}</nobr></div>
</span></font>

<div style="position:absolute;top:17843;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="16"><b>Page 16</b></a></font></td></tr></tbody></table></div><font size="3" color="#2a6099" face="Times"><span style="font-size:16px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:17928;left:150"><nobr>},</nobr></div>
<div style="position:absolute;top:17946;left:150"><nobr>"functionName": "Filter.dateRangeContains"</nobr></div>
<div style="position:absolute;top:17964;left:128"><nobr>}</nobr></div>
<div style="position:absolute;top:17982;left:107"><nobr>},</nobr></div>
<div style="position:absolute;top:18000;left:107"><nobr>"functionName": "Collection.filter"</nobr></div>
<div style="position:absolute;top:18018;left:85"><nobr>})</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:18036;left:85"><nobr>bands &lt;- filter$select(c('B3N','B02','B01'))</nobr></div>
<div style="position:absolute;top:18054;left:85"><nobr>bands</nobr></div>
<div style="position:absolute;top:18072;left:85"><nobr><b>ee.ImageCollection</b><font color="#2a6099">({</font></nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:16px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:18090;left:107"><nobr>"type": "Invocation",</nobr></div>
<div style="position:absolute;top:18108;left:107"><nobr>"arguments": {</nobr></div>
<div style="position:absolute;top:18126;left:128"><nobr>"collection": {</nobr></div>
<div style="position:absolute;top:18144;left:150"><nobr>"type": "Invocation",</nobr></div>
<div style="position:absolute;top:18162;left:150"><nobr>"arguments": {</nobr></div>
<div style="position:absolute;top:18180;left:172"><nobr>"collection": {</nobr></div>
<div style="position:absolute;top:18198;left:193"><nobr>"type": "Invocation",</nobr></div>
<div style="position:absolute;top:18216;left:193"><nobr>"arguments": {</nobr></div>
<div style="position:absolute;top:18234;left:215"><nobr>"collection": {</nobr></div>
<div style="position:absolute;top:18252;left:236"><nobr>"type": "Invocation",</nobr></div>
<div style="position:absolute;top:18270;left:236"><nobr>"arguments": {</nobr></div>
<div style="position:absolute;top:18288;left:258"><nobr>"id": "ASTER/AST_L1T_003"</nobr></div>
<div style="position:absolute;top:18306;left:236"><nobr>},</nobr></div>
<div style="position:absolute;top:18324;left:236"><nobr>"functionName": "ImageCollection.load"</nobr></div>
<div style="position:absolute;top:18342;left:215"><nobr>},</nobr></div>
<div style="position:absolute;top:18360;left:215"><nobr>"filter": {</nobr></div>
<div style="position:absolute;top:18378;left:236"><nobr>"type": "Invocation",</nobr></div>
<div style="position:absolute;top:18396;left:236"><nobr>"arguments": {</nobr></div>
<div style="position:absolute;top:18414;left:258"><nobr>"leftField": ".all",</nobr></div>
<div style="position:absolute;top:18432;left:258"><nobr>"rightValue": {</nobr></div>
<div style="position:absolute;top:18450;left:280"><nobr>"type": "Invocation",</nobr></div>
<div style="position:absolute;top:18468;left:280"><nobr>"arguments": {</nobr></div>
<div style="position:absolute;top:18486;left:301"><nobr>"geometry": {</nobr></div>
<div style="position:absolute;top:18504;left:323"><nobr>"type": "Point",</nobr></div>
<div style="position:absolute;top:18522;left:323"><nobr>"coordinates": [</nobr></div>
<div style="position:absolute;top:18540;left:344"><nobr>-44.21722,</nobr></div>
<div style="position:absolute;top:18558;left:344"><nobr>-18.31933</nobr></div>
<div style="position:absolute;top:18576;left:323"><nobr>]</nobr></div>
<div style="position:absolute;top:18594;left:301"><nobr>}</nobr></div>
<div style="position:absolute;top:18612;left:280"><nobr>},</nobr></div>
<div style="position:absolute;top:18630;left:280"><nobr>"functionName": "Feature"</nobr></div>
<div style="position:absolute;top:18648;left:258"><nobr>}</nobr></div>
<div style="position:absolute;top:18666;left:236"><nobr>},</nobr></div>
<div style="position:absolute;top:18684;left:236"><nobr>"functionName": "Filter.intersects"</nobr></div>
<div style="position:absolute;top:18702;left:215"><nobr>}</nobr></div>
<div style="position:absolute;top:18720;left:193"><nobr>},</nobr></div>
<div style="position:absolute;top:18738;left:193"><nobr>"functionName": "Collection.filter"</nobr></div>
<div style="position:absolute;top:18756;left:172"><nobr>},</nobr></div>
<div style="position:absolute;top:18774;left:172"><nobr>"filter": {</nobr></div>
<div style="position:absolute;top:18792;left:193"><nobr>"type": "Invocation",</nobr></div>
<div style="position:absolute;top:18810;left:193"><nobr>"arguments": {</nobr></div>
<div style="position:absolute;top:18828;left:215"><nobr>"rightField": "system:time_start",</nobr></div>
<div style="position:absolute;top:18846;left:215"><nobr>"leftValue": {</nobr></div>
<div style="position:absolute;top:18864;left:236"><nobr>"type": "Invocation",</nobr></div>
<div style="position:absolute;top:18882;left:236"><nobr>"arguments": {</nobr></div>
<div style="position:absolute;top:18900;left:258"><nobr>"start": "2013-06-15",</nobr></div>
<div style="position:absolute;top:18918;left:258"><nobr>"end": "2013-09-15"</nobr></div>
<div style="position:absolute;top:18936;left:236"><nobr>},</nobr></div>
<div style="position:absolute;top:18954;left:236"><nobr>"functionName": "DateRange"</nobr></div>
<div style="position:absolute;top:18972;left:215"><nobr>}</nobr></div>
<div style="position:absolute;top:18990;left:193"><nobr>},</nobr></div>
</span></font>

<div style="position:absolute;top:19105;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="17"><b>Page 17</b></a></font></td></tr></tbody></table></div><font size="3" color="#2a6099" face="Times"><span style="font-size:16px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:19190;left:193"><nobr>"functionName": "Filter.dateRangeContains"</nobr></div>
<div style="position:absolute;top:19208;left:172"><nobr>}</nobr></div>
<div style="position:absolute;top:19226;left:150"><nobr>},</nobr></div>
<div style="position:absolute;top:19244;left:150"><nobr>"functionName": "Collection.filter"</nobr></div>
<div style="position:absolute;top:19262;left:128"><nobr>},</nobr></div>
<div style="position:absolute;top:19280;left:128"><nobr>"baseAlgorithm": {</nobr></div>
<div style="position:absolute;top:19298;left:150"><nobr>"type": "Function",</nobr></div>
<div style="position:absolute;top:19316;left:150"><nobr>"argumentNames": [</nobr></div>
<div style="position:absolute;top:19334;left:172"><nobr>"_MAPPING_VAR_0_0"</nobr></div>
<div style="position:absolute;top:19352;left:150"><nobr>],</nobr></div>
<div style="position:absolute;top:19370;left:150"><nobr>"body": {</nobr></div>
<div style="position:absolute;top:19388;left:172"><nobr>"type": "Invocation",</nobr></div>
<div style="position:absolute;top:19406;left:172"><nobr>"arguments": {</nobr></div>
<div style="position:absolute;top:19424;left:193"><nobr>"input": {</nobr></div>
<div style="position:absolute;top:19442;left:215"><nobr>"type": "ArgumentRef",</nobr></div>
<div style="position:absolute;top:19460;left:215"><nobr>"value": "_MAPPING_VAR_0_0"</nobr></div>
<div style="position:absolute;top:19478;left:193"><nobr>},</nobr></div>
<div style="position:absolute;top:19496;left:193"><nobr>"bandSelectors": [</nobr></div>
<div style="position:absolute;top:19514;left:215"><nobr>"B3N",</nobr></div>
<div style="position:absolute;top:19532;left:215"><nobr>"B02",</nobr></div>
<div style="position:absolute;top:19550;left:215"><nobr>"B01"</nobr></div>
<div style="position:absolute;top:19568;left:193"><nobr>]</nobr></div>
<div style="position:absolute;top:19586;left:172"><nobr>},</nobr></div>
<div style="position:absolute;top:19604;left:172"><nobr>"functionName": "Image.select"</nobr></div>
<div style="position:absolute;top:19622;left:150"><nobr>}</nobr></div>
<div style="position:absolute;top:19640;left:128"><nobr>}</nobr></div>
<div style="position:absolute;top:19658;left:107"><nobr>},</nobr></div>
<div style="position:absolute;top:19676;left:107"><nobr>"functionName": "Collection.map"</nobr></div>
<div style="position:absolute;top:19694;left:85"><nobr>})</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:19712;left:85"><nobr>img &lt;- bands$median()</nobr></div>
<div style="position:absolute;top:19730;left:85"><nobr>img</nobr></div>
<div style="position:absolute;top:19748;left:85"><nobr><b>ee.Image</b><font color="#2a6099">({</font></nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:16px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:19766;left:107"><nobr>"type": "Invocation",</nobr></div>
<div style="position:absolute;top:19784;left:107"><nobr>"arguments": {</nobr></div>
<div style="position:absolute;top:19802;left:128"><nobr>"collection": {</nobr></div>
<div style="position:absolute;top:19820;left:150"><nobr>"type": "Invocation",</nobr></div>
<div style="position:absolute;top:19838;left:150"><nobr>"arguments": {</nobr></div>
<div style="position:absolute;top:19856;left:172"><nobr>"collection": {</nobr></div>
<div style="position:absolute;top:19874;left:193"><nobr>"type": "Invocation",</nobr></div>
<div style="position:absolute;top:19892;left:193"><nobr>"arguments": {</nobr></div>
<div style="position:absolute;top:19910;left:215"><nobr>"collection": {</nobr></div>
<div style="position:absolute;top:19928;left:236"><nobr>"type": "Invocation",</nobr></div>
<div style="position:absolute;top:19946;left:236"><nobr>"arguments": {</nobr></div>
<div style="position:absolute;top:19964;left:258"><nobr>"collection": {</nobr></div>
<div style="position:absolute;top:19982;left:280"><nobr>"type": "Invocation",</nobr></div>
<div style="position:absolute;top:20000;left:280"><nobr>"arguments": {</nobr></div>
<div style="position:absolute;top:20018;left:301"><nobr>"id": "ASTER/AST_L1T_003"</nobr></div>
<div style="position:absolute;top:20036;left:280"><nobr>},</nobr></div>
<div style="position:absolute;top:20054;left:280"><nobr>"functionName": "ImageCollection.load"</nobr></div>
<div style="position:absolute;top:20072;left:258"><nobr>},</nobr></div>
<div style="position:absolute;top:20090;left:258"><nobr>"filter": {</nobr></div>
<div style="position:absolute;top:20108;left:280"><nobr>"type": "Invocation",</nobr></div>
<div style="position:absolute;top:20126;left:280"><nobr>"arguments": {</nobr></div>
<div style="position:absolute;top:20144;left:301"><nobr>"leftField": ".all",</nobr></div>
<div style="position:absolute;top:20162;left:301"><nobr>"rightValue": {</nobr></div>
<div style="position:absolute;top:20180;left:323"><nobr>"type": "Invocation",</nobr></div>
<div style="position:absolute;top:20198;left:323"><nobr>"arguments": {</nobr></div>
<div style="position:absolute;top:20216;left:344"><nobr>"geometry": {</nobr></div>
<div style="position:absolute;top:20234;left:366"><nobr>"type": "Point",</nobr></div>
<div style="position:absolute;top:20252;left:366"><nobr>"coordinates": [</nobr></div>
</span></font>

<div style="position:absolute;top:20367;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="18"><b>Page 18</b></a></font></td></tr></tbody></table></div><font size="3" color="#2a6099" face="Times"><span style="font-size:16px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:20452;left:388"><nobr>-44.21722,</nobr></div>
<div style="position:absolute;top:20470;left:388"><nobr>-18.31933</nobr></div>
<div style="position:absolute;top:20488;left:366"><nobr>]</nobr></div>
<div style="position:absolute;top:20506;left:344"><nobr>}</nobr></div>
<div style="position:absolute;top:20524;left:323"><nobr>},</nobr></div>
<div style="position:absolute;top:20542;left:323"><nobr>"functionName": "Feature"</nobr></div>
<div style="position:absolute;top:20560;left:301"><nobr>}</nobr></div>
<div style="position:absolute;top:20578;left:280"><nobr>},</nobr></div>
<div style="position:absolute;top:20596;left:280"><nobr>"functionName": "Filter.intersects"</nobr></div>
<div style="position:absolute;top:20614;left:258"><nobr>}</nobr></div>
<div style="position:absolute;top:20632;left:236"><nobr>},</nobr></div>
<div style="position:absolute;top:20650;left:236"><nobr>"functionName": "Collection.filter"</nobr></div>
<div style="position:absolute;top:20668;left:215"><nobr>},</nobr></div>
<div style="position:absolute;top:20686;left:215"><nobr>"filter": {</nobr></div>
<div style="position:absolute;top:20704;left:236"><nobr>"type": "Invocation",</nobr></div>
<div style="position:absolute;top:20722;left:236"><nobr>"arguments": {</nobr></div>
<div style="position:absolute;top:20740;left:258"><nobr>"rightField": "system:time_start",</nobr></div>
<div style="position:absolute;top:20758;left:258"><nobr>"leftValue": {</nobr></div>
<div style="position:absolute;top:20776;left:280"><nobr>"type": "Invocation",</nobr></div>
<div style="position:absolute;top:20794;left:280"><nobr>"arguments": {</nobr></div>
<div style="position:absolute;top:20812;left:301"><nobr>"start": "2013-06-15",</nobr></div>
<div style="position:absolute;top:20830;left:301"><nobr>"end": "2013-09-15"</nobr></div>
<div style="position:absolute;top:20848;left:280"><nobr>},</nobr></div>
<div style="position:absolute;top:20866;left:280"><nobr>"functionName": "DateRange"</nobr></div>
<div style="position:absolute;top:20884;left:258"><nobr>}</nobr></div>
<div style="position:absolute;top:20902;left:236"><nobr>},</nobr></div>
<div style="position:absolute;top:20920;left:236"><nobr>"functionName": "Filter.dateRangeContains"</nobr></div>
<div style="position:absolute;top:20938;left:215"><nobr>}</nobr></div>
<div style="position:absolute;top:20956;left:193"><nobr>},</nobr></div>
<div style="position:absolute;top:20974;left:193"><nobr>"functionName": "Collection.filter"</nobr></div>
<div style="position:absolute;top:20992;left:172"><nobr>},</nobr></div>
<div style="position:absolute;top:21010;left:172"><nobr>"baseAlgorithm": {</nobr></div>
<div style="position:absolute;top:21028;left:193"><nobr>"type": "Function",</nobr></div>
<div style="position:absolute;top:21046;left:193"><nobr>"argumentNames": [</nobr></div>
<div style="position:absolute;top:21064;left:215"><nobr>"_MAPPING_VAR_0_0"</nobr></div>
<div style="position:absolute;top:21082;left:193"><nobr>],</nobr></div>
<div style="position:absolute;top:21100;left:193"><nobr>"body": {</nobr></div>
<div style="position:absolute;top:21118;left:215"><nobr>"type": "Invocation",</nobr></div>
<div style="position:absolute;top:21136;left:215"><nobr>"arguments": {</nobr></div>
<div style="position:absolute;top:21154;left:236"><nobr>"input": {</nobr></div>
<div style="position:absolute;top:21172;left:258"><nobr>"type": "ArgumentRef",</nobr></div>
<div style="position:absolute;top:21190;left:258"><nobr>"value": "_MAPPING_VAR_0_0"</nobr></div>
<div style="position:absolute;top:21208;left:236"><nobr>},</nobr></div>
<div style="position:absolute;top:21226;left:236"><nobr>"bandSelectors": [</nobr></div>
<div style="position:absolute;top:21244;left:258"><nobr>"B3N",</nobr></div>
<div style="position:absolute;top:21262;left:258"><nobr>"B02",</nobr></div>
<div style="position:absolute;top:21280;left:258"><nobr>"B01"</nobr></div>
<div style="position:absolute;top:21298;left:236"><nobr>]</nobr></div>
<div style="position:absolute;top:21316;left:215"><nobr>},</nobr></div>
<div style="position:absolute;top:21334;left:215"><nobr>"functionName": "Image.select"</nobr></div>
<div style="position:absolute;top:21352;left:193"><nobr>}</nobr></div>
<div style="position:absolute;top:21370;left:172"><nobr>}</nobr></div>
<div style="position:absolute;top:21388;left:150"><nobr>},</nobr></div>
<div style="position:absolute;top:21406;left:150"><nobr>"functionName": "Collection.map"</nobr></div>
<div style="position:absolute;top:21424;left:128"><nobr>}</nobr></div>
<div style="position:absolute;top:21442;left:107"><nobr>},</nobr></div>
<div style="position:absolute;top:21460;left:107"><nobr>"functionName": "reduce.median"</nobr></div>
<div style="position:absolute;top:21478;left:85"><nobr>})</nobr></div>
</span></font>

<div style="position:absolute;top:21629;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="19"><b>Page 19</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:21716;left:85"><nobr>Now we center the map and plot it.</nobr></div>
<div style="position:absolute;top:21776;left:85"><nobr>Map$setCenter(-44.21722,-18.31933, zoom = 12)</nobr></div>
<div style="position:absolute;top:21794;left:85"><nobr>Map$addLayer(img, visParams=list(min=0,max=255),"Aster Image")</nobr></div>
<div style="position:absolute;top:21845;left:85"><nobr>The resulting map is:</nobr></div>
<div style="position:absolute;top:22288;left:85"><nobr>The HTML source code of this map is (Note where the map image is</nobr></div>
<div style="position:absolute;top:22319;left:85"><nobr>called in bold):</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:22379;left:85"><nobr>&lt;!DOCTYPE html&gt;</nobr></div>
<div style="position:absolute;top:22394;left:85"><nobr>&lt;html&gt;</nobr></div>
<div style="position:absolute;top:22409;left:85"><nobr>&lt;head&gt;</nobr></div>
<div style="position:absolute;top:22424;left:85"><nobr>&lt;meta charset="utf-8"/&gt;</nobr></div>
<div style="position:absolute;top:22439;left:85"><nobr>&lt;style&gt;body{background-color:white;}&lt;/style&gt;</nobr></div>
<div style="position:absolute;top:22454;left:85"><nobr>...</nobr></div>
<div style="position:absolute;top:22469;left:85"><nobr>script&gt;</nobr></div>
<div style="position:absolute;top:22484;left:85"><nobr>&lt;script src="lib/clipboard-0.0.1/setClipboardText.js"&gt;&lt;/script&gt;</nobr></div>
<div style="position:absolute;top:22514;left:85"><nobr>&lt;/head&gt;</nobr></div>
<div style="position:absolute;top:22529;left:85"><nobr>&lt;body&gt;</nobr></div>
<div style="position:absolute;top:22544;left:85"><nobr>&lt;div id="htmlwidget_container"&gt;</nobr></div>
<div style="position:absolute;top:22559;left:103"><nobr>&lt;div id="htmlwidget-56d53ad4c5aa44506bdd" style="width:100%;height:400px;"</nobr></div>
<div style="position:absolute;top:22574;left:85"><nobr>class="leaflet html-widget"&gt;&lt;/div&gt;</nobr></div>
<div style="position:absolute;top:22589;left:85"><nobr>&lt;/div&gt;</nobr></div>
<div style="position:absolute;top:22604;left:85"><nobr>&lt;script type="application/json" data-for="htmlwidget-56d53ad4c5aa44506bdd"&gt;{"x":</nobr></div>
<div style="position:absolute;top:22619;left:85"><nobr>{"options":{"minZoom":1,"maxZoom":52,"crs":</nobr></div>
<div style="position:absolute;top:22634;left:85"><nobr>{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,</nobr></div>
<div style="position:absolute;top:22649;left:85"><nobr>"options":{}},"preferCanvas":false,"bounceAtZoomLimits":false,"maxBounds":[[[-</nobr></div>
<div style="position:absolute;top:22664;left:85"><nobr>90,-370]],[[90,370]]]},"calls":[{"method":"addProviderTiles","args":</nobr></div>
<div style="position:absolute;top:22679;left:85"><nobr>["CartoDB.Positron",1,"CartoDB.Positron",</nobr></div>
<div style="position:absolute;top:22694;left:85"><nobr>{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},</nobr></div>
<div style="position:absolute;top:22709;left:85"><nobr>{"method":"addProviderTiles","args":</nobr></div>
<div style="position:absolute;top:22724;left:85"><nobr>["CartoDB.DarkMatter",2,"CartoDB.DarkMatter",</nobr></div>
<div style="position:absolute;top:22739;left:85"><nobr>{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},</nobr></div>
<div style="position:absolute;top:22754;left:85"><nobr>{"method":"addProviderTiles","args":["OpenStreetMap",3,"OpenStreetMap",</nobr></div>
<div style="position:absolute;top:22769;left:85"><nobr>{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},</nobr></div>
<div style="position:absolute;top:22784;left:85"><nobr>{"method":"addProviderTiles","args":["Esri.WorldImagery",4,"Esri.WorldImagery",</nobr></div>
</span></font>

<div style="position:absolute;top:22891;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="20"><b>Page 20</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:22976;left:85"><nobr>{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},</nobr></div>
<div style="position:absolute;top:22991;left:85"><nobr>{"method":"addProviderTiles","args":["OpenTopoMap",5,"OpenTopoMap",</nobr></div>
<div style="position:absolute;top:23006;left:85"><nobr>{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},</nobr></div>
<div style="position:absolute;top:23021;left:85"><nobr>{"method":"addLayersControl","args":</nobr></div>
<div style="position:absolute;top:23036;left:85"><nobr>[["CartoDB.Positron","CartoDB.DarkMatter","OpenStreetMap","Esri.WorldImagery","O</nobr></div>
<div style="position:absolute;top:23051;left:85"><nobr>penTopoMap"],[],{"collapsed":true,"autoZIndex":true,"position":"topleft"}]},</nobr></div>
<div style="position:absolute;top:23066;left:85"><nobr>{"method":"addScaleBar","args":</nobr></div>
<div style="position:absolute;top:23081;left:85"><nobr>[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":</nobr></div>
<div style="position:absolute;top:23096;left:85"><nobr>"bottomleft"}]},<b>{"method":"addTiles","args":["https://</b></nobr></div>
<div style="position:absolute;top:23111;left:85"><nobr><b>earthengine.googleapis.com/v1alpha/projects/earthengine-legacy/maps/</b></nobr></div>
<div style="position:absolute;top:23126;left:85"><nobr><b>bf13ded46a01aef419158c6a870b572c-be9082f1e8f40fb31898a4fd75c18ad2/tiles/{z}/{x}/</b></nobr></div>
<div style="position:absolute;top:23141;left:85"><nobr><b>{y}",null,"Imagem Aster",</b></nobr></div>
<div style="position:absolute;top:23156;left:85"><nobr><b>{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","t</b></nobr></div>
<div style="position:absolute;top:23171;left:85"><nobr><b>ms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex"</b></nobr></div>
<div style="position:absolute;top:23186;left:85"><nobr><b>:1,"detectRetina":false}]}</b>,{"method":"addLayersControl","args":</nobr></div>
<div style="position:absolute;top:23201;left:85"><nobr>[["CartoDB.Positron","CartoDB.DarkMatter","OpenStreetMap","Esri.WorldImagery","O</nobr></div>
<div style="position:absolute;top:23216;left:85"><nobr>penTopoMap"],"Imagem Aster",</nobr></div>
<div style="position:absolute;top:23231;left:85"><nobr>{"collapsed":true,"autoZIndex":true,"position":"topleft"}]},</nobr></div>
<div style="position:absolute;top:23246;left:85"><nobr>{"method":"hideGroup","args":[null]}],"setView":[[-18.31933,-44.21722],11,</nobr></div>
<div style="position:absolute;top:23261;left:85"><nobr>[]]},"evals":[],"jsHooks":{"render":[{"code":"function(el, x, data) {\n  return</nobr></div>
<div style="position:absolute;top:23276;left:85"><nobr>(\n     function(el, x, data) {\n     // get the leaflet map\n     var map =</nobr></div>
<div style="position:absolute;top:23291;left:85"><nobr>this; //HTMLWidgets.find('#' + el.id);\n     // we need a new div element</nobr></div>
<div style="position:absolute;top:23306;left:85"><nobr>because we have to handle\n     // the mouseover output separately\n     //</nobr></div>
<div style="position:absolute;top:23321;left:85"><nobr>debugger;\n     function addElement () {\n     // generate new div Element\n </nobr></div>
<div style="position:absolute;top:23336;left:85"><nobr>var newDiv = $(document.createElement('div'));\n     // append at end of</nobr></div>
<div style="position:absolute;top:23351;left:85"><nobr>leaflet htmlwidget container\n     $(el).append(newDiv);\n     //provide ID</nobr></div>
<div style="position:absolute;top:23366;left:85"><nobr>and style\n     newDiv.addClass('lnlt');\n     newDiv.css({\n     'position':</nobr></div>
<div style="position:absolute;top:23381;left:85"><nobr>'relative',\n     'bottomleft':  '0px',\n     'background-color': 'rgba(255,</nobr></div>
<div style="position:absolute;top:23396;left:85"><nobr>255, 255, 0.7)',\n     'box-shadow': '0 0 2px #bbb',\n     'background-clip':</nobr></div>
<div style="position:absolute;top:23411;left:85"><nobr>'padding-box',\n     'margin': '0',\n     'padding-left': '5px',\n    </nobr></div>
<div style="position:absolute;top:23426;left:85"><nobr>'color': '#333',\n     'font': '9px/1.5 \"Helvetica Neue\", Arial, Helvetica,</nobr></div>
<div style="position:absolute;top:23441;left:85"><nobr>sans-serif',\n     'z-index': '700',\n     });\n     return newDiv;\n     }\</nobr></div>
<div style="position:absolute;top:23456;left:85"><nobr>n\n\n     // check for already existing lnlt class to not duplicate\n     var</nobr></div>
<div style="position:absolute;top:23471;left:85"><nobr>lnlt = $(el).find('.lnlt');\n\n     if(!lnlt.length) {\n     lnlt =</nobr></div>
<div style="position:absolute;top:23486;left:85"><nobr>addElement();\n\n     // grab the special div we generated in the beginning\n </nobr></div>
<div style="position:absolute;top:23501;left:85"><nobr>// and put the mousmove output there\n\n     map.on('mousemove', function (e)</nobr></div>
<div style="position:absolute;top:23516;left:85"><nobr>{\n     if (e.originalEvent.ctrlKey) {\n     if</nobr></div>
<div style="position:absolute;top:23531;left:85"><nobr>(document.querySelector('.lnlt') === null) lnlt = addElement();\n    </nobr></div>
<div style="position:absolute;top:23546;left:85"><nobr>lnlt.text(\n    </nobr></div>
<div style="position:absolute;top:23546;left:436"><nobr>' lon: ' + (e.latlng.lng).toFixed(5) +\n</nobr></div>
<div style="position:absolute;top:23561;left:85"><nobr>' | lat: ' + (e.latlng.lat).toFixed(5) +\n    </nobr></div>
<div style="position:absolute;top:23561;left:706"><nobr>' | zoom: '</nobr></div>
<div style="position:absolute;top:23576;left:85"><nobr>+ map.getZoom() +\n    </nobr></div>
<div style="position:absolute;top:23576;left:499"><nobr>' | x: ' +</nobr></div>
<div style="position:absolute;top:23591;left:85"><nobr>L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\n    </nobr></div>
<div style="position:absolute;top:23591;left:769"><nobr>' |</nobr></div>
<div style="position:absolute;top:23606;left:85"><nobr>y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\n    </nobr></div>
<div style="position:absolute;top:23621;left:85"><nobr>' | epsg: 3857 ' +\n    </nobr></div>
<div style="position:absolute;top:23621;left:508"><nobr>' | proj4: +proj=merc +a=6378137</nobr></div>
<div style="position:absolute;top:23636;left:85"><nobr>+b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m</nobr></div>
<div style="position:absolute;top:23651;left:85"><nobr>+nadgrids=@null +no_defs ');\n     } else {\n     if</nobr></div>
<div style="position:absolute;top:23666;left:85"><nobr>(document.querySelector('.lnlt') === null) lnlt = addElement();\n    </nobr></div>
<div style="position:absolute;top:23681;left:85"><nobr>lnlt.text(\n    </nobr></div>
<div style="position:absolute;top:23681;left:391"><nobr>' lon: ' + (e.latlng.lng).toFixed(5) +\n    </nobr></div>
<div style="position:absolute;top:23696;left:85"><nobr>' | lat: ' + (e.latlng.lat).toFixed(5) +\n    </nobr></div>
<div style="position:absolute;top:23696;left:661"><nobr>' | zoom: ' +</nobr></div>
<div style="position:absolute;top:23711;left:85"><nobr>map.getZoom() + ' ');\n     }\n     });\n\n     // remove the lnlt div when</nobr></div>
<div style="position:absolute;top:23726;left:85"><nobr>mouse leaves map\n     map.on('mouseout', function (e) {\n     var strip =</nobr></div>
<div style="position:absolute;top:23741;left:85"><nobr>document.querySelector('.lnlt');\n     strip.remove();\n     });\n\n     };\</nobr></div>
<div style="position:absolute;top:23756;left:85"><nobr>n\n     //$(el).keypress(67, function(e) {\n     map.on('preclick',</nobr></div>
<div style="position:absolute;top:23771;left:85"><nobr>function(e) {\n     if (e.originalEvent.ctrlKey) {\n     if</nobr></div>
<div style="position:absolute;top:23786;left:85"><nobr>(document.querySelector('.lnlt') === null) lnlt = addElement();\n    </nobr></div>
<div style="position:absolute;top:23801;left:85"><nobr>lnlt.text(\n    </nobr></div>
<div style="position:absolute;top:23801;left:391"><nobr>' lon: ' + (e.latlng.lng).toFixed(5) +\n    </nobr></div>
<div style="position:absolute;top:23816;left:85"><nobr>' | lat: ' + (e.latlng.lat).toFixed(5) +\n    </nobr></div>
<div style="position:absolute;top:23816;left:661"><nobr>' | zoom: ' +</nobr></div>
<div style="position:absolute;top:23831;left:85"><nobr>map.getZoom() + ' ');\n     var txt =</nobr></div>
<div style="position:absolute;top:23846;left:85"><nobr>document.querySelector('.lnlt').textContent;\n     console.log(txt);\n    </nobr></div>
<div style="position:absolute;top:23861;left:85"><nobr>//txt.innerText.focus();\n     //txt.select();\n     setClipboardText('\"' +</nobr></div>
<div style="position:absolute;top:23876;left:85"><nobr>txt + '\"');\n     }\n     });\n\n     }\n     ).call(this.getMap(), el, x,</nobr></div>
<div style="position:absolute;top:23891;left:85"><nobr>data);\n}","data":null}]}}&lt;/script&gt;</nobr></div>
<div style="position:absolute;top:23906;left:85"><nobr>&lt;script type="application/htmlwidget-sizing" data-for="htmlwidget-</nobr></div>
<div style="position:absolute;top:23921;left:85"><nobr>56d53ad4c5aa44506bdd"&gt;{"viewer":</nobr></div>
<div style="position:absolute;top:23936;left:85"><nobr>{"width":"100%","height":400,"padding":0,"fill":true},"browser":</nobr></div>
<div style="position:absolute;top:23951;left:85"><nobr>{"width":"100%","height":400,"padding":0,"fill":true}}&lt;/script&gt;</nobr></div>
<div style="position:absolute;top:23966;left:85"><nobr>&lt;/body&gt;</nobr></div>
<div style="position:absolute;top:23981;left:85"><nobr>&lt;/html&gt;</nobr></div>
</span></font>

<div style="position:absolute;top:24153;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="21"><b>Page 21</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:24240;left:85"><nobr>On a very simplistic way, all the code we wrote was to prepare a</nobr></div>
<div style="position:absolute;top:24271;left:85"><nobr>JSON text with the specifications of the map we wanted. This JSON is</nobr></div>
<div style="position:absolute;top:24302;left:85"><nobr>sent to the guts of Google Earth Engine that follow the JSON</nobr></div>
<div style="position:absolute;top:24333;left:85"><nobr>instructions to prepare a map and send you back a temporary URL</nobr></div>
<div style="position:absolute;top:24364;left:85"><nobr>of {z}{x}{y} tiles of your requested map to its server.</nobr></div>
</span></font>
<font size="3" color="#000080" face="Times"><span style="font-size:16px;font-family:Times;color:#000080">
<div style="position:absolute;top:24395;left:140"><nobr><a href="https://earthengine.googleapis.com/v1alpha/projects/earthengine-legacy/maps/bf13ded46a01aef419158c6a870b572c-be9082f1e8f40fb31898a4fd75c18ad2/tiles/">https://earthengine.googleapis.com/v1alpha/projects/earthengine-</a></nobr></div>
<div style="position:absolute;top:24426;left:85"><nobr><a href="https://earthengine.googleapis.com/v1alpha/projects/earthengine-legacy/maps/bf13ded46a01aef419158c6a870b572c-be9082f1e8f40fb31898a4fd75c18ad2/tiles/">legacy/maps/bf13ded46a01aef419158c6a870b572c-</a></nobr></div>
<div style="position:absolute;top:24457;left:85"><nobr><a href="https://earthengine.googleapis.com/v1alpha/projects/earthengine-legacy/maps/bf13ded46a01aef419158c6a870b572c-be9082f1e8f40fb31898a4fd75c18ad2/tiles/">be9082f1e8f40fb31898a4fd75c18ad2/tiles/</a><font color="#2a6099">{z}/{x}/{y}</font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:24520;left:85"><nobr>This url is used to dynamically load the tiles into your map (a leaflet</nobr></div>
<div style="position:absolute;top:24551;left:85"><nobr>map in our case).</nobr></div>
<div style="position:absolute;top:24613;left:85"><nobr>We don’t have to worry about the “JSONish” side, the rgee will take</nobr></div>
<div style="position:absolute;top:24644;left:85"><nobr>care of it in the same way that python and JS do. They create the</nobr></div>
<div style="position:absolute;top:24675;left:85"><nobr>JSON dialect that is sent to Google Earth Engine and receive the</nobr></div>
<div style="position:absolute;top:24706;left:85"><nobr>corresponding url or data.</nobr></div>
<div style="position:absolute;top:24768;left:85"><nobr>We will cover now the main objects used by Google Earth Engine, what</nobr></div>
<div style="position:absolute;top:24799;left:85"><nobr>they are and what can we do with them. We will start with ee$Image.</nobr></div>
</span></font>
<font size="4" face="Times"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:24878;left:85"><nobr><b>ee$Image</b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:24951;left:85"><nobr>An image (ee$Image object) is a raster data that it represented  as</nobr></div>
<div style="position:absolute;top:24982;left:85"><nobr>an object in Earth Engine. Images are composed by one or more</nobr></div>
<div style="position:absolute;top:25013;left:85"><nobr>bands and each band has its own name, data type, scale (resolution),</nobr></div>
<div style="position:absolute;top:25044;left:85"><nobr>mask and projection. Each image also has a metadata with a set of</nobr></div>
<div style="position:absolute;top:25075;left:85"><nobr>image properties.</nobr></div>
<div style="position:absolute;top:25137;left:85"><nobr>The image object (and the feature object as well) is the final goal in</nobr></div>
<div style="position:absolute;top:25168;left:85"><nobr>using Earth Engine and we are going to start by checking its</nobr></div>
<div style="position:absolute;top:25199;left:85"><nobr>characteristics and properties.</nobr></div>
</span></font>

<div style="position:absolute;top:25415;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="22"><b>Page 22</b></a></font></td></tr></tbody></table></div><font size="4" face="Times"><span style="font-size:22px;font-family:Times">
<div style="position:absolute;top:25516;left:85"><nobr><b>ee$Image Constructor</b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:25585;left:85"><nobr>Images can be retrieved by using the data ID that it is present in</nobr></div>
<div style="position:absolute;top:25616;left:85"><nobr>Google Earth Engine as the ee$Image constructor parameter. A list of</nobr></div>
<div style="position:absolute;top:25647;left:85"><nobr>image dataset IDs can be found using the link</nobr></div>
</span></font>
<font size="3" color="#000080" face="Times"><span style="font-size:16px;font-family:Times;color:#000080">
<div style="position:absolute;top:25678;left:85"><nobr><a href="https://developers.google.com/earth-engine/datasets">https://developers.google.com/earth-engine/datasets</a><font color="#000000"><a href="https://developers.google.com/earth-engine/datasets"></a>.</font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:25740;left:85"><nobr>Some datasets already generate a ee$Image object and others a</nobr></div>
<div style="position:absolute;top:25771;left:85"><nobr>ee$ImageCollection.</nobr></div>
<div style="position:absolute;top:25833;left:85"><nobr>For example, to load a JAXA ALOS DEM of ee$Image we use:</nobr></div>
<div style="position:absolute;top:25862;left:85"><nobr>library(rgee)</nobr></div>
<div style="position:absolute;top:25880;left:85"><nobr>ee_Initialize()</nobr></div>
<div style="position:absolute;top:25898;left:85"><nobr>#loading a global dem  </nobr></div>
<div style="position:absolute;top:25916;left:85"><nobr>dem&lt;-ee$Image("JAXA/ALOS/AW3D30_V1_1")</nobr></div>
<div style="position:absolute;top:25954;left:85"><nobr>Use ee_print() to retrieve the main information of this image object.</nobr></div>
<div style="position:absolute;top:25984;left:85"><nobr>ee_print(dem,clean=TRUE)</nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:13px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:26002;left:85"><nobr>─────────────────────────────────────────────────── Earth Engine Image ──</nobr></div>
<div style="position:absolute;top:26017;left:85"><nobr><b>Image Metadata:</b></nobr></div>
<div style="position:absolute;top:26032;left:94"><nobr>- Class    </nobr></div>
<div style="position:absolute;top:26032;left:355"><nobr>: ee$Image</nobr></div>
<div style="position:absolute;top:26047;left:94"><nobr>- ID    </nobr></div>
<div style="position:absolute;top:26047;left:355"><nobr>: JAXA/ALOS/AW3D30_V1_1</nobr></div>
<div style="position:absolute;top:26062;left:94"><nobr>- Number of Bands    </nobr></div>
<div style="position:absolute;top:26062;left:355"><nobr>: 6</nobr></div>
<div style="position:absolute;top:26077;left:94"><nobr>- Bands names    </nobr></div>
<div style="position:absolute;top:26077;left:355"><nobr>: AVE MED AVE_STK MED_STK AVE_MSK MED_MSK</nobr></div>
<div style="position:absolute;top:26092;left:94"><nobr>- Number of Properties     : 25</nobr></div>
<div style="position:absolute;top:26107;left:94"><nobr>- Number of Pixels*    </nobr></div>
<div style="position:absolute;top:26107;left:355"><nobr>: 5.038848e+12</nobr></div>
<div style="position:absolute;top:26122;left:94"><nobr>- Approximate size*    </nobr></div>
<div style="position:absolute;top:26122;left:355"><nobr>: 2.20 TB</nobr></div>
<div style="position:absolute;top:26137;left:85"><nobr><b>Band Metadata (img_band = AVE)</b>:</nobr></div>
<div style="position:absolute;top:26152;left:94"><nobr>- EPSG (SRID)    </nobr></div>
<div style="position:absolute;top:26152;left:355"><nobr>: 4326</nobr></div>
<div style="position:absolute;top:26167;left:94"><nobr>- proj4string    </nobr></div>
<div style="position:absolute;top:26167;left:355"><nobr>: +proj=longlat +datum=WGS84 +no_defs</nobr></div>
<div style="position:absolute;top:26182;left:94"><nobr>- Geotransform    </nobr></div>
<div style="position:absolute;top:26182;left:355"><nobr>: 0.0002777777778 0 -180 0 -0.0002777777778 83</nobr></div>
<div style="position:absolute;top:26197;left:94"><nobr>- Nominal scale (meters)     : 30.92208</nobr></div>
<div style="position:absolute;top:26212;left:94"><nobr>- Dimensions    </nobr></div>
<div style="position:absolute;top:26212;left:355"><nobr>: 1296000 648000</nobr></div>
<div style="position:absolute;top:26227;left:94"><nobr>- Number of Pixels    </nobr></div>
<div style="position:absolute;top:26227;left:355"><nobr>: 8.39808e+11</nobr></div>
<div style="position:absolute;top:26242;left:94"><nobr>- Data type    </nobr></div>
<div style="position:absolute;top:26242;left:355"><nobr>: INT</nobr></div>
<div style="position:absolute;top:26257;left:94"><nobr>- Approximate size    </nobr></div>
<div style="position:absolute;top:26257;left:355"><nobr>: 374.86 GB</nobr></div>
<div style="position:absolute;top:26272;left:94"><nobr>────────────────────────────────────────────────────────────────────────</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:26319;left:85"><nobr>In plotting this image we will see that it is composed by several pixels</nobr></div>
<div style="position:absolute;top:26351;left:85"><nobr>and by plotting the band AVE or MED, elevation values are associated</nobr></div>
<div style="position:absolute;top:26382;left:85"><nobr>with each one of the image pixels.</nobr></div>
<div style="position:absolute;top:26442;left:85"><nobr>Map$addLayer(dem, visParams=list(),"DEM")</nobr></div>
<div style="position:absolute;top:26460;left:85"><nobr>Map$addLayer(dem$select("AVE"),visParams=list(min=0,max=3000),</nobr></div>
<div style="position:absolute;top:26478;left:85"><nobr>"DEM AVE BAND")</nobr></div>
</span></font>

<div style="position:absolute;top:26677;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="23"><b>Page 23</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:26764;left:85"><nobr>dem</nobr></div>
<div style="position:absolute;top:27259;left:85"><nobr>dem$select("AVE")</nobr></div>
</span></font>

<div style="position:absolute;top:27939;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="24"><b>Page 24</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:28026;left:85"><nobr>Now creating an image from an  ImageCollection of Sentinel2 type.</nobr></div>
<div style="position:absolute;top:28086;left:85"><nobr>library(rgee)</nobr></div>
<div style="position:absolute;top:28104;left:85"><nobr>ee_Initialize()</nobr></div>
<div style="position:absolute;top:28122;left:85"><nobr># Selecting a ee$ImageCollectionn</nobr></div>
<div style="position:absolute;top:28140;left:85"><nobr>col&lt;-ee$ImageCollection('COPERNICUS/S2_SR')</nobr></div>
<div style="position:absolute;top:28158;left:85"><nobr>point &lt;- ee$Geometry$Point(-44.366,-18.145)</nobr></div>
<div style="position:absolute;top:28176;left:85"><nobr>start &lt;- ee$Date("2019-07-11")</nobr></div>
<div style="position:absolute;top:28194;left:85"><nobr>end &lt;- ee$Date("2019-07-20")</nobr></div>
<div style="position:absolute;top:28212;left:85"><nobr>filter&lt;-col$filterBounds(point)$filterDate(start,end)</nobr></div>
<div style="position:absolute;top:28230;left:85"><nobr>#Getting the first filtered image</nobr></div>
<div style="position:absolute;top:28248;left:85"><nobr>#  ee$ImageCollection to ee$Image</nobr></div>
<div style="position:absolute;top:28266;left:85"><nobr>img &lt;- filter$first()</nobr></div>
<div style="position:absolute;top:28317;left:85"><nobr>Inspecting the Image object values with ee_print().</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:28361;left:85"><nobr>ee_print(img,clear=TRUE)</nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:13px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:28376;left:85"><nobr>──────────────────────────────────────────────────── Earth Engine Image ──</nobr></div>
<div style="position:absolute;top:28391;left:85"><nobr><b>Image Metadata:</b></nobr></div>
<div style="position:absolute;top:28406;left:94"><nobr>- Class    </nobr></div>
<div style="position:absolute;top:28406;left:292"><nobr>: ee$Image</nobr></div>
<div style="position:absolute;top:28421;left:94"><nobr>- ID    </nobr></div>
<div style="position:absolute;top:28421;left:292"><nobr>: COPERNICUS/S2_SR/20190711T131251_20190711T131248_T23KNA</nobr></div>
<div style="position:absolute;top:28436;left:94"><nobr>- Time start    </nobr></div>
<div style="position:absolute;top:28436;left:292"><nobr>: 2019-07-11 13:17:13</nobr></div>
<div style="position:absolute;top:28451;left:94"><nobr>- Number of Bands     : 23</nobr></div>
<div style="position:absolute;top:28466;left:94"><nobr>- Bands names    </nobr></div>
<div style="position:absolute;top:28466;left:292"><nobr>: B1 B2 B3 B4 B5 B6 B7 B8 B8A B9 B11 B12 AOT WVP SCL</nobr></div>
<div style="position:absolute;top:28481;left:85"><nobr>TCI_R TCI_G TCI_B MSK_CLDPRB MSK_SNWPRB QA10 QA20 QA60</nobr></div>
<div style="position:absolute;top:28496;left:94"><nobr>- Number of Properties: 81</nobr></div>
<div style="position:absolute;top:28511;left:94"><nobr>- Number of Pixels*   : 77066790</nobr></div>
<div style="position:absolute;top:28526;left:94"><nobr>- Approximate size*   : 38.39 GB</nobr></div>
<div style="position:absolute;top:28541;left:85"><nobr><b>Band Metadata (img_band = B1):</b></nobr></div>
<div style="position:absolute;top:28556;left:94"><nobr>- EPSG (SRID)    </nobr></div>
<div style="position:absolute;top:28556;left:292"><nobr>: 32723</nobr></div>
<div style="position:absolute;top:28571;left:94"><nobr>- proj4string    </nobr></div>
<div style="position:absolute;top:28571;left:292"><nobr>: +proj=utm +zone=23 +south +datum=WGS84 +units=m</nobr></div>
<div style="position:absolute;top:28586;left:85"><nobr>+no_defs</nobr></div>
<div style="position:absolute;top:28601;left:94"><nobr>- Geotransform    </nobr></div>
<div style="position:absolute;top:28601;left:292"><nobr>: 60 0 499980 0 -60 8100040</nobr></div>
<div style="position:absolute;top:28616;left:94"><nobr>- Nominal scale(m)    : 60</nobr></div>
<div style="position:absolute;top:28631;left:94"><nobr>- Dimensions    </nobr></div>
<div style="position:absolute;top:28631;left:292"><nobr>: 1831 1830</nobr></div>
<div style="position:absolute;top:28646;left:94"><nobr>- Number of Pixels    : 3350730</nobr></div>
<div style="position:absolute;top:28661;left:94"><nobr>- Data type    </nobr></div>
<div style="position:absolute;top:28661;left:292"><nobr>: INT</nobr></div>
<div style="position:absolute;top:28676;left:94"><nobr>- Approximate size    : 1.67 GB</nobr></div>
<div style="position:absolute;top:28691;left:94"><nobr>───────────────────────────────────────────────────────────────────────────────</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:28739;left:85"><nobr>Plotting a map with a RGB composed by bands 4 ,3 e 2.</nobr></div>
<div style="position:absolute;top:28799;left:85"><nobr>Map$setCenter(-44.366,-17.69, zoom = 10)</nobr></div>
<div style="position:absolute;top:28817;left:85"><nobr>Map$addLayer(img,visParams=list(bands = c("B4", "B3", "B2"),min =</nobr></div>
<div style="position:absolute;top:28835;left:85"><nobr>100,max = 8000,gamma = c(1.9,1.7,1.7)), "True Color Image")</nobr></div>
</span></font>

<div style="position:absolute;top:29201;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="25"><b>Page 25</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:29696;left:85"><nobr>We can create an Image object from a geotiff cloud using</nobr></div>
<div style="position:absolute;top:29727;left:85"><nobr>ee$Image$loadGeoTIFF() from images stored at the Gloogle Cloud</nobr></div>
<div style="position:absolute;top:29759;left:85"><nobr>Storage. For example, this Landsat data stored at google cloud</nobr></div>
<div style="position:absolute;top:29790;left:85"><nobr>composed by band 5 extracted from a landsat 8 dataset can be</nobr></div>
<div style="position:absolute;top:29821;left:85"><nobr>loaded using:</nobr></div>
<div style="position:absolute;top:29850;left:85"><nobr>library(rgee)</nobr></div>
<div style="position:absolute;top:29868;left:85"><nobr>ee_Initialize()</nobr></div>
<div style="position:absolute;top:29886;left:85"><nobr>uri&lt;-'gs://gcp-public-data-landsat/LC08/01/001/002/</nobr></div>
<div style="position:absolute;top:29904;left:85"><nobr>LC08_L1GT_001002_20160817_20170322_01_T2/</nobr></div>
<div style="position:absolute;top:29922;left:85"><nobr>LC08_L1GT_001002_20160817_20170322_01_T2_B5.TIF'</nobr></div>
<div style="position:absolute;top:29940;left:85"><nobr>cloudImage&lt;-ee$Image$loadGeoTIFF(uri)</nobr></div>
<div style="position:absolute;top:29978;left:85"><nobr>Visualizing the info with ee_print()</nobr></div>
<div style="position:absolute;top:30007;left:85"><nobr>ee_print(cloudImage, clean = TRUE)</nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:13px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:30025;left:85"><nobr>────────────────────────────────────────── Earth Engine Image ──</nobr></div>
<div style="position:absolute;top:30040;left:85"><nobr><b>Image Metadata:</b></nobr></div>
<div style="position:absolute;top:30055;left:94"><nobr>- Class    </nobr></div>
<div style="position:absolute;top:30055;left:355"><nobr>: ee$Image</nobr></div>
<div style="position:absolute;top:30070;left:94"><nobr>- ID    </nobr></div>
<div style="position:absolute;top:30070;left:355"><nobr>: no_id</nobr></div>
<div style="position:absolute;top:30085;left:94"><nobr>- Number of Bands    </nobr></div>
<div style="position:absolute;top:30085;left:355"><nobr>: 1</nobr></div>
<div style="position:absolute;top:30100;left:94"><nobr>- Bands names    </nobr></div>
<div style="position:absolute;top:30100;left:355"><nobr>: B0</nobr></div>
<div style="position:absolute;top:30115;left:94"><nobr>- Number of Properties     : 0</nobr></div>
<div style="position:absolute;top:30130;left:94"><nobr>- Number of Pixels*    </nobr></div>
<div style="position:absolute;top:30130;left:355"><nobr>: 80658261</nobr></div>
<div style="position:absolute;top:30145;left:94"><nobr>- Approximate size*    </nobr></div>
<div style="position:absolute;top:30145;left:355"><nobr>: 123.07 MB</nobr></div>
<div style="position:absolute;top:30160;left:85"><nobr><b>Band Metadata (img_band = B0):</b></nobr></div>
<div style="position:absolute;top:30175;left:94"><nobr>- EPSG (SRID)    </nobr></div>
<div style="position:absolute;top:30175;left:355"><nobr>: 32630</nobr></div>
<div style="position:absolute;top:30190;left:94"><nobr>- proj4string    </nobr></div>
<div style="position:absolute;top:30190;left:355"><nobr>: +proj=utm +zone=30 +datum=WGS84 +units=m</nobr></div>
<div style="position:absolute;top:30205;left:85"><nobr>+no_defs</nobr></div>
<div style="position:absolute;top:30220;left:94"><nobr>- Geotransform    </nobr></div>
<div style="position:absolute;top:30220;left:355"><nobr>: 30 0 342000 0 -30 9016200</nobr></div>
<div style="position:absolute;top:30235;left:94"><nobr>- Nominal scale (meters)     : 30</nobr></div>
<div style="position:absolute;top:30250;left:94"><nobr>- Dimensions    </nobr></div>
<div style="position:absolute;top:30250;left:355"><nobr>: 8991 8971</nobr></div>
<div style="position:absolute;top:30265;left:94"><nobr>- Number of Pixels    </nobr></div>
<div style="position:absolute;top:30265;left:355"><nobr>: 80658261</nobr></div>
<div style="position:absolute;top:30280;left:94"><nobr>- Data type    </nobr></div>
<div style="position:absolute;top:30280;left:355"><nobr>: INT</nobr></div>
<div style="position:absolute;top:30295;left:94"><nobr>- Approximate size    </nobr></div>
<div style="position:absolute;top:30295;left:355"><nobr>: 123.07 MB</nobr></div>
<div style="position:absolute;top:30310;left:94"><nobr>─────────────────────────────────────────────────────────────────</nobr></div>
</span></font>

<div style="position:absolute;top:30463;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="26"><b>Page 26</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:30550;left:85"><nobr>The next example shows how to create and manipulate a constant</nobr></div>
<div style="position:absolute;top:30581;left:85"><nobr>Image object:</nobr></div>
<div style="position:absolute;top:30628;left:85"><nobr>library(rgee)</nobr></div>
<div style="position:absolute;top:30646;left:85"><nobr>ee_Initialize()</nobr></div>
<div style="position:absolute;top:30664;left:85"><nobr>image&lt;-ee$Image(1)</nobr></div>
<div style="position:absolute;top:30682;left:85"><nobr>ee_print(image, clean = TRUE)</nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:13px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:30700;left:85"><nobr>─────────────────────────────────────────────────────── Earth Engine Image ──</nobr></div>
<div style="position:absolute;top:30715;left:85"><nobr><b>Image Metadata:</b></nobr></div>
<div style="position:absolute;top:30730;left:94"><nobr>- Class    </nobr></div>
<div style="position:absolute;top:30730;left:355"><nobr>: ee$Image</nobr></div>
<div style="position:absolute;top:30745;left:94"><nobr>- ID    </nobr></div>
<div style="position:absolute;top:30745;left:355"><nobr>: no_id</nobr></div>
<div style="position:absolute;top:30760;left:94"><nobr>- Number of Bands    </nobr></div>
<div style="position:absolute;top:30760;left:355"><nobr>: 1</nobr></div>
<div style="position:absolute;top:30775;left:94"><nobr>- Bands names    </nobr></div>
<div style="position:absolute;top:30775;left:355"><nobr>: constant</nobr></div>
<div style="position:absolute;top:30790;left:94"><nobr>- Number of Properties     : 0</nobr></div>
<div style="position:absolute;top:30805;left:94"><nobr>- Number of Pixels*    </nobr></div>
<div style="position:absolute;top:30805;left:355"><nobr>: 64800</nobr></div>
<div style="position:absolute;top:30820;left:94"><nobr>- Approximate size*    </nobr></div>
<div style="position:absolute;top:30820;left:355"><nobr>: 101.25 KB</nobr></div>
<div style="position:absolute;top:30835;left:85"><nobr><b>Band Metadata (img_band = constant):</b></nobr></div>
<div style="position:absolute;top:30850;left:94"><nobr>- EPSG (SRID)    </nobr></div>
<div style="position:absolute;top:30850;left:355"><nobr>: 4326</nobr></div>
<div style="position:absolute;top:30865;left:94"><nobr>- proj4string    </nobr></div>
<div style="position:absolute;top:30865;left:355"><nobr>: +proj=longlat +datum=WGS84 +no_defs</nobr></div>
<div style="position:absolute;top:30880;left:94"><nobr>- Geotransform    </nobr></div>
<div style="position:absolute;top:30880;left:355"><nobr>: 1 0 0 0 1 0</nobr></div>
<div style="position:absolute;top:30895;left:94"><nobr>- Nominal scale (meters)     : 111319.5</nobr></div>
<div style="position:absolute;top:30910;left:94"><nobr>- Dimensions    </nobr></div>
<div style="position:absolute;top:30910;left:355"><nobr>: 360 180</nobr></div>
<div style="position:absolute;top:30925;left:94"><nobr>- Number of Pixels    </nobr></div>
<div style="position:absolute;top:30925;left:355"><nobr>: 64800</nobr></div>
<div style="position:absolute;top:30940;left:94"><nobr>- Data type    </nobr></div>
<div style="position:absolute;top:30940;left:355"><nobr>: INT</nobr></div>
<div style="position:absolute;top:30955;left:94"><nobr>- Approximate size    </nobr></div>
<div style="position:absolute;top:30955;left:355"><nobr>: 101.25 KB</nobr></div>
<div style="position:absolute;top:30970;left:94"><nobr>─────────────────────────────────────────────────────────────────────────────</nobr></div>
<div style="position:absolute;top:30985;left:85"><nobr>NOTE:(*)Properties calculated considering a constant geotransform and data type.</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:31017;left:85"><nobr>Renaming the bands using</nobr></div>
<div style="position:absolute;top:31077;left:85"><nobr>threebands &lt;- ee$Image(c(1, 2, 3))</nobr></div>
<div style="position:absolute;top:31095;left:85"><nobr>imagem2 &lt;- threebands$select(</nobr></div>
<div style="position:absolute;top:31113;left:107"><nobr>opt_selectors = c("constant", "constant_1", "constant_2"),</nobr></div>
<div style="position:absolute;top:31131;left:107"><nobr>opt_names = c("band1", "band2", "band3")</nobr></div>
<div style="position:absolute;top:31149;left:85"><nobr>)</nobr></div>
<div style="position:absolute;top:31167;left:85"><nobr>ee_print(imagem2)</nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:13px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:31185;left:85"><nobr>────────────────────────────────────────────────────────── Earth Engine Image ──</nobr></div>
<div style="position:absolute;top:31200;left:85"><nobr><b>Image Metadata:</b></nobr></div>
<div style="position:absolute;top:31215;left:94"><nobr>- Class    </nobr></div>
<div style="position:absolute;top:31215;left:355"><nobr>: ee$Image</nobr></div>
<div style="position:absolute;top:31230;left:94"><nobr>- ID    </nobr></div>
<div style="position:absolute;top:31230;left:355"><nobr>: no_id</nobr></div>
<div style="position:absolute;top:31245;left:94"><nobr>- Number of Bands    </nobr></div>
<div style="position:absolute;top:31245;left:355"><nobr>: 3</nobr></div>
<div style="position:absolute;top:31260;left:94"><nobr>- Bands names    </nobr></div>
<div style="position:absolute;top:31260;left:355"><nobr>: band1 band2 band3</nobr></div>
<div style="position:absolute;top:31275;left:94"><nobr>- Number of Properties     : 0</nobr></div>
<div style="position:absolute;top:31290;left:94"><nobr>- Number of Pixels*    </nobr></div>
<div style="position:absolute;top:31290;left:355"><nobr>: 194400</nobr></div>
<div style="position:absolute;top:31305;left:94"><nobr>- Approximate size*    </nobr></div>
<div style="position:absolute;top:31305;left:355"><nobr>: 303.75 KB</nobr></div>
<div style="position:absolute;top:31320;left:85"><nobr><b>Band Metadata (img_band = banda1):</b></nobr></div>
<div style="position:absolute;top:31335;left:94"><nobr>- EPSG (SRID)    </nobr></div>
<div style="position:absolute;top:31335;left:355"><nobr>: 4326</nobr></div>
<div style="position:absolute;top:31350;left:94"><nobr>- proj4string    </nobr></div>
<div style="position:absolute;top:31350;left:355"><nobr>: +proj=longlat +datum=WGS84 +no_defs</nobr></div>
<div style="position:absolute;top:31365;left:94"><nobr>- Geotransform    </nobr></div>
<div style="position:absolute;top:31365;left:355"><nobr>: 1 0 0 0 1 0</nobr></div>
<div style="position:absolute;top:31380;left:94"><nobr>- Nominal scale (meters)     : 111319.5</nobr></div>
<div style="position:absolute;top:31395;left:94"><nobr>- Dimensions    </nobr></div>
<div style="position:absolute;top:31395;left:355"><nobr>: 360 180</nobr></div>
<div style="position:absolute;top:31410;left:94"><nobr>- Number of Pixels    </nobr></div>
<div style="position:absolute;top:31410;left:355"><nobr>: 64800</nobr></div>
<div style="position:absolute;top:31425;left:94"><nobr>- Data type    </nobr></div>
<div style="position:absolute;top:31425;left:355"><nobr>: INT</nobr></div>
<div style="position:absolute;top:31440;left:94"><nobr>- Approximate size    </nobr></div>
<div style="position:absolute;top:31440;left:355"><nobr>: 101.25 KB</nobr></div>
<div style="position:absolute;top:31470;left:85"><nobr>────────────────────────────────────────────────────────────────────────────────</nobr></div>
</span></font>

<div style="position:absolute;top:31725;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="27"><b>Page 27</b></a></font></td></tr></tbody></table></div><font size="4" face="Times"><span style="font-size:22px;font-family:Times">
<div style="position:absolute;top:31826;left:85"><nobr><b>ee$Image visualization</b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:31895;left:85"><nobr>When we call the function Map$addLayer the second parameter is a list</nobr></div>
<div style="position:absolute;top:31926;left:85"><nobr>of visualization properties and parameters that will be used to display</nobr></div>
<div style="position:absolute;top:31957;left:85"><nobr>the object into the map. They are:</nobr></div>
<div style="position:absolute;top:31988;left:85"><nobr><b>bands </b>: a vector of bands that will be associated with a RGB image.</nobr></div>
<div style="position:absolute;top:32020;left:85"><nobr><b>min </b>: a number or a three numbers vector that will be the minimum</nobr></div>
<div style="position:absolute;top:32051;left:85"><nobr>value used by the band (or bands).</nobr></div>
<div style="position:absolute;top:32082;left:85"><nobr><b>max </b>: a number or a three numbers vector that will be the maximum</nobr></div>
<div style="position:absolute;top:32114;left:85"><nobr>value used by the band (or bands).</nobr></div>
<div style="position:absolute;top:32145;left:85"><nobr><b>gain </b>: a number or a three number vector that will be the gain used</nobr></div>
<div style="position:absolute;top:32176;left:85"><nobr>by the band (or bands).</nobr></div>
<div style="position:absolute;top:32208;left:85"><nobr><b>bias </b>: a number or a three number vector that will be the gain added</nobr></div>
<div style="position:absolute;top:32239;left:85"><nobr>to each DN (Digital Number / pixel) of the band (or bands).</nobr></div>
<div style="position:absolute;top:32270;left:85"><nobr><b>gamma </b>: a number or a three number vector that will be  the</nobr></div>
<div style="position:absolute;top:32302;left:85"><nobr>correction value of the band (or bands).</nobr></div>
<div style="position:absolute;top:32333;left:85"><nobr><b>palette </b>: a string vector of colors in CSS style that will be applied</nobr></div>
<div style="position:absolute;top:32364;left:85"><nobr>to a color ramp for the image. Only for single band images.</nobr></div>
<div style="position:absolute;top:32395;left:85"><nobr><b>opacity </b>: value use to adjust the image transparency (0 totally</nobr></div>
<div style="position:absolute;top:32427;left:85"><nobr>transparent 1 totally opaque).</nobr></div>
<div style="position:absolute;top:32489;left:85"><nobr>Creating a RGB composite based on visualization parameter:</nobr></div>
<div style="position:absolute;top:32536;left:85"><nobr>library(rgee)</nobr></div>
<div style="position:absolute;top:32554;left:85"><nobr>ee_Initialize()</nobr></div>
<div style="position:absolute;top:32572;left:85"><nobr>col&lt;-ee$ImageCollection('LANDSAT/LC08/C01/T1_TOA')</nobr></div>
<div style="position:absolute;top:32590;left:85"><nobr>point &lt;- ee$Geometry$Point(-44.4678,-23.0058)</nobr></div>
<div style="position:absolute;top:32608;left:85"><nobr>start &lt;- ee$Date("2019-06-11")</nobr></div>
<div style="position:absolute;top:32626;left:85"><nobr>end &lt;- ee$Date("2019-08-20")</nobr></div>
<div style="position:absolute;top:32644;left:85"><nobr>filter&lt;-col$filterBounds(point)$filterDate(start,end)</nobr></div>
<div style="position:absolute;top:32662;left:85"><nobr>image &lt;- filter$first()</nobr></div>
<div style="position:absolute;top:32680;left:85"><nobr>imgViz &lt;- list(</nobr></div>
<div style="position:absolute;top:32698;left:107"><nobr>min = 0,</nobr></div>
<div style="position:absolute;top:32716;left:107"><nobr>max = 0.5,</nobr></div>
<div style="position:absolute;top:32734;left:107"><nobr>bands = c("B5", "B4", "B3"),</nobr></div>
<div style="position:absolute;top:32752;left:107"><nobr>gamma = c(0.95, 1.1, 1)</nobr></div>
<div style="position:absolute;top:32770;left:85"><nobr>)</nobr></div>
<div style="position:absolute;top:32788;left:85"><nobr>Map$setCenter(-44.4678,-23.0058, 11)</nobr></div>
<div style="position:absolute;top:32806;left:85"><nobr>Map$addLayer(image, imgViz,'Landsat 8 Image')</nobr></div>
</span></font>

<div style="position:absolute;top:32987;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="28"><b>Page 28</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:33490;left:85"><nobr>Now creating a single band NDWI using a color palette.</nobr></div>
<div style="position:absolute;top:33519;left:85"><nobr>#Creating a ndwi</nobr></div>
<div style="position:absolute;top:33537;left:85"><nobr>ndwi &lt;- image$normalizedDifference(c("B3", "B5"))</nobr></div>
<div style="position:absolute;top:33555;left:85"><nobr>ndwiViz &lt;- list(</nobr></div>
<div style="position:absolute;top:33573;left:107"><nobr>min = 0.5,</nobr></div>
<div style="position:absolute;top:33591;left:107"><nobr>max = 1,</nobr></div>
<div style="position:absolute;top:33609;left:107"><nobr>palette = c("00FFFF",'0080FF', "0000FF")</nobr></div>
<div style="position:absolute;top:33627;left:85"><nobr>)</nobr></div>
<div style="position:absolute;top:33645;left:85"><nobr>Map$addLayer(ndwi, ndwiViz,'NDWI')</nobr></div>
</span></font>

<div style="position:absolute;top:34249;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="29"><b>Page 29</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:34336;left:85"><nobr>Creating a mask using image$updateMask() to make opaque (visible)</nobr></div>
<div style="position:absolute;top:34367;left:85"><nobr>the valid values (not null) below a certain value in the NDWI image,</nobr></div>
<div style="position:absolute;top:34398;left:85"><nobr>in this example, values smaller than 0.4, that represents values that</nobr></div>
<div style="position:absolute;top:34429;left:85"><nobr>are not water, will became transparent.</nobr></div>
<div style="position:absolute;top:34489;left:85"><nobr>ndwiMask &lt;- ndwi$updateMask(ndwi$gte(0.4))</nobr></div>
<div style="position:absolute;top:34507;left:85"><nobr>Map$addLayer(ndwiMask, ndwiViz,'Máscara NDWI')</nobr></div>
<div style="position:absolute;top:34987;left:85"><nobr>We can use the function image$visualize() to create a RGB image</nobr></div>
<div style="position:absolute;top:35018;left:85"><nobr>from any image.</nobr></div>
<div style="position:absolute;top:35078;left:85"><nobr>imageRGB&lt;-image$visualize(bands=c('B5','B4','B3'),max=0.5)</nobr></div>
<div style="position:absolute;top:35096;left:85"><nobr>ndwiRGB&lt;- ndwiMask$visualize(min=0.5,max=1,palette= c('#00FFFF',</nobr></div>
<div style="position:absolute;top:35114;left:85"><nobr>'#0000FF'))</nobr></div>
<div style="position:absolute;top:35165;left:85"><nobr>and create a mosaic of the two RGB images above using:</nobr></div>
<div style="position:absolute;top:35225;left:85"><nobr>mosaic&lt;-ee$ImageCollection(c(imageRGB, ndwiRGB))$mosaic();</nobr></div>
<div style="position:absolute;top:35243;left:85"><nobr>Map$addLayer(mosaic ,list(), 'mosaic')</nobr></div>
</span></font>

<div style="position:absolute;top:35511;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="30"><b>Page 30</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:36043;left:85"><nobr>Extracting a region from the image using an geometric objet:</nobr></div>
<div style="position:absolute;top:36103;left:85"><nobr>roi &lt;- ee$Geometry$Point(c(-44.4678,-23.0058))$buffer(20000)</nobr></div>
<div style="position:absolute;top:36121;left:85"><nobr>Map$addLayer(mosaic$clip(roi))</nobr></div>
</span></font>

<div style="position:absolute;top:36773;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="31"><b>Page 31</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:36860;left:85"><nobr>Now we are going to use a MODIS image to create a biome map:</nobr></div>
<div style="position:absolute;top:36907;left:85"><nobr>biome&lt;-ee$Image('MODIS/051/MCD12Q1/2012_01_01')</nobr></div>
<div style="position:absolute;top:36925;left:85"><nobr>$select('Land_Cover_Type_1')</nobr></div>
<div style="position:absolute;top:36943;left:85"><nobr>igbpPalette&lt;-c('#aec3d4','#152106', '#225129', '#369b47',</nobr></div>
<div style="position:absolute;top:36961;left:161"><nobr>'#30eb5b', '#387242', '#6a2325', '#c3aa69', '#b76031',</nobr></div>
<div style="position:absolute;top:36979;left:161"><nobr>'#d9903d', '#91af40', '#111149', '#cdb33b', '#cc0013',</nobr></div>
<div style="position:absolute;top:36997;left:161"><nobr>'#33280d', '#d7cdcc', '#f7e084', '#6f6f6f')</nobr></div>
<div style="position:absolute;top:37015;left:85"><nobr>Map$setCenter(-50.0, -15.0, 4)</nobr></div>
<div style="position:absolute;top:37033;left:85"><nobr>Map$addLayer(biome,list(min=0, max=17, palette = igbpPalette),</nobr></div>
<div style="position:absolute;top:37051;left:226"><nobr>'Biomes')</nobr></div>
</span></font>
<font size="4" face="Times"><span style="font-size:22px;font-family:Times">
<div style="position:absolute;top:37569;left:85"><nobr><b>ee$Image information and metadata</b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:37638;left:85"><nobr>We already saw above how to get some image information and</nobr></div>
<div style="position:absolute;top:37669;left:85"><nobr>metadata using  ee_print(). Now we are goin to get more</nobr></div>
<div style="position:absolute;top:37700;left:85"><nobr>information and metadata individually. First we load an image and use</nobr></div>
<div style="position:absolute;top:37731;left:85"><nobr>ee_print().</nobr></div>
<div style="position:absolute;top:37778;left:85"><nobr>col&lt;-ee$ImageCollection('COPERNICUS/S2_SR')</nobr></div>
<div style="position:absolute;top:37796;left:85"><nobr>point &lt;- ee$Geometry$Point(-44.366,-18.145)</nobr></div>
<div style="position:absolute;top:37814;left:85"><nobr>start &lt;- ee$Date("2019-07-11")</nobr></div>
<div style="position:absolute;top:37832;left:85"><nobr>end &lt;- ee$Date("2019-07-20")</nobr></div>
<div style="position:absolute;top:37850;left:85"><nobr>filter&lt;-col$filterBounds(point)$filterDate(start,end)</nobr></div>
<div style="position:absolute;top:37868;left:85"><nobr>img &lt;- filter$first()</nobr></div>
<div style="position:absolute;top:37886;left:85"><nobr>ee_print(img)</nobr></div>
</span></font>

<div style="position:absolute;top:38035;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="32"><b>Page 32</b></a></font></td></tr></tbody></table></div><font size="3" color="#2a6099" face="Times"><span style="font-size:13px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:38138;left:85"><nobr>─────────────────────────────────────── Earth Engine Image ──</nobr></div>
<div style="position:absolute;top:38153;left:85"><nobr><b>Image Metadata:</b></nobr></div>
<div style="position:absolute;top:38168;left:94"><nobr>- Class    </nobr></div>
<div style="position:absolute;top:38168;left:292"><nobr>: ee$Image</nobr></div>
<div style="position:absolute;top:38183;left:94"><nobr>- ID    </nobr></div>
<div style="position:absolute;top:38183;left:292"><nobr>: COPERNICUS/S2_SR/20190711T131251_20190711T131248_T23KNA</nobr></div>
<div style="position:absolute;top:38198;left:94"><nobr>- Time start    </nobr></div>
<div style="position:absolute;top:38198;left:292"><nobr>: 2019-07-11 13:17:13</nobr></div>
<div style="position:absolute;top:38213;left:94"><nobr>- Number of Bands     : 23</nobr></div>
<div style="position:absolute;top:38228;left:94"><nobr>- Bands names    </nobr></div>
<div style="position:absolute;top:38228;left:292"><nobr>: B1 B2 B3 B4 B5 B6 B7 B8 B8A B9 B11 B12 AOT WVP SCL</nobr></div>
<div style="position:absolute;top:38243;left:85"><nobr>TCI_R TCI_G TCI_B MSK_CLDPRB MSK_SNWPRB QA10 QA20 QA60</nobr></div>
<div style="position:absolute;top:38258;left:94"><nobr>- Number of Properties: 81</nobr></div>
<div style="position:absolute;top:38273;left:94"><nobr>- Number of Pixels*   : 77066790</nobr></div>
<div style="position:absolute;top:38288;left:94"><nobr>- Approximate size*   : 38.39 GB</nobr></div>
<div style="position:absolute;top:38303;left:85"><nobr><b>Band Metadata (img_band = B1):</b></nobr></div>
<div style="position:absolute;top:38318;left:94"><nobr>- EPSG (SRID)    </nobr></div>
<div style="position:absolute;top:38318;left:292"><nobr>: 32723</nobr></div>
<div style="position:absolute;top:38333;left:94"><nobr>- proj4string    </nobr></div>
<div style="position:absolute;top:38333;left:292"><nobr>: +proj=utm +zone=23 +south +datum=WGS84 +units=m</nobr></div>
<div style="position:absolute;top:38348;left:85"><nobr>+no_defs</nobr></div>
<div style="position:absolute;top:38363;left:94"><nobr>- Geotransform    </nobr></div>
<div style="position:absolute;top:38363;left:292"><nobr>: 60 0 499980 0 -60 8100040</nobr></div>
<div style="position:absolute;top:38378;left:94"><nobr>- Nominal scale(m)    : 60</nobr></div>
<div style="position:absolute;top:38393;left:94"><nobr>- Dimensions    </nobr></div>
<div style="position:absolute;top:38393;left:292"><nobr>: 1831 1830</nobr></div>
<div style="position:absolute;top:38408;left:94"><nobr>- Number of Pixels    : 3350730</nobr></div>
<div style="position:absolute;top:38423;left:94"><nobr>- Data type    </nobr></div>
<div style="position:absolute;top:38423;left:292"><nobr>: INT</nobr></div>
<div style="position:absolute;top:38438;left:94"><nobr>- Approximate size    : 1.67 GB</nobr></div>
<div style="position:absolute;top:38453;left:94"><nobr>───────────────────────────────────────────────────────────────────</nobr></div>
<div style="position:absolute;top:38468;left:94"><nobr>NOTE:(*)Properties calc. considering a constant geotransform and data type.</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:38485;left:85"><nobr>And now getting some information individually using cat.</nobr></div>
<div style="position:absolute;top:38516;left:85"><nobr>Band names:</nobr></div>
<div style="position:absolute;top:38545;left:85"><nobr>bandNames&lt;-img$bandNames()</nobr></div>
<div style="position:absolute;top:38563;left:85"><nobr>cat("Bands: ",paste(bandNames$getInfo(),"\n",collapse=" "))</nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:13px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:38581;left:85"><nobr>Bands:  B1</nobr></div>
<div style="position:absolute;top:38596;left:94"><nobr>B2</nobr></div>
<div style="position:absolute;top:38611;left:94"><nobr>B3</nobr></div>
<div style="position:absolute;top:38626;left:94"><nobr>B4</nobr></div>
<div style="position:absolute;top:38641;left:94"><nobr>B5</nobr></div>
<div style="position:absolute;top:38656;left:94"><nobr>B6</nobr></div>
<div style="position:absolute;top:38671;left:94"><nobr>B7</nobr></div>
<div style="position:absolute;top:38686;left:94"><nobr>B8</nobr></div>
<div style="position:absolute;top:38701;left:94"><nobr>B8A</nobr></div>
<div style="position:absolute;top:38716;left:94"><nobr>B9</nobr></div>
<div style="position:absolute;top:38731;left:94"><nobr>B11</nobr></div>
<div style="position:absolute;top:38746;left:94"><nobr>B12</nobr></div>
<div style="position:absolute;top:38761;left:94"><nobr>AOT</nobr></div>
<div style="position:absolute;top:38776;left:94"><nobr>WVP</nobr></div>
<div style="position:absolute;top:38791;left:94"><nobr>SCL</nobr></div>
<div style="position:absolute;top:38806;left:94"><nobr>TCI_R</nobr></div>
<div style="position:absolute;top:38821;left:94"><nobr>TCI_G</nobr></div>
<div style="position:absolute;top:38836;left:94"><nobr>TCI_B</nobr></div>
<div style="position:absolute;top:38851;left:94"><nobr>MSK_CLDPRB</nobr></div>
<div style="position:absolute;top:38866;left:94"><nobr>MSK_SNWPRB</nobr></div>
<div style="position:absolute;top:38881;left:94"><nobr>QA10</nobr></div>
<div style="position:absolute;top:38896;left:94"><nobr>QA20</nobr></div>
<div style="position:absolute;top:38911;left:94"><nobr>QA60</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:38928;left:85"><nobr>band 1 projection info:</nobr></div>
<div style="position:absolute;top:38957;left:85"><nobr>b1proj&lt;- img$select('B1')$projection()</nobr></div>
<div style="position:absolute;top:38975;left:85"><nobr>cat("B1 projection: ", paste(b1proj$getInfo(),"\n", collapse = "</nobr></div>
<div style="position:absolute;top:38993;left:85"><nobr>"))</nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:13px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:39011;left:85"><nobr>B1 projection:  Projection</nobr></div>
<div style="position:absolute;top:39026;left:85"><nobr>EPSG:32723</nobr></div>
<div style="position:absolute;top:39051;left:85"><nobr>c(60, 0, 499980, 0, -60, 8100040)</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:39074;left:85"><nobr>Band 1 Scale:</nobr></div>
<div style="position:absolute;top:39103;left:85"><nobr>b1scale&lt;-img$select('B1')$projection()$nominalScale()</nobr></div>
<div style="position:absolute;top:39121;left:85"><nobr>cat("B1 Scale: ", paste(b1scale$getInfo(),"\n", collapse = " "))</nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:13px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:39139;left:85"><nobr>B1 Scale:  60</nobr></div>
</span></font>

<div style="position:absolute;top:39297;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="33"><b>Page 33</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:39384;left:85"><nobr>Band 2 Scale:</nobr></div>
<div style="position:absolute;top:39431;left:85"><nobr>b2scale&lt;-img$select('B2')$projection()$nominalScale()</nobr></div>
<div style="position:absolute;top:39449;left:85"><nobr>cat("B2 Scale: ", paste(b2scale$getInfo(),"\n", collapse = " "))</nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:13px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:39467;left:85"><nobr>B2 Scale:  10</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:39515;left:85"><nobr>Banda 5 Scale:</nobr></div>
<div style="position:absolute;top:39562;left:85"><nobr>b5scale&lt;-img$select('B5')$projection()$nominalScale()</nobr></div>
<div style="position:absolute;top:39580;left:85"><nobr>cat("B5 Scale: ", paste(b5scale$getInfo(),"\n", collapse = " "))</nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:13px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:39598;left:85"><nobr>B5 Scale:  20</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:39646;left:85"><nobr>Showng all Metadata names:</nobr></div>
<div style="position:absolute;top:39675;left:85"><nobr>metadata&lt;-img$propertyNames()</nobr></div>
<div style="position:absolute;top:39693;left:85"><nobr>cat("Metadata: ", paste(metadata$getInfo(),"\n",collapse = " "))</nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:13px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:39711;left:85"><nobr>Metadata: </nobr></div>
<div style="position:absolute;top:39726;left:94"><nobr>DATATAKE_IDENTIFIER</nobr></div>
<div style="position:absolute;top:39741;left:94"><nobr>AOT_RETRIEVAL_ACCURACY</nobr></div>
<div style="position:absolute;top:39756;left:94"><nobr>SPACECRAFT_NAME</nobr></div>
<div style="position:absolute;top:39771;left:94"><nobr>SATURATED_DEFECTIVE_PIXEL_PERCENTAGE</nobr></div>
<div style="position:absolute;top:39786;left:94"><nobr>system:id</nobr></div>
<div style="position:absolute;top:39801;left:94"><nobr>MEAN_INCIDENCE_AZIMUTH_ANGLE_B8A</nobr></div>
<div style="position:absolute;top:39816;left:94"><nobr>CLOUD_SHADOW_PERCENTAGE</nobr></div>
<div style="position:absolute;top:39831;left:94"><nobr>MEAN_SOLAR_AZIMUTH_ANGLE</nobr></div>
<div style="position:absolute;top:39846;left:94"><nobr>system:footprint</nobr></div>
<div style="position:absolute;top:39861;left:94"><nobr>VEGETATION_PERCENTAGE</nobr></div>
<div style="position:absolute;top:39876;left:94"><nobr>SOLAR_IRRADIANCE_B12</nobr></div>
<div style="position:absolute;top:39891;left:94"><nobr>system:version</nobr></div>
<div style="position:absolute;top:39906;left:94"><nobr>SOLAR_IRRADIANCE_B10</nobr></div>
<div style="position:absolute;top:39921;left:94"><nobr>SENSOR_QUALITY</nobr></div>
<div style="position:absolute;top:39936;left:94"><nobr>SOLAR_IRRADIANCE_B11</nobr></div>
<div style="position:absolute;top:39951;left:94"><nobr>GENERATION_TIME</nobr></div>
<div style="position:absolute;top:39966;left:94"><nobr>SOLAR_IRRADIANCE_B8A</nobr></div>
<div style="position:absolute;top:39981;left:94"><nobr>FORMAT_CORRECTNESS</nobr></div>
<div style="position:absolute;top:39996;left:94"><nobr>CLOUD_COVERAGE_ASSESSMENT</nobr></div>
<div style="position:absolute;top:40011;left:94"><nobr>THIN_CIRRUS_PERCENTAGE</nobr></div>
<div style="position:absolute;top:40026;left:94"><nobr>system:time_end</nobr></div>
<div style="position:absolute;top:40041;left:94"><nobr>WATER_VAPOUR_RETRIEVAL_ACCURACY</nobr></div>
<div style="position:absolute;top:40056;left:94"><nobr>system:time_start</nobr></div>
<div style="position:absolute;top:40071;left:94"><nobr>DATASTRIP_ID</nobr></div>
<div style="position:absolute;top:40086;left:94"><nobr>PROCESSING_BASELINE</nobr></div>
<div style="position:absolute;top:40101;left:94"><nobr>SENSING_ORBIT_NUMBER</nobr></div>
<div style="position:absolute;top:40116;left:94"><nobr>NODATA_PIXEL_PERCENTAGE</nobr></div>
<div style="position:absolute;top:40131;left:94"><nobr>SENSING_ORBIT_DIRECTION</nobr></div>
<div style="position:absolute;top:40146;left:94"><nobr>GENERAL_QUALITY</nobr></div>
<div style="position:absolute;top:40161;left:94"><nobr>GRANULE_ID</nobr></div>
<div style="position:absolute;top:40176;left:94"><nobr>REFLECTANCE_CONVERSION_CORRECTION</nobr></div>
<div style="position:absolute;top:40191;left:94"><nobr>MEDIUM_PROBA_CLOUDS_PERCENTAGE</nobr></div>
<div style="position:absolute;top:40206;left:94"><nobr>MEAN_INCIDENCE_AZIMUTH_ANGLE_B8</nobr></div>
<div style="position:absolute;top:40221;left:94"><nobr>DATATAKE_TYPE</nobr></div>
<div style="position:absolute;top:40236;left:94"><nobr>MEAN_INCIDENCE_AZIMUTH_ANGLE_B9</nobr></div>
<div style="position:absolute;top:40251;left:94"><nobr>MEAN_INCIDENCE_AZIMUTH_ANGLE_B6</nobr></div>
<div style="position:absolute;top:40266;left:94"><nobr>MEAN_INCIDENCE_AZIMUTH_ANGLE_B7</nobr></div>
<div style="position:absolute;top:40281;left:94"><nobr>MEAN_INCIDENCE_AZIMUTH_ANGLE_B4</nobr></div>
<div style="position:absolute;top:40296;left:94"><nobr>MEAN_INCIDENCE_ZENITH_ANGLE_B1</nobr></div>
<div style="position:absolute;top:40311;left:94"><nobr>NOT_VEGETATED_PERCENTAGE</nobr></div>
<div style="position:absolute;top:40326;left:94"><nobr>MEAN_INCIDENCE_AZIMUTH_ANGLE_B5</nobr></div>
<div style="position:absolute;top:40341;left:94"><nobr>RADIOMETRIC_QUALITY</nobr></div>
<div style="position:absolute;top:40356;left:94"><nobr>MEAN_INCIDENCE_AZIMUTH_ANGLE_B2</nobr></div>
<div style="position:absolute;top:40371;left:94"><nobr>MEAN_INCIDENCE_AZIMUTH_ANGLE_B3</nobr></div>
<div style="position:absolute;top:40386;left:94"><nobr>MEAN_INCIDENCE_ZENITH_ANGLE_B5</nobr></div>
<div style="position:absolute;top:40401;left:94"><nobr>MEAN_INCIDENCE_AZIMUTH_ANGLE_B1</nobr></div>
<div style="position:absolute;top:40416;left:94"><nobr>MEAN_INCIDENCE_ZENITH_ANGLE_B4</nobr></div>
<div style="position:absolute;top:40431;left:94"><nobr>MEAN_INCIDENCE_ZENITH_ANGLE_B3</nobr></div>
<div style="position:absolute;top:40446;left:94"><nobr>MEAN_INCIDENCE_ZENITH_ANGLE_B2 </nobr></div>
</span></font>

<div style="position:absolute;top:40559;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="34"><b>Page 34</b></a></font></td></tr></tbody></table></div><font size="3" color="#2a6099" face="Times"><span style="font-size:13px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:40644;left:94"><nobr>MEAN_INCIDENCE_ZENITH_ANGLE_B9</nobr></div>
<div style="position:absolute;top:40659;left:94"><nobr>MEAN_INCIDENCE_ZENITH_ANGLE_B8</nobr></div>
<div style="position:absolute;top:40674;left:94"><nobr>MEAN_INCIDENCE_ZENITH_ANGLE_B7</nobr></div>
<div style="position:absolute;top:40689;left:94"><nobr>DARK_FEATURES_PERCENTAGE</nobr></div>
<div style="position:absolute;top:40704;left:94"><nobr>HIGH_PROBA_CLOUDS_PERCENTAGE</nobr></div>
<div style="position:absolute;top:40719;left:94"><nobr>MEAN_INCIDENCE_ZENITH_ANGLE_B6</nobr></div>
<div style="position:absolute;top:40734;left:94"><nobr>UNCLASSIFIED_PERCENTAGE</nobr></div>
<div style="position:absolute;top:40749;left:94"><nobr>MEAN_SOLAR_ZENITH_ANGLE</nobr></div>
<div style="position:absolute;top:40764;left:94"><nobr>MEAN_INCIDENCE_ZENITH_ANGLE_B8A</nobr></div>
<div style="position:absolute;top:40779;left:94"><nobr>RADIATIVE_TRANSFER_ACCURACY</nobr></div>
<div style="position:absolute;top:40794;left:94"><nobr>MGRS_TILE</nobr></div>
<div style="position:absolute;top:40809;left:94"><nobr>CLOUDY_PIXEL_PERCENTAGE</nobr></div>
<div style="position:absolute;top:40824;left:94"><nobr>PRODUCT_ID</nobr></div>
<div style="position:absolute;top:40839;left:94"><nobr>MEAN_INCIDENCE_ZENITH_ANGLE_B10</nobr></div>
<div style="position:absolute;top:40854;left:94"><nobr>SOLAR_IRRADIANCE_B9</nobr></div>
<div style="position:absolute;top:40869;left:94"><nobr>SNOW_ICE_PERCENTAGE</nobr></div>
<div style="position:absolute;top:40884;left:94"><nobr>DEGRADED_MSI_DATA_PERCENTAGE</nobr></div>
<div style="position:absolute;top:40899;left:94"><nobr>MEAN_INCIDENCE_ZENITH_ANGLE_B11</nobr></div>
<div style="position:absolute;top:40914;left:94"><nobr>MEAN_INCIDENCE_ZENITH_ANGLE_B12</nobr></div>
<div style="position:absolute;top:40929;left:94"><nobr>SOLAR_IRRADIANCE_B6</nobr></div>
<div style="position:absolute;top:40944;left:94"><nobr>MEAN_INCIDENCE_AZIMUTH_ANGLE_B10</nobr></div>
<div style="position:absolute;top:40959;left:94"><nobr>SOLAR_IRRADIANCE_B5</nobr></div>
<div style="position:absolute;top:40974;left:94"><nobr>MEAN_INCIDENCE_AZIMUTH_ANGLE_B11</nobr></div>
<div style="position:absolute;top:40989;left:94"><nobr>SOLAR_IRRADIANCE_B8</nobr></div>
<div style="position:absolute;top:41004;left:94"><nobr>MEAN_INCIDENCE_AZIMUTH_ANGLE_B12</nobr></div>
<div style="position:absolute;top:41019;left:94"><nobr>SOLAR_IRRADIANCE_B7</nobr></div>
<div style="position:absolute;top:41034;left:94"><nobr>SOLAR_IRRADIANCE_B2</nobr></div>
<div style="position:absolute;top:41049;left:94"><nobr>SOLAR_IRRADIANCE_B1</nobr></div>
<div style="position:absolute;top:41064;left:94"><nobr>SOLAR_IRRADIANCE_B4</nobr></div>
<div style="position:absolute;top:41079;left:94"><nobr>GEOMETRIC_QUALITY</nobr></div>
<div style="position:absolute;top:41094;left:94"><nobr>SOLAR_IRRADIANCE_B3</nobr></div>
<div style="position:absolute;top:41109;left:94"><nobr>system:asset_size</nobr></div>
<div style="position:absolute;top:41124;left:94"><nobr>WATER_PERCENTAGE</nobr></div>
<div style="position:absolute;top:41139;left:94"><nobr>system:index</nobr></div>
<div style="position:absolute;top:41154;left:94"><nobr>system:bands</nobr></div>
<div style="position:absolute;top:41169;left:94"><nobr>system:band_names </nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:41217;left:85"><nobr>Getting an specific matadata field value that was listed above:</nobr></div>
<div style="position:absolute;top:41277;left:85"><nobr>cloudCover &lt;- img$get('CLOUD_SHADOW_PERCENTAGE')</nobr></div>
<div style="position:absolute;top:41295;left:85"><nobr>cat("Cloud Cover %:",paste(cloudCover$getInfo(),"\n",collapse="</nobr></div>
<div style="position:absolute;top:41313;left:85"><nobr>"))</nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:13px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:41341;left:85"><nobr>Cloud Cover %: 0.000116</nobr></div>
</span></font>
<font size="4" face="Times"><span style="font-size:22px;font-family:Times">
<div style="position:absolute;top:41409;left:85"><nobr><b>ee$Image arithmetic operations</b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:41478;left:85"><nobr>Google Earth Engine has two ways of executing mathematical</nobr></div>
<div style="position:absolute;top:41509;left:85"><nobr>operations: a weird one to R users that uses inline function for each</nobr></div>
<div style="position:absolute;top:41540;left:85"><nobr>operation that may be suitable for simple operation and another one</nobr></div>
<div style="position:absolute;top:41571;left:85"><nobr>using the function ee$Image$expression() which is more appropriated.</nobr></div>
<div style="position:absolute;top:41633;left:85"><nobr>Executing the NDVI calculation using the first method (inline</nobr></div>
<div style="position:absolute;top:41664;left:85"><nobr>functions):</nobr></div>
<div style="position:absolute;top:41694;left:85"><nobr>library(rgee)</nobr></div>
<div style="position:absolute;top:41712;left:85"><nobr>ee_Initialize()</nobr></div>
</span></font>

<div style="position:absolute;top:41821;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="35"><b>Page 35</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:41906;left:85"><nobr>col&lt;-ee$ImageCollection('LANDSAT/LC08/C01/T1_TOA')</nobr></div>
<div style="position:absolute;top:41924;left:85"><nobr>point &lt;- ee$Geometry$Point(-44.4678,-23.0058)</nobr></div>
<div style="position:absolute;top:41942;left:85"><nobr>start &lt;- ee$Date("2019-06-11")</nobr></div>
<div style="position:absolute;top:41960;left:85"><nobr>end &lt;- ee$Date("2019-08-20")</nobr></div>
<div style="position:absolute;top:41978;left:85"><nobr>filter&lt;-col$filterBounds(point)$filterDate(start,end)</nobr></div>
<div style="position:absolute;top:41996;left:85"><nobr>image &lt;- filter$first()</nobr></div>
<div style="position:absolute;top:42014;left:85"><nobr>ndvi&lt;-(image$select('B4')$subtract(image$select('B3')))</nobr></div>
<div style="position:absolute;top:42032;left:85"><nobr>$divide(image$select('B4')$add(image$select('B3')))</nobr></div>
<div style="position:absolute;top:42083;left:85"><nobr>And now calculating the EVI using the second method using</nobr></div>
<div style="position:absolute;top:42114;left:85"><nobr>expression():</nobr></div>
<div style="position:absolute;top:42143;left:85"><nobr>evi&lt;-image$expression(</nobr></div>
<div style="position:absolute;top:42161;left:226"><nobr>'2.5 * ((NIR - RED) / (NIR + 6 * RED - 7.5 * BLUE))',</nobr></div>
<div style="position:absolute;top:42179;left:226"><nobr>list('NIR'=image$select('B5'),</nobr></div>
<div style="position:absolute;top:42197;left:226"><nobr>'RED'=image$select('B4'),</nobr></div>
<div style="position:absolute;top:42215;left:226"><nobr>'BLUE'=image$select('B2')))</nobr></div>
<div style="position:absolute;top:42266;left:85"><nobr>Plotting both images:</nobr></div>
<div style="position:absolute;top:42295;left:85"><nobr>Map$centerObject(image,9)</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:42313;left:85"><nobr>Map$addLayer(ndvi,list(min=-1, max=1, palette=c('#FF0000','#00FF00')),</nobr></div>
<div style="position:absolute;top:42330;left:85"><nobr>'NDVI') + Map$addLayer(evi,list(min=-1,max=1,palette=c('#FF0000',</nobr></div>
<div style="position:absolute;top:42346;left:85"><nobr>'#00FF00')), 'EVI')</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:42396;left:85"><nobr>EVI</nobr></div>
</span></font>

<div style="position:absolute;top:43083;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="36"><b>Page 36</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:43170;left:85"><nobr>NDVI</nobr></div>
</span></font>
<font size="4" face="Times"><span style="font-size:22px;font-family:Times">
<div style="position:absolute;top:43664;left:85"><nobr><b>ee#Image relational, boolean and conditional operations</b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:43733;left:85"><nobr>These operation are used a lot to create masks, filters and to</nobr></div>
<div style="position:absolute;top:43764;left:85"><nobr>generate heat maps. We will cover here on how to use these</nobr></div>
<div style="position:absolute;top:43795;left:85"><nobr>operations.</nobr></div>
<div style="position:absolute;top:43826;left:85"><nobr>Creating a binary mask using two images (NDWI and NDVI) and</nobr></div>
<div style="position:absolute;top:43857;left:85"><nobr>selecting the ares not covered by water nor vegetation, the resulting</nobr></div>
<div style="position:absolute;top:43888;left:85"><nobr>image will be showing areas with rock, soil, beaches and urban zones.</nobr></div>
<div style="position:absolute;top:43917;left:85"><nobr>library(rgee)</nobr></div>
<div style="position:absolute;top:43935;left:85"><nobr>ee_Initialize()</nobr></div>
<div style="position:absolute;top:43953;left:85"><nobr>col&lt;-ee$ImageCollection('LANDSAT/LC08/C01/T1_TOA')</nobr></div>
<div style="position:absolute;top:43971;left:85"><nobr>ponit &lt;- ee$Geometry$Point(-44.4678,-23.0058)</nobr></div>
<div style="position:absolute;top:43989;left:85"><nobr>start &lt;- ee$Date("2019-06-11")</nobr></div>
<div style="position:absolute;top:44007;left:85"><nobr>end &lt;- ee$Date("2019-08-20")</nobr></div>
<div style="position:absolute;top:44025;left:85"><nobr>filter&lt;-col$filterBounds(point)$filterDate(start,end)</nobr></div>
<div style="position:absolute;top:44043;left:85"><nobr>image &lt;- filter$first()</nobr></div>
<div style="position:absolute;top:44061;left:85"><nobr>ndvi&lt;-image$normalizedDifference(c('B5', 'B4'))</nobr></div>
<div style="position:absolute;top:44079;left:85"><nobr>ndwi&lt;- image$normalizedDifference(c('B3', 'B5'))</nobr></div>
<div style="position:absolute;top:44097;left:85"><nobr>exposed&lt;-ndvi$lt(0.5)$And(ndwi$lt(0.2))</nobr></div>
<div style="position:absolute;top:44115;left:85"><nobr>Map$setCenter(-44.4678,-23.0058, 12)</nobr></div>
<div style="position:absolute;top:44133;left:85"><nobr>imgViz&lt;-list(min=0,max=0.5,bands=c("B4","B3","B2"),gamma=c(0.95,</nobr></div>
<div style="position:absolute;top:44151;left:85"><nobr>1.1,1))</nobr></div>
<div style="position:absolute;top:44169;left:85"><nobr>Map$addLayer(image,imgViz, 'Landsat')+</nobr></div>
<div style="position:absolute;top:44187;left:85"><nobr>Map$addLayer(exposed$updateMask(exposed),list(),'Exposed areas')</nobr></div>
</span></font>

<div style="position:absolute;top:44345;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="37"><b>Page 37</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:44851;left:85"><nobr>Paris is known as the ‘city of lights’, let’s check it out using relational</nobr></div>
<div style="position:absolute;top:44882;left:85"><nobr>and conditional operations.</nobr></div>
<div style="position:absolute;top:44911;left:85"><nobr>library(rgee)</nobr></div>
<div style="position:absolute;top:44929;left:85"><nobr>ee_Initialize()</nobr></div>
<div style="position:absolute;top:44947;left:85"><nobr>nl2012&lt;-ee$Image('NOAA/DMSP-OLS/NIGHTTIME_LIGHTS/F182012')</nobr></div>
<div style="position:absolute;top:44965;left:85"><nobr>pal&lt;-c('#000000','#0000FF','#00FF00','#FF0000')</nobr></div>
<div style="position:absolute;top:44983;left:85"><nobr>Map$setCenter(2.373,48.8683,8)</nobr></div>
<div style="position:absolute;top:45001;left:85"><nobr>luz&lt;-nl2012$expression("(b('stable_lights') &gt; 62) ? 3  :</nobr></div>
<div style="position:absolute;top:45019;left:85"><nobr>(b('stable_lights') &gt; 55) ? 2 : (b('stable_lights') &gt; 30) ? 1 : 0"</nobr></div>
<div style="position:absolute;top:45037;left:85"><nobr>)</nobr></div>
<div style="position:absolute;top:45055;left:85"><nobr>Map$addLayer(luz,list(min=0,max=3,palette=pal,opacity=0.4),</nobr></div>
<div style="position:absolute;top:45073;left:226"><nobr>'Light intensity')</nobr></div>
</span></font>

<div style="position:absolute;top:45607;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="38"><b>Page 38</b></a></font></td></tr></tbody></table></div><font size="4" face="Times"><span style="font-size:22px;font-family:Times">
<div style="position:absolute;top:45708;left:85"><nobr><b>Spectral transformation with ee$Image</b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:45777;left:85"><nobr>There are several spectral transformation function In Google Earth</nobr></div>
<div style="position:absolute;top:45808;left:85"><nobr>Engine, including instances for images such as</nobr></div>
<div style="position:absolute;top:45839;left:85"><nobr>normalizedDifference(), unmix(), rgbToHsv() and hsvToRgb(). The</nobr></div>
<div style="position:absolute;top:45870;left:85"><nobr>last two can be used to execute a pensharpening process.</nobr></div>
<div style="position:absolute;top:45932;left:85"><nobr>Pansharpening is a process used to join panchromatic images of high</nobr></div>
<div style="position:absolute;top:45963;left:85"><nobr>resolution with multispectral imates of lower resolution in order to</nobr></div>
<div style="position:absolute;top:45994;left:85"><nobr>create a colored image</nobr></div>
<div style="position:absolute;top:46025;left:85"><nobr><i>Low-res color image + Hi-res gray band = Higher-res color image</i></nobr></div>
<div style="position:absolute;top:46087;left:85"><nobr>This is done by decomposing a RGB image in HSV and replacing the V</nobr></div>
<div style="position:absolute;top:46118;left:85"><nobr>(value) band by the high resolution panchromatic and converting it</nobr></div>
<div style="position:absolute;top:46150;left:85"><nobr>back to a RGB image.</nobr></div>
<div style="position:absolute;top:46210;left:85"><nobr>library(rgee)</nobr></div>
<div style="position:absolute;top:46228;left:85"><nobr>ee_Initialize()</nobr></div>
<div style="position:absolute;top:46246;left:85"><nobr>col&lt;-ee$ImageCollection('LANDSAT/LC08/C01/T1_TOA')</nobr></div>
<div style="position:absolute;top:46264;left:85"><nobr>point &lt;- ee$Geometry$Point(-44.4678,-23.0058)</nobr></div>
<div style="position:absolute;top:46282;left:85"><nobr>start &lt;- ee$Date("2019-06-11")</nobr></div>
<div style="position:absolute;top:46300;left:85"><nobr>end &lt;- ee$Date("2019-08-20")</nobr></div>
<div style="position:absolute;top:46318;left:85"><nobr>filter&lt;-col$filterBounds(point)$filterDate(start,end)</nobr></div>
<div style="position:absolute;top:46336;left:85"><nobr>image &lt;- filter$first()</nobr></div>
<div style="position:absolute;top:46354;left:85"><nobr>hsv&lt;-image$select(c('B4', 'B3', 'B2'))$rgbToHsv()</nobr></div>
<div style="position:absolute;top:46372;left:85"><nobr>sharpened&lt;-ee$Image$cat(c(</nobr></div>
<div style="position:absolute;top:46390;left:118"><nobr>hsv$select('hue'), hsv$select('saturation'), image$select('B8')</nobr></div>
<div style="position:absolute;top:46408;left:118"><nobr>))$hsvToRgb()</nobr></div>
<div style="position:absolute;top:46426;left:85"><nobr>Map$setCenter(-44.4678,-23.0058, 13)</nobr></div>
<div style="position:absolute;top:46444;left:85"><nobr>Map$addLayer(image,list(</nobr></div>
<div style="position:absolute;top:46462;left:128"><nobr>bands=c('B4', 'B3', 'B2'), min=0, max=0.25, gamma=c(1.3, 1.3,</nobr></div>
<div style="position:absolute;top:46480;left:85"><nobr>1.3)),</nobr></div>
<div style="position:absolute;top:46498;left:128"><nobr>'rgb')+</nobr></div>
<div style="position:absolute;top:46516;left:85"><nobr>Map$addLayer(hsv,list(</nobr></div>
<div style="position:absolute;top:46534;left:128"><nobr>bands=c('hue', 'saturation', 'value'), min=0, max=1,</nobr></div>
<div style="position:absolute;top:46552;left:85"><nobr>gamma=c(1.3, 1.3, 1.3)),</nobr></div>
<div style="position:absolute;top:46570;left:128"><nobr>'hsv')+</nobr></div>
<div style="position:absolute;top:46588;left:85"><nobr>Map$addLayer(sharpened,list(</nobr></div>
<div style="position:absolute;top:46606;left:226"><nobr>min=0, max=0.25, gamma=c(1.3, 1.3, 1.3)),</nobr></div>
<div style="position:absolute;top:46624;left:226"><nobr>'pensharpened') </nobr></div>
</span></font>

<div style="position:absolute;top:46869;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="39"><b>Page 39</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:46956;left:85"><nobr>The resulting images will be:</nobr></div>
<div style="position:absolute;top:46987;left:97"><nobr>RGB</nobr></div>
<div style="position:absolute;top:47400;left:85"><nobr>Pensharpened</nobr></div>
<div style="position:absolute;top:47814;left:85"><nobr>Previously we saw how to use the function normilizedDifference(). Now</nobr></div>
<div style="position:absolute;top:47845;left:85"><nobr>we will use the function unmix() to extract and group regions with</nobr></div>
<div style="position:absolute;top:47876;left:85"><nobr>similar spectral responses</nobr></div>
<div style="position:absolute;top:47905;left:85"><nobr>library(rgee)</nobr></div>
<div style="position:absolute;top:47923;left:85"><nobr>ee_Initialize()</nobr></div>
<div style="position:absolute;top:47941;left:85"><nobr>bands &lt;- c("B1", "B2", "B3", "B4", "B5", "B6", "B7")</nobr></div>
<div style="position:absolute;top:47959;left:85"><nobr>image &lt;- ee$Image("LANDSAT/LT05/C01/T1/LT05_044034_20080214")</nobr></div>
<div style="position:absolute;top:47977;left:85"><nobr>$select(bands)</nobr></div>
<div style="position:absolute;top:47995;left:85"><nobr># Defining the final spectral values for each defined class in the</nobr></div>
<div style="position:absolute;top:48013;left:85"><nobr># 7 bands</nobr></div>
</span></font>

<div style="position:absolute;top:48131;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="40"><b>Page 40</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:48216;left:85"><nobr>urban &lt;- c(88, 42, 48, 38, 86, 115, 59)</nobr></div>
<div style="position:absolute;top:48234;left:85"><nobr>veget &lt;- c(50, 21, 20, 35, 50, 110, 23)</nobr></div>
<div style="position:absolute;top:48252;left:85"><nobr>water &lt;- c(51, 20, 14, 9, 7, 116, 4)</nobr></div>
<div style="position:absolute;top:48270;left:85"><nobr># Unmix a imagem.</nobr></div>
<div style="position:absolute;top:48288;left:85"><nobr>fractions &lt;- image$unmix(list(urban, veget, water))</nobr></div>
<div style="position:absolute;top:48306;left:85"><nobr>Map$setCenter(lon=-122.1899,lat=37.5010)# San Francisco bay</nobr></div>
<div style="position:absolute;top:48324;left:85"><nobr>Map$setZoom(zoom = 10)</nobr></div>
<div style="position:absolute;top:48342;left:85"><nobr>Map$addLayer(</nobr></div>
<div style="position:absolute;top:48360;left:107"><nobr>eeObject = image,</nobr></div>
<div style="position:absolute;top:48378;left:107"><nobr>visParams = list(min = 0, max = 128, bands = c("B4", "B3",</nobr></div>
<div style="position:absolute;top:48396;left:85"><nobr>"B2")),</nobr></div>
<div style="position:absolute;top:48414;left:107"><nobr>name = "Image"</nobr></div>
<div style="position:absolute;top:48432;left:85"><nobr>) +</nobr></div>
<div style="position:absolute;top:48450;left:85"><nobr>Map$addLayer(</nobr></div>
<div style="position:absolute;top:48468;left:107"><nobr>eeObject = fractions,</nobr></div>
<div style="position:absolute;top:48486;left:107"><nobr>visParams = list(min = 0, max = 2),</nobr></div>
<div style="position:absolute;top:48504;left:107"><nobr>name = "Unmixed"</nobr></div>
<div style="position:absolute;top:48522;left:85"><nobr>)</nobr></div>
<div style="position:absolute;top:48573;left:85"><nobr>The resulting image is (observ the separation between water, urban</nobr></div>
<div style="position:absolute;top:48604;left:85"><nobr>zoness and vegetated areas):</nobr></div>
</span></font>

<div style="position:absolute;top:49393;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="41"><b>Page 41</b></a></font></td></tr></tbody></table></div><font size="4" face="Times"><span style="font-size:22px;font-family:Times">
<div style="position:absolute;top:49494;left:85"><nobr><b>ee$image Gradient</b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:49532;left:85"><nobr>Extracting gradient information from an image can be done and we</nobr></div>
<div style="position:absolute;top:49563;left:85"><nobr>will use a DEM ALOS AW3D30 image to demonstrate it extracting the o</nobr></div>
<div style="position:absolute;top:49594;left:85"><nobr>gradient and aspect from it.</nobr></div>
<div style="position:absolute;top:49654;left:85"><nobr>library(rgee)</nobr></div>
<div style="position:absolute;top:49672;left:85"><nobr>ee_Initialize()   </nobr></div>
<div style="position:absolute;top:49690;left:85"><nobr>data &lt;- ee$Image("JAXA/ALOS/AW3D30_V1_1")</nobr></div>
<div style="position:absolute;top:49708;left:85"><nobr>elevation &lt;- data$select("AVE")</nobr></div>
<div style="position:absolute;top:49726;left:85"><nobr>xyGrad &lt;- elevation$gradient()</nobr></div>
<div style="position:absolute;top:49744;left:85"><nobr>gradient &lt;- xyGrad$select("x")$pow(2)$add(xyGrad$select("y")</nobr></div>
<div style="position:absolute;top:49762;left:85"><nobr>$pow(2))$sqrt()</nobr></div>
<div style="position:absolute;top:49780;left:85"><nobr>direction &lt;- xyGrad$select("y")$atan2(xyGrad$select("x"))</nobr></div>
<div style="position:absolute;top:49798;left:85"><nobr>Map$setCenter(-44.366,-17.69, zoom = 10)</nobr></div>
<div style="position:absolute;top:49816;left:85"><nobr>Map$addLayer(eeObject=direction,visParams=list(min=-2,max=2),</nobr></div>
<div style="position:absolute;top:49834;left:96"><nobr>name="Aspect")+</nobr></div>
<div style="position:absolute;top:49852;left:96"><nobr>Map$addLayer(eeObject=gradient,visParams=list(min=-1,max=1),</nobr></div>
<div style="position:absolute;top:49870;left:96"><nobr>name="gradient")+</nobr></div>
<div style="position:absolute;top:49888;left:96"><nobr>Map$addLayer(eeObject=elevation,visParams=list(palette = c(</nobr></div>
<div style="position:absolute;top:49906;left:96"><nobr>"#d73027", "#f46d43", "#fdae61", "#fee08b","#d9ef8b","#a6d96a", </nobr></div>
<div style="position:absolute;top:49924;left:96"><nobr>"#66bd63", "#1a9850"),min=200,max=1400),name="Elevation")</nobr></div>
<div style="position:absolute;top:49975;left:85"><nobr>Elevation </nobr></div>
</span></font>

<div style="position:absolute;top:50655;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="42"><b>Page 42</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:50742;left:85"><nobr>gradient</nobr></div>
<div style="position:absolute;top:51225;left:85"><nobr>Aspect</nobr></div>
</span></font>

<div style="position:absolute;top:51917;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="43"><b>Page 43</b></a></font></td></tr></tbody></table></div><font size="4" face="Times"><span style="font-size:22px;font-family:Times">
<div style="position:absolute;top:52018;left:85"><nobr><b>ee$Image convolution and edge detection</b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:52087;left:85"><nobr>Na matemática convolução é uma operação envolvendo duas funções (f</nobr></div>
<div style="position:absolute;top:52118;left:85"><nobr>e g) que produz uma terceira função que expressa a forma que uma</nobr></div>
<div style="position:absolute;top:52149;left:85"><nobr>função é modificada pela outra. O termo se refere a ambos, a função</nobr></div>
<div style="position:absolute;top:52180;left:85"><nobr>resultante e processo de cálculo desta função. Em processamento</nobr></div>
<div style="position:absolute;top:52211;left:85"><nobr>digital de imagens a filtragem convolucional tem uma regra importante</nobr></div>
<div style="position:absolute;top:52242;left:85"><nobr>em algorítimos de detecção de bordas e processos relacionados. Ela é</nobr></div>
<div style="position:absolute;top:52273;left:85"><nobr>o resultado de um kernel (filtro modificador no formato de uma</nobr></div>
<div style="position:absolute;top:52304;left:85"><nobr>matriz NxM) sobre os valores dos pixels da imagem.</nobr></div>
<div style="position:absolute;top:52961;left:85"><nobr>Different methods use different interaction equations than the one</nobr></div>
<div style="position:absolute;top:52992;left:85"><nobr>illustrated above. We will use  convolution and edge detection in the</nobr></div>
<div style="position:absolute;top:53023;left:85"><nobr>next examples.</nobr></div>
</span></font>

<div style="position:absolute;top:53179;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="44"><b>Page 44</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:53264;left:85"><nobr>library(rgee)</nobr></div>
<div style="position:absolute;top:53282;left:85"><nobr>ee_Initialize()</nobr></div>
<div style="position:absolute;top:53300;left:85"><nobr>col&lt;-ee$ImageCollection('LANDSAT/LC08/C01/T1_TOA')</nobr></div>
<div style="position:absolute;top:53318;left:85"><nobr>point &lt;- ee$Geometry$Point(-44.4678,-23.0058)</nobr></div>
<div style="position:absolute;top:53336;left:85"><nobr>start &lt;- ee$Date("2019-06-11")</nobr></div>
<div style="position:absolute;top:53354;left:85"><nobr>end &lt;- ee$Date("2019-08-20")</nobr></div>
<div style="position:absolute;top:53372;left:85"><nobr>filter&lt;-col$filterBounds(point)$filterDate(start,end)</nobr></div>
<div style="position:absolute;top:53390;left:85"><nobr>image &lt;- filter$first()</nobr></div>
<div style="position:absolute;top:53426;left:85"><nobr>boxcar &lt;- ee$Kernel$square(7, "pixels", T)</nobr></div>
<div style="position:absolute;top:53444;left:85"><nobr>smoothed &lt;- image$convolve(boxcar)</nobr></div>
<div style="position:absolute;top:53480;left:85"><nobr>laplacian &lt;- ee$Kernel$laplacian8(1, F)</nobr></div>
<div style="position:absolute;top:53498;left:85"><nobr>sharpened &lt;- image$convolve(laplacian)</nobr></div>
<div style="position:absolute;top:53534;left:85"><nobr>Map$setCenter(-44.4678,-23.0058)</nobr></div>
<div style="position:absolute;top:53552;left:85"><nobr>Map$setZoom(zoom = 11)</nobr></div>
<div style="position:absolute;top:53570;left:85"><nobr>Map$addLayer(</nobr></div>
<div style="position:absolute;top:53588;left:107"><nobr>eeObject = image,</nobr></div>
<div style="position:absolute;top:53606;left:107"><nobr>visParams = list(bands = c("B5", "B4", "B3"), max = 0.5),</nobr></div>
<div style="position:absolute;top:53624;left:107"><nobr>name = "Image"</nobr></div>
<div style="position:absolute;top:53642;left:85"><nobr>) +</nobr></div>
<div style="position:absolute;top:53660;left:85"><nobr>Map$addLayer(</nobr></div>
<div style="position:absolute;top:53678;left:107"><nobr>eeObject = smoothed,</nobr></div>
<div style="position:absolute;top:53696;left:107"><nobr>visParams = list(bands = c("B5", "B4", "B3"), max = 0.5),</nobr></div>
<div style="position:absolute;top:53714;left:107"><nobr>name = "Smoothed"</nobr></div>
<div style="position:absolute;top:53732;left:85"><nobr>) +</nobr></div>
<div style="position:absolute;top:53750;left:85"><nobr>Map$addLayer(</nobr></div>
<div style="position:absolute;top:53768;left:107"><nobr>eeObject = sharpened,</nobr></div>
<div style="position:absolute;top:53786;left:107"><nobr>visParams = list(bands = c("B5", "B4", "B3"), max = 0.5),</nobr></div>
<div style="position:absolute;top:53804;left:107"><nobr>name = "Sharpened"</nobr></div>
<div style="position:absolute;top:53822;left:85"><nobr>)</nobr></div>
<div style="position:absolute;top:53873;left:85"><nobr>Original (Bands 5, 4 e 3)</nobr></div>
</span></font>

<div style="position:absolute;top:54441;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="45"><b>Page 45</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:54528;left:85"><nobr>Smoothed</nobr></div>
<div style="position:absolute;top:54971;left:85"><nobr>Sharpened</nobr></div>
<div style="position:absolute;top:55417;left:85"><nobr>We can create our own kernel with weights and shapes arbitrarily</nobr></div>
<div style="position:absolute;top:55448;left:85"><nobr>defined, to do it we use ee.Kernel.fixed(). For example, the code</nobr></div>
<div style="position:absolute;top:55479;left:85"><nobr>below creates a 9x9 kernel 9x9 with values of 1 and a zero in the</nobr></div>
<div style="position:absolute;top:55510;left:85"><nobr>middle;</nobr></div>
<div style="position:absolute;top:55570;left:85"><nobr>list&lt;-list(1, 1, 1, 1, 1, 1, 1, 1, 1)</nobr></div>
<div style="position:absolute;top:55588;left:85"><nobr>listCenter&lt;- list(1, 1, 1, 1, 0, 1, 1, 1, 1)</nobr></div>
</span></font>

<div style="position:absolute;top:55703;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="46"><b>Page 46</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:55788;left:85"><nobr>lists&lt;-list(list, list, list, list, listCenter, list, list, list,</nobr></div>
<div style="position:absolute;top:55806;left:85"><nobr>list)</nobr></div>
<div style="position:absolute;top:55824;left:85"><nobr>kernel&lt;-ee$Kernel$fixed(9, 9, lists, -4, -4, FALSE);</nobr></div>
<div style="position:absolute;top:55842;left:85"><nobr>print(kernel)</nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:13px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:55860;left:85"><nobr>ee.Kernel({</nobr></div>
<div style="position:absolute;top:55875;left:103"><nobr>"type": "Invocation",</nobr></div>
<div style="position:absolute;top:55890;left:103"><nobr>"arguments": {</nobr></div>
<div style="position:absolute;top:55905;left:121"><nobr>"width": 9.0,</nobr></div>
<div style="position:absolute;top:55920;left:121"><nobr>"height": 9.0,</nobr></div>
<div style="position:absolute;top:55935;left:121"><nobr>"weights": [</nobr></div>
<div style="position:absolute;top:55950;left:139"><nobr>[</nobr></div>
<div style="position:absolute;top:55965;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:55980;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:55995;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:56010;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:56025;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:56040;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:56055;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:56070;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:56085;left:157"><nobr>1.0</nobr></div>
<div style="position:absolute;top:56100;left:139"><nobr>],</nobr></div>
<div style="position:absolute;top:56115;left:139"><nobr>[</nobr></div>
<div style="position:absolute;top:56130;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:56145;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:56160;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:56175;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:56190;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:56205;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:56220;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:56235;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:56250;left:157"><nobr>1.0</nobr></div>
<div style="position:absolute;top:56265;left:139"><nobr>],</nobr></div>
<div style="position:absolute;top:56280;left:139"><nobr>[</nobr></div>
<div style="position:absolute;top:56295;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:56310;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:56325;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:56340;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:56355;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:56370;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:56385;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:56400;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:56415;left:157"><nobr>1.0</nobr></div>
<div style="position:absolute;top:56430;left:139"><nobr>],</nobr></div>
<div style="position:absolute;top:56445;left:139"><nobr>[</nobr></div>
<div style="position:absolute;top:56460;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:56475;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:56490;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:56505;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:56520;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:56535;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:56550;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:56565;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:56580;left:157"><nobr>1.0</nobr></div>
<div style="position:absolute;top:56595;left:139"><nobr>],</nobr></div>
<div style="position:absolute;top:56610;left:139"><nobr>[</nobr></div>
<div style="position:absolute;top:56625;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:56640;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:56655;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:56670;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:56685;left:157"><nobr>0.0,</nobr></div>
<div style="position:absolute;top:56700;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:56715;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:56730;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:56745;left:157"><nobr>1.0</nobr></div>
<div style="position:absolute;top:56760;left:139"><nobr>],</nobr></div>
<div style="position:absolute;top:56775;left:139"><nobr>[</nobr></div>
<div style="position:absolute;top:56790;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:56805;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:56820;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:56835;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:56850;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:56865;left:157"><nobr>1.0,</nobr></div>
</span></font>

<div style="position:absolute;top:56965;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="47"><b>Page 47</b></a></font></td></tr></tbody></table></div><font size="3" color="#2a6099" face="Times"><span style="font-size:13px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:57050;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:57065;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:57080;left:157"><nobr>1.0</nobr></div>
<div style="position:absolute;top:57095;left:139"><nobr>],</nobr></div>
<div style="position:absolute;top:57110;left:139"><nobr>[</nobr></div>
<div style="position:absolute;top:57125;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:57140;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:57155;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:57170;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:57185;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:57200;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:57215;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:57230;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:57245;left:157"><nobr>1.0</nobr></div>
<div style="position:absolute;top:57260;left:139"><nobr>],</nobr></div>
<div style="position:absolute;top:57275;left:139"><nobr>[</nobr></div>
<div style="position:absolute;top:57290;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:57305;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:57320;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:57335;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:57350;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:57365;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:57380;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:57395;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:57410;left:157"><nobr>1.0</nobr></div>
<div style="position:absolute;top:57425;left:139"><nobr>],</nobr></div>
<div style="position:absolute;top:57440;left:139"><nobr>[</nobr></div>
<div style="position:absolute;top:57455;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:57470;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:57485;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:57500;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:57515;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:57530;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:57545;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:57560;left:157"><nobr>1.0,</nobr></div>
<div style="position:absolute;top:57575;left:157"><nobr>1.0</nobr></div>
<div style="position:absolute;top:57590;left:139"><nobr>]</nobr></div>
<div style="position:absolute;top:57605;left:121"><nobr>],</nobr></div>
<div style="position:absolute;top:57620;left:121"><nobr>"x": -4.0,</nobr></div>
<div style="position:absolute;top:57635;left:121"><nobr>"y": -4.0,</nobr></div>
<div style="position:absolute;top:57650;left:121"><nobr>"normalize": false</nobr></div>
<div style="position:absolute;top:57665;left:103"><nobr>},</nobr></div>
<div style="position:absolute;top:57680;left:103"><nobr>"functionName": "Kernel.fixed"</nobr></div>
<div style="position:absolute;top:57695;left:85"><nobr>})</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:57727;left:85"><nobr>Let’s learn how to use some edge detection algorithms.</nobr></div>
<div style="position:absolute;top:57756;left:85"><nobr>library(rgee)</nobr></div>
<div style="position:absolute;top:57774;left:85"><nobr>ee_Initialize()</nobr></div>
<div style="position:absolute;top:57792;left:85"><nobr>image &lt;- ee$Image("LANDSAT/LC08/C01/T1/LC08_044034_20140318")</nobr></div>
<div style="position:absolute;top:57810;left:85"><nobr>$select("B8")</nobr></div>
<div style="position:absolute;top:57828;left:85"><nobr>canny &lt;- ee$Algorithms$CannyEdgeDetector(image=image, threshold =</nobr></div>
<div style="position:absolute;top:57846;left:85"><nobr>1, sigma = 1)</nobr></div>
<div style="position:absolute;top:57864;left:85"><nobr>hough &lt;- ee$Algorithms$HoughTransform(canny, 256, 600, 100)</nobr></div>
<div style="position:absolute;top:57882;left:85"><nobr>fat &lt;- ee$Kernel$gaussian(</nobr></div>
<div style="position:absolute;top:57900;left:107"><nobr>radius = 3,</nobr></div>
<div style="position:absolute;top:57918;left:107"><nobr>sigma = 3,</nobr></div>
<div style="position:absolute;top:57936;left:107"><nobr>units = "pixels",</nobr></div>
<div style="position:absolute;top:57954;left:107"><nobr>normalize = T,</nobr></div>
<div style="position:absolute;top:57972;left:107"><nobr>magnitude = -1</nobr></div>
<div style="position:absolute;top:57990;left:85"><nobr>)</nobr></div>
<div style="position:absolute;top:58008;left:85"><nobr>skinny &lt;- ee$Kernel$gaussian(</nobr></div>
<div style="position:absolute;top:58026;left:107"><nobr>radius = 3,</nobr></div>
<div style="position:absolute;top:58044;left:107"><nobr>sigma = 1,</nobr></div>
<div style="position:absolute;top:58062;left:107"><nobr>units = "pixels",</nobr></div>
<div style="position:absolute;top:58080;left:107"><nobr>normalize = T</nobr></div>
<div style="position:absolute;top:58098;left:85"><nobr>)</nobr></div>
<div style="position:absolute;top:58116;left:85"><nobr>dog &lt;- fat$add(skinny)</nobr></div>
</span></font>

<div style="position:absolute;top:58227;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="48"><b>Page 48</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:58312;left:85"><nobr>zeroXings &lt;- image$convolve(dog)$zeroCrossing()</nobr></div>
<div style="position:absolute;top:58348;left:85"><nobr>Map$setCenter(-122.054, 37.7295)</nobr></div>
<div style="position:absolute;top:58366;left:85"><nobr>Map$setZoom(zoom = 10)</nobr></div>
<div style="position:absolute;top:58384;left:85"><nobr>Map$addLayer(</nobr></div>
<div style="position:absolute;top:58402;left:107"><nobr>eeObject = canny,</nobr></div>
<div style="position:absolute;top:58420;left:107"><nobr>visParams = list(),</nobr></div>
<div style="position:absolute;top:58438;left:107"><nobr>name = "canny"</nobr></div>
<div style="position:absolute;top:58456;left:85"><nobr>) +</nobr></div>
<div style="position:absolute;top:58474;left:107"><nobr>Map$addLayer(</nobr></div>
<div style="position:absolute;top:58492;left:128"><nobr>eeObject = hough,</nobr></div>
<div style="position:absolute;top:58510;left:128"><nobr>visParams = list(),</nobr></div>
<div style="position:absolute;top:58528;left:128"><nobr>name = "hough"</nobr></div>
<div style="position:absolute;top:58546;left:107"><nobr>) +</nobr></div>
<div style="position:absolute;top:58564;left:107"><nobr>Map$addLayer(</nobr></div>
<div style="position:absolute;top:58582;left:128"><nobr>eeObject = image,</nobr></div>
<div style="position:absolute;top:58600;left:128"><nobr>visParams = list(gamma=1.5),</nobr></div>
<div style="position:absolute;top:58618;left:128"><nobr>name = "Landsat B8"</nobr></div>
<div style="position:absolute;top:58636;left:107"><nobr>) +</nobr></div>
<div style="position:absolute;top:58654;left:107"><nobr>Map$addLayer(</nobr></div>
<div style="position:absolute;top:58672;left:128"><nobr>eeObject = zeroXings$updateMask(zeroXings),</nobr></div>
<div style="position:absolute;top:58690;left:128"><nobr>visParams = list(palette = "FF0000"),</nobr></div>
<div style="position:absolute;top:58708;left:128"><nobr>name = "zero crossings"</nobr></div>
<div style="position:absolute;top:58726;left:107"><nobr>)</nobr></div>
<div style="position:absolute;top:58777;left:85"><nobr>Canny</nobr></div>
</span></font>

<div style="position:absolute;top:59489;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="49"><b>Page 49</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:59576;left:85"><nobr>Hough</nobr></div>
<div style="position:absolute;top:60025;left:85"><nobr>Zero Crossing</nobr></div>
</span></font>

<div style="position:absolute;top:60751;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="50"><b>Page 50</b></a></font></td></tr></tbody></table></div><font size="4" face="Times"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:60855;left:85"><nobr><b>ee$ImageCollection</b></nobr></div>
</span></font>
<font size="4" face="Times"><span style="font-size:22px;font-family:Times">
<div style="position:absolute;top:60910;left:85"><nobr><b>ee$ImageCollection constructors</b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:60948;left:85"><nobr>A ee$ImageCollection is a stack or a sequence of images. This object</nobr></div>
<div style="position:absolute;top:60979;left:85"><nobr>can be loaded entering an ID of an asset as the parameter of an</nobr></div>
<div style="position:absolute;top:61010;left:85"><nobr>ee$ImageCollection object constructor.</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:61071;left:85"><nobr>library(rgee)</nobr></div>
<div style="position:absolute;top:61086;left:85"><nobr>ee_Initialize()</nobr></div>
<div style="position:absolute;top:61101;left:85"><nobr>col&lt;-ee$ImageCollection('COPERNICUS/S2_SR')</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:61136;left:85"><nobr>This collection has a reference to all Sentinel2 in the public catalog</nobr></div>
<div style="position:absolute;top:61167;left:85"><nobr>and they are a lot of images, generally we use filters associated to</nobr></div>
<div style="position:absolute;top:61198;left:85"><nobr>image collections to reduce the number of images and get the ones</nobr></div>
<div style="position:absolute;top:61229;left:85"><nobr>we need.</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:61258;left:85"><nobr>point &lt;- ee$Geometry$Point(-44.366,-18.145)</nobr></div>
<div style="position:absolute;top:61273;left:85"><nobr>start &lt;- ee$Date("2019-07-11")</nobr></div>
<div style="position:absolute;top:61288;left:85"><nobr>end &lt;- ee$Date("2019-07-20")</nobr></div>
<div style="position:absolute;top:61303;left:85"><nobr>col.filt&lt;-col$filterBounds(point)$filterDate(start,end)</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:61351;left:85"><nobr>Google Earth Engine also has functions to create an image collection</nobr></div>
<div style="position:absolute;top:61382;left:85"><nobr>object. The constructor ee$ImageCollection() and the method</nobr></div>
<div style="position:absolute;top:61413;left:85"><nobr>ee$ImageCollection$fromImages can create a new image collection</nobr></div>
<div style="position:absolute;top:61444;left:85"><nobr>object.</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:61473;left:85"><nobr>image1&lt;-ee$Image(1)</nobr></div>
<div style="position:absolute;top:61488;left:85"><nobr>image2&lt;-ee$Image(2)</nobr></div>
<div style="position:absolute;top:61503;left:85"><nobr>col1&lt;-ee$ImageCollection(list(image1,image2))</nobr></div>
<div style="position:absolute;top:61518;left:85"><nobr>ee_print(col1)</nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:13px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:61533;left:85"><nobr>───────────────────────────────── Earth Engine ImageCollection ──</nobr></div>
<div style="position:absolute;top:61548;left:85"><nobr>ImageCollection Metadata:</nobr></div>
<div style="position:absolute;top:61563;left:94"><nobr>- Class    </nobr></div>
<div style="position:absolute;top:61563;left:355"><nobr>: ee$ImageCollection</nobr></div>
<div style="position:absolute;top:61578;left:94"><nobr>- Number of Images    </nobr></div>
<div style="position:absolute;top:61578;left:355"><nobr>: 2</nobr></div>
<div style="position:absolute;top:61593;left:94"><nobr>- Number of Properties     : 0</nobr></div>
<div style="position:absolute;top:61608;left:94"><nobr>- Number of Pixels*    </nobr></div>
<div style="position:absolute;top:61608;left:355"><nobr>: 129600</nobr></div>
<div style="position:absolute;top:61623;left:94"><nobr>- Approximate size*    </nobr></div>
<div style="position:absolute;top:61623;left:355"><nobr>: 202.50 KB</nobr></div>
<div style="position:absolute;top:61638;left:85"><nobr>Image Metadata (img_index = 0):</nobr></div>
<div style="position:absolute;top:61653;left:94"><nobr>- ID    </nobr></div>
<div style="position:absolute;top:61653;left:355"><nobr>: no_id</nobr></div>
<div style="position:absolute;top:61668;left:94"><nobr>- Number of Bands    </nobr></div>
<div style="position:absolute;top:61668;left:355"><nobr>: 1</nobr></div>
<div style="position:absolute;top:61683;left:94"><nobr>- Bands names    </nobr></div>
<div style="position:absolute;top:61683;left:355"><nobr>: constant</nobr></div>
<div style="position:absolute;top:61698;left:94"><nobr>- Number of Properties     : 1</nobr></div>
<div style="position:absolute;top:61713;left:94"><nobr>- Number of Pixels*    </nobr></div>
<div style="position:absolute;top:61713;left:355"><nobr>: 64800</nobr></div>
<div style="position:absolute;top:61728;left:94"><nobr>- Approximate size*    </nobr></div>
<div style="position:absolute;top:61728;left:355"><nobr>: 101.25 KB</nobr></div>
<div style="position:absolute;top:61743;left:85"><nobr>Band Metadata (img_band = 'constant'):</nobr></div>
<div style="position:absolute;top:61758;left:94"><nobr>- EPSG (SRID)    </nobr></div>
<div style="position:absolute;top:61758;left:355"><nobr>: 4326</nobr></div>
<div style="position:absolute;top:61773;left:94"><nobr>- proj4string    </nobr></div>
<div style="position:absolute;top:61773;left:355"><nobr>: +proj=longlat +datum=WGS84 +no_defs</nobr></div>
<div style="position:absolute;top:61788;left:94"><nobr>- Geotransform    </nobr></div>
<div style="position:absolute;top:61788;left:355"><nobr>: 1 0 0 0 1 0</nobr></div>
<div style="position:absolute;top:61803;left:94"><nobr>- Nominal scale (meters)     : 111319.5</nobr></div>
<div style="position:absolute;top:61818;left:94"><nobr>- Dimensions    </nobr></div>
<div style="position:absolute;top:61818;left:355"><nobr>: 360 180</nobr></div>
<div style="position:absolute;top:61833;left:94"><nobr>- Number of Pixels    </nobr></div>
<div style="position:absolute;top:61833;left:355"><nobr>: 64800</nobr></div>
<div style="position:absolute;top:61848;left:94"><nobr>- Data type    </nobr></div>
<div style="position:absolute;top:61848;left:355"><nobr>: INT</nobr></div>
<div style="position:absolute;top:61863;left:94"><nobr>- Approximate size    </nobr></div>
<div style="position:absolute;top:61863;left:355"><nobr>: 101.25 KB</nobr></div>
<div style="position:absolute;top:61878;left:94"><nobr>─────────────────────────────────────────────────────────────────</nobr></div>
<div style="position:absolute;top:61893;left:96"><nobr>NOTE: (*) Properties calculated considering a constant  geotransform and data</nobr></div>
<div style="position:absolute;top:61908;left:85"><nobr>type.</nobr></div>
</span></font>

<div style="position:absolute;top:62013;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="51"><b>Page 51</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:62100;left:85"><nobr>Other form to create image collections is:</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:62160;left:85"><nobr>col2&lt;-ee$ImageCollection$fromImages(list(ee$Image(3),    </nobr></div>
<div style="position:absolute;top:62175;left:174"><nobr>ee$Image(4)))</nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:13px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:62190;left:85"><nobr>ee_print(col2)</nobr></div>
<div style="position:absolute;top:62205;left:85"><nobr>────────────────────────────── Earth Engine ImageCollection ──</nobr></div>
<div style="position:absolute;top:62220;left:85"><nobr>ImageCollection Metadata:</nobr></div>
<div style="position:absolute;top:62235;left:94"><nobr>- Class    </nobr></div>
<div style="position:absolute;top:62235;left:355"><nobr>: ee$ImageCollection</nobr></div>
<div style="position:absolute;top:62250;left:94"><nobr>- Number of Images    </nobr></div>
<div style="position:absolute;top:62250;left:355"><nobr>: 2</nobr></div>
<div style="position:absolute;top:62265;left:94"><nobr>- Number of Properties     : 0</nobr></div>
<div style="position:absolute;top:62280;left:94"><nobr>- Number of Pixels*    </nobr></div>
<div style="position:absolute;top:62280;left:355"><nobr>: 129600</nobr></div>
<div style="position:absolute;top:62295;left:94"><nobr>- Approximate size*    </nobr></div>
<div style="position:absolute;top:62295;left:355"><nobr>: 202.50 KB</nobr></div>
<div style="position:absolute;top:62310;left:85"><nobr>Image Metadata (img_index = 0):</nobr></div>
<div style="position:absolute;top:62325;left:94"><nobr>- ID    </nobr></div>
<div style="position:absolute;top:62325;left:355"><nobr>: no_id</nobr></div>
<div style="position:absolute;top:62340;left:94"><nobr>- Number of Bands    </nobr></div>
<div style="position:absolute;top:62340;left:355"><nobr>: 1</nobr></div>
<div style="position:absolute;top:62355;left:94"><nobr>- Bands names    </nobr></div>
<div style="position:absolute;top:62355;left:355"><nobr>: constant</nobr></div>
<div style="position:absolute;top:62370;left:94"><nobr>- Number of Properties     : 1</nobr></div>
<div style="position:absolute;top:62385;left:94"><nobr>- Number of Pixels*    </nobr></div>
<div style="position:absolute;top:62385;left:355"><nobr>: 64800</nobr></div>
<div style="position:absolute;top:62400;left:94"><nobr>- Approximate size*    </nobr></div>
<div style="position:absolute;top:62400;left:355"><nobr>: 101.25 KB</nobr></div>
<div style="position:absolute;top:62415;left:85"><nobr>Band Metadata (img_band = 'constant'):</nobr></div>
<div style="position:absolute;top:62430;left:94"><nobr>- EPSG (SRID)    </nobr></div>
<div style="position:absolute;top:62430;left:355"><nobr>: 4326</nobr></div>
<div style="position:absolute;top:62445;left:94"><nobr>- proj4string    </nobr></div>
<div style="position:absolute;top:62445;left:355"><nobr>: +proj=longlat +datum=WGS84 +no_defs</nobr></div>
<div style="position:absolute;top:62460;left:94"><nobr>- Geotransform    </nobr></div>
<div style="position:absolute;top:62460;left:355"><nobr>: 1 0 0 0 1 0</nobr></div>
<div style="position:absolute;top:62475;left:94"><nobr>- Nominal scale (meters)     : 111319.5</nobr></div>
<div style="position:absolute;top:62490;left:94"><nobr>- Dimensions    </nobr></div>
<div style="position:absolute;top:62490;left:355"><nobr>: 360 180</nobr></div>
<div style="position:absolute;top:62505;left:94"><nobr>- Number of Pixels    </nobr></div>
<div style="position:absolute;top:62505;left:355"><nobr>: 64800</nobr></div>
<div style="position:absolute;top:62520;left:94"><nobr>- Data type    </nobr></div>
<div style="position:absolute;top:62520;left:355"><nobr>: INT</nobr></div>
<div style="position:absolute;top:62535;left:94"><nobr>- Approximate size    </nobr></div>
<div style="position:absolute;top:62535;left:355"><nobr>: 101.25 KB</nobr></div>
<div style="position:absolute;top:62550;left:94"><nobr>─────────────────────────────────────────────────────────────────</nobr></div>
<div style="position:absolute;top:62565;left:96"><nobr>NOTE: (*) Properties calculated considering a constant  geotransform and data</nobr></div>
<div style="position:absolute;top:62580;left:85"><nobr>type.</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:62623;left:85"><nobr>We can join two image collections using $merge.</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:62683;left:85"><nobr>col3&lt;-col2$merge(col1)</nobr></div>
<div style="position:absolute;top:62698;left:85"><nobr>ee_print(col3)</nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:13px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:62713;left:85"><nobr>──────────────────────────────── Earth Engine ImageCollection ──</nobr></div>
<div style="position:absolute;top:62728;left:85"><nobr>ImageCollection Metadata:</nobr></div>
<div style="position:absolute;top:62743;left:94"><nobr>- Class    </nobr></div>
<div style="position:absolute;top:62743;left:355"><nobr>: ee$ImageCollection</nobr></div>
<div style="position:absolute;top:62758;left:94"><nobr>- Number of Images    </nobr></div>
<div style="position:absolute;top:62758;left:355"><nobr>: 4</nobr></div>
<div style="position:absolute;top:62773;left:94"><nobr>- Number of Properties     : 0</nobr></div>
<div style="position:absolute;top:62788;left:94"><nobr>- Number of Pixels*    </nobr></div>
<div style="position:absolute;top:62788;left:355"><nobr>: 259200</nobr></div>
<div style="position:absolute;top:62803;left:94"><nobr>- Approximate size*    </nobr></div>
<div style="position:absolute;top:62803;left:355"><nobr>: 405.00 KB</nobr></div>
<div style="position:absolute;top:62818;left:85"><nobr>Image Metadata (img_index = 0):</nobr></div>
<div style="position:absolute;top:62833;left:94"><nobr>- ID    </nobr></div>
<div style="position:absolute;top:62833;left:355"><nobr>: no_id</nobr></div>
<div style="position:absolute;top:62848;left:94"><nobr>- Number of Bands    </nobr></div>
<div style="position:absolute;top:62848;left:355"><nobr>: 1</nobr></div>
<div style="position:absolute;top:62863;left:94"><nobr>- Bands names    </nobr></div>
<div style="position:absolute;top:62863;left:355"><nobr>: constant</nobr></div>
<div style="position:absolute;top:62878;left:94"><nobr>- Number of Properties     : 1</nobr></div>
<div style="position:absolute;top:62893;left:94"><nobr>- Number of Pixels*    </nobr></div>
<div style="position:absolute;top:62893;left:355"><nobr>: 64800</nobr></div>
<div style="position:absolute;top:62908;left:94"><nobr>- Approximate size*    </nobr></div>
<div style="position:absolute;top:62908;left:355"><nobr>: 101.25 KB</nobr></div>
<div style="position:absolute;top:62923;left:85"><nobr>Band Metadata (img_band = 'constant'):</nobr></div>
<div style="position:absolute;top:62938;left:94"><nobr>- EPSG (SRID)    </nobr></div>
<div style="position:absolute;top:62938;left:355"><nobr>: 4326</nobr></div>
<div style="position:absolute;top:62953;left:94"><nobr>- proj4string    </nobr></div>
<div style="position:absolute;top:62953;left:355"><nobr>: +proj=longlat +datum=WGS84 +no_defs</nobr></div>
<div style="position:absolute;top:62968;left:94"><nobr>- Geotransform    </nobr></div>
<div style="position:absolute;top:62968;left:355"><nobr>: 1 0 0 0 1 0</nobr></div>
<div style="position:absolute;top:62983;left:94"><nobr>- Nominal scale (meters)     : 111319.5</nobr></div>
<div style="position:absolute;top:62998;left:94"><nobr>- Dimensions    </nobr></div>
<div style="position:absolute;top:62998;left:355"><nobr>: 360 180</nobr></div>
<div style="position:absolute;top:63013;left:94"><nobr>- Number of Pixels    </nobr></div>
<div style="position:absolute;top:63013;left:355"><nobr>: 64800</nobr></div>
<div style="position:absolute;top:63028;left:94"><nobr>- Data type    </nobr></div>
<div style="position:absolute;top:63028;left:355"><nobr>: INT</nobr></div>
<div style="position:absolute;top:63043;left:94"><nobr>- Approximate size    </nobr></div>
<div style="position:absolute;top:63043;left:355"><nobr>: 101.25 KB</nobr></div>
<div style="position:absolute;top:63058;left:94"><nobr>─────────────────────────────────────────────────────────────────</nobr></div>
<div style="position:absolute;top:63073;left:96"><nobr>NOTE: (*) Properties calculated considering a constant  geotransform and data</nobr></div>
<div style="position:absolute;top:63088;left:85"><nobr>type.</nobr></div>
</span></font>

<div style="position:absolute;top:63275;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="52"><b>Page 52</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:63362;left:85"><nobr>And we can create an image collection using existing images from</nobr></div>
<div style="position:absolute;top:63393;left:85"><nobr>geotiffs in the cloud storage.</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:63453;left:85"><nobr>uri1&lt;-'gs://gcp-public-data-landsat/LT05/01/001/001/</nobr></div>
<div style="position:absolute;top:63468;left:85"><nobr>LT05_L1GS_001001_19910509_20180220_01_T2/</nobr></div>
<div style="position:absolute;top:63483;left:85"><nobr>LT05_L1GS_001001_19910509_20180220_01_T2_B5.TIF'</nobr></div>
<div style="position:absolute;top:63498;left:85"><nobr>uri2&lt;-'gs://gcp-public-data-landsat/LT05/01/001/001/</nobr></div>
<div style="position:absolute;top:63513;left:85"><nobr>LT05_L1GS_001001_19910509_20180220_01_T2/</nobr></div>
<div style="position:absolute;top:63528;left:85"><nobr>LT05_L1GS_001001_19910509_20180220_01_T2_B4.TIF'</nobr></div>
<div style="position:absolute;top:63543;left:85"><nobr>uri3&lt;-'gs://gcp-public-data-landsat/LT05/01/001/001/</nobr></div>
<div style="position:absolute;top:63558;left:85"><nobr>LT05_L1GS_001001_19910509_20180220_01_T2/</nobr></div>
<div style="position:absolute;top:63573;left:85"><nobr>LT05_L1GS_001001_19910509_20180220_01_T2_B3.TIF'</nobr></div>
<div style="position:absolute;top:63588;left:85"><nobr>uri4&lt;-'gs://gcp-public-data-landsat/LT05/01/001/001/</nobr></div>
<div style="position:absolute;top:63603;left:85"><nobr>LT05_L1GS_001001_19910509_20180220_01_T2/</nobr></div>
<div style="position:absolute;top:63618;left:85"><nobr>LT05_L1GS_001001_19910509_20180220_01_T2_B2.TIF'</nobr></div>
<div style="position:absolute;top:63633;left:85"><nobr>image1&lt;-ee$Image$loadGeoTIFF(uri1)</nobr></div>
<div style="position:absolute;top:63648;left:85"><nobr>image2&lt;-ee$Image$loadGeoTIFF(uri2)</nobr></div>
<div style="position:absolute;top:63663;left:85"><nobr>image3&lt;-ee$Image$loadGeoTIFF(uri3)</nobr></div>
<div style="position:absolute;top:63678;left:85"><nobr>image4&lt;-ee$Image$loadGeoTIFF(uri4)</nobr></div>
<div style="position:absolute;top:63693;left:85"><nobr>col&lt;-ee$ImageCollection$fromImages(list(image1,image2,image3,image4))</nobr></div>
<div style="position:absolute;top:63708;left:85"><nobr>rgb&lt;-col$toBands()$rename(c('B5', 'B4', 'B3', 'B2'))</nobr></div>
<div style="position:absolute;top:63723;left:85"><nobr>Map$centerObject(rgb)</nobr></div>
<div style="position:absolute;top:63738;left:85"><nobr>Map$addLayer(rgb, list(bands=c('B5', 'B3', 'B2'), min=0, max= 1000), 'rgb')</nobr></div>
</span></font>
<font size="4" face="Times"><span style="font-size:22px;font-family:Times">
<div style="position:absolute;top:63769;left:85"><nobr><b>Filtering ee$ImageCollection</b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:63807;left:85"><nobr>Filtering is a very important topic when working with Image Colletions.</nobr></div>
<div style="position:absolute;top:63838;left:85"><nobr>With it we can limit by area, date and type the ones we are going to</nobr></div>
<div style="position:absolute;top:63869;left:85"><nobr>use. The next example we fiter an image collection by date, area and</nobr></div>
<div style="position:absolute;top:63900;left:85"><nobr>an image quality metadata value.</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:63929;left:85"><nobr>col&lt;-ee$ImageCollection('LANDSAT/LT05/C01/T2')$filterDate('1987-01-01','1990-05-</nobr></div>
<div style="position:absolute;top:63944;left:85"><nobr>01')$filterBounds(ee$Geometry$Point(25.8544,-18.08874))</nobr></div>
<div style="position:absolute;top:63959;left:85"><nobr>filtered &lt;- col$filterMetadata('IMAGE_QUALITY','equals',9)</nobr></div>
<div style="position:absolute;top:63974;left:85"><nobr>notSoGood&lt;-ee$Algorithms$Landsat$simpleComposite(col,75,3)</nobr></div>
<div style="position:absolute;top:63989;left:85"><nobr>good&lt;-ee$Algorithms$Landsat$simpleComposite(filtered,75,3)</nobr></div>
<div style="position:absolute;top:64004;left:85"><nobr>Map$setCenter(25.8544,-18.08874,13)</nobr></div>
<div style="position:absolute;top:64019;left:85"><nobr>Map$addLayer(notSoGood,</nobr></div>
<div style="position:absolute;top:64034;left:202"><nobr>list(bands=c('B3','B2','B1'), gain=3.5),</nobr></div>
<div style="position:absolute;top:64049;left:202"><nobr>'Bad Composition')</nobr></div>
<div style="position:absolute;top:64064;left:85"><nobr>Map$addLayer(good,</nobr></div>
<div style="position:absolute;top:64079;left:202"><nobr>list(bands=c('B3', 'B2', 'B1'), gain=3.5),</nobr></div>
<div style="position:absolute;top:64094;left:202"><nobr>'Good Composition')</nobr></div>
</span></font>
<font size="4" face="Times"><span style="font-size:22px;font-family:Times">
<div style="position:absolute;top:64151;left:85"><nobr><b>ee$ImageCollection informations and metadata</b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:64189;left:85"><nobr>We can use functions to extract general information and matadata</nobr></div>
<div style="position:absolute;top:64220;left:85"><nobr>from an image collection.</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:64281;left:85"><nobr>col&lt;-ee$ImageCollection('LANDSAT/LC08/C01/T1_TOA')</nobr></div>
<div style="position:absolute;top:64296;left:85"><nobr>$filter(ee$Filter$eq('WRS_PATH',44))$filter(ee$Filter$eq('WRS_ROW',34))</nobr></div>
<div style="position:absolute;top:64311;left:85"><nobr>$filterDate('2014-03-01', '2014-08-01')</nobr></div>
<div style="position:absolute;top:64326;left:85"><nobr>ee_print(col)</nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:13px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:64341;left:85"><nobr>───────────────────────────────── Earth Engine ImageCollection ──</nobr></div>
<div style="position:absolute;top:64356;left:85"><nobr>ImageCollection Metadata:</nobr></div>
<div style="position:absolute;top:64371;left:94"><nobr>- Class    </nobr></div>
<div style="position:absolute;top:64371;left:319"><nobr>: ee$ImageCollection</nobr></div>
<div style="position:absolute;top:64386;left:94"><nobr>- Number of Images     : 9</nobr></div>
</span></font>

<div style="position:absolute;top:64537;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="53"><b>Page 53</b></a></font></td></tr></tbody></table></div><font size="3" color="#2a6099" face="Times"><span style="font-size:13px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:64622;left:94"><nobr>- Number of Properties   : 41</nobr></div>
<div style="position:absolute;top:64637;left:94"><nobr>- Number of Pixels*     : 6435271800</nobr></div>
<div style="position:absolute;top:64652;left:94"><nobr>- Approximate size*     : 111.20 GB</nobr></div>
<div style="position:absolute;top:64667;left:85"><nobr>Image Metadata (img_index = 0):</nobr></div>
<div style="position:absolute;top:64682;left:94"><nobr>- ID    </nobr></div>
<div style="position:absolute;top:64682;left:265"><nobr>: LANDSAT/LC08/C01/T1_TOA/LC08_044034_20140318</nobr></div>
<div style="position:absolute;top:64697;left:94"><nobr>- Time start    </nobr></div>
<div style="position:absolute;top:64697;left:319"><nobr>: 2014-03-18 18:46:32</nobr></div>
<div style="position:absolute;top:64712;left:94"><nobr>- Number of Bands    </nobr></div>
<div style="position:absolute;top:64712;left:319"><nobr>: 12</nobr></div>
<div style="position:absolute;top:64727;left:94"><nobr>- Bands names    </nobr></div>
<div style="position:absolute;top:64727;left:319"><nobr>: B1 B2 B3 B4 B5 B6 B7 B8 B9 B10 B11 BQA</nobr></div>
<div style="position:absolute;top:64742;left:94"><nobr>- Number of Properties   : 118</nobr></div>
<div style="position:absolute;top:64757;left:94"><nobr>- Number of Pixels*     : 715030200</nobr></div>
<div style="position:absolute;top:64772;left:94"><nobr>- Approximate size*     : 12.36 GB</nobr></div>
<div style="position:absolute;top:64787;left:85"><nobr>Band Metadata (img_band = 'B1'):</nobr></div>
<div style="position:absolute;top:64802;left:94"><nobr>- EPSG (SRID)    </nobr></div>
<div style="position:absolute;top:64802;left:319"><nobr>: 32610</nobr></div>
<div style="position:absolute;top:64817;left:94"><nobr>- proj4string : +proj=utm +zone=10 +datum=WGS84 +units=m +no_defs</nobr></div>
<div style="position:absolute;top:64832;left:94"><nobr>- Geotransform    </nobr></div>
<div style="position:absolute;top:64832;left:319"><nobr>: 30 0 460785 0 -30 4264215</nobr></div>
<div style="position:absolute;top:64847;left:94"><nobr>- Nominal scale (meters) : 30</nobr></div>
<div style="position:absolute;top:64862;left:94"><nobr>- Dimensions    </nobr></div>
<div style="position:absolute;top:64862;left:319"><nobr>: 7650 7789</nobr></div>
<div style="position:absolute;top:64877;left:94"><nobr>- Number of Pixels     : 59585850</nobr></div>
<div style="position:absolute;top:64892;left:94"><nobr>- Data type    </nobr></div>
<div style="position:absolute;top:64892;left:319"><nobr>: FLOAT</nobr></div>
<div style="position:absolute;top:64907;left:94"><nobr>- Approximate size     : 1.03 GB</nobr></div>
<div style="position:absolute;top:64922;left:94"><nobr>──────────────────────────────────────────────────────────────────</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:64939;left:85"><nobr>ee_print() informs you a large number of metadata and parameters</nobr></div>
<div style="position:absolute;top:64970;left:85"><nobr>of an image collection. We can also get specifics information with</nobr></div>
<div style="position:absolute;top:65001;left:85"><nobr>functions as the ones below:</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:65045;left:85"><nobr>size&lt;-col$size()</nobr></div>
<div style="position:absolute;top:65060;left:85"><nobr>cat("Size: ", size$getInfo(),'\n')</nobr></div>
<div style="position:absolute;top:65090;left:85"><nobr>range&lt;-col$reduceColumns(ee$Reducer$minMax(),list("system:time_start"))</nobr></div>
<div style="position:absolute;top:65105;left:85"><nobr>col_min &lt;- eedate_to_rdate(range$get("min"))</nobr></div>
<div style="position:absolute;top:65120;left:85"><nobr>col_max &lt;- eedate_to_rdate(range$get("max"))</nobr></div>
<div style="position:absolute;top:65135;left:85"><nobr>cat("Date range: ", as.character(col_min),as.character(col_max),'\n')</nobr></div>
<div style="position:absolute;top:65165;left:85"><nobr>sunStats &lt;- col$aggregate_stats("SUN_ELEVATION")</nobr></div>
<div style="position:absolute;top:65180;left:85"><nobr>sunStats$getInfo()</nobr></div>
<div style="position:absolute;top:65210;left:85"><nobr>image &lt;- ee$Image(coleção$sort("CLOUD_COVER")$first())</nobr></div>
<div style="position:absolute;top:65225;left:85"><nobr>image$getInfo()</nobr></div>
<div style="position:absolute;top:65255;left:85"><nobr>recent &lt;- col$sort("system:time_start", FALSE)$limit(10)</nobr></div>
<div style="position:absolute;top:65270;left:85"><nobr>recent$getInfo()</nobr></div>
</span></font>
<font size="4" face="Times"><span style="font-size:22px;font-family:Times">
<div style="position:absolute;top:65319;left:85"><nobr><b>Visualizing  ee$ImageCollection</b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:65357;left:85"><nobr>Image collection are good to create image timelines over a certain</nobr></div>
<div style="position:absolute;top:65388;left:85"><nobr>area or region. We will create a series of examples using animations</nobr></div>
<div style="position:absolute;top:65419;left:85"><nobr>to illustrate how it can be done.</nobr></div>
<div style="position:absolute;top:65450;left:85"><nobr>In the first example we use the MODIS NDVI composition. We</nobr></div>
<div style="position:absolute;top:65481;left:85"><nobr>selected the Northeast region of Brazil and we created an animation</nobr></div>
<div style="position:absolute;top:65512;left:85"><nobr>using the dates from January the 1st 2013 to January the 1st 2014.</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:65573;left:85"><nobr>col&lt;-ee$ImageCollection('MODIS/006/MOD13A2')$select('NDVI')</nobr></div>
<div style="position:absolute;top:65588;left:85"><nobr>mask&lt;-ee$FeatureCollection('USDOS/LSIB_SIMPLE/2017')</nobr></div>
<div style="position:absolute;top:65603;left:85"><nobr>$filter(ee$Filter$eq('wld_rgn', 'South America'))</nobr></div>
<div style="position:absolute;top:65618;left:85"><nobr>region&lt;-ee$Geometry$Polygon(list(c(-48.0, 0.0),</nobr></div>
<div style="position:absolute;top:65633;left:121"><nobr>c(-48.0, -17.0),c(-34.0, -17.0),c(-34.0, 0.0)))</nobr></div>
<div style="position:absolute;top:65648;left:85"><nobr>col&lt;-col$map(function(img){</nobr></div>
<div style="position:absolute;top:65663;left:94"><nobr>doy&lt;-ee$Date(img$get('system:time_start'))$getRelative('day', 'year')</nobr></div>
<div style="position:absolute;top:65678;left:94"><nobr>return (img$set('doy', doy))})</nobr></div>
<div style="position:absolute;top:65693;left:85"><nobr>distinctDOY&lt;-col$filterDate('2013-01-01', '2014-01-01')</nobr></div>
</span></font>

<div style="position:absolute;top:65799;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="54"><b>Page 54</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:65884;left:85"><nobr>filter&lt;-ee$Filter$equals(leftField='doy', rightField= 'doy')</nobr></div>
<div style="position:absolute;top:65899;left:85"><nobr>join&lt;-ee$Join$saveAll('doy_matches')</nobr></div>
<div style="position:absolute;top:65914;left:85"><nobr>joinCol&lt;-ee$ImageCollection(join$apply(distinctDOY, col, filter))</nobr></div>
<div style="position:absolute;top:65929;left:85"><nobr>comp&lt;-joinCol$map(function(img) {</nobr></div>
<div style="position:absolute;top:65944;left:103"><nobr>doyCol&lt;-ee$ImageCollection$fromImages(img$get('doy_matches'))</nobr></div>
<div style="position:absolute;top:65959;left:103"><nobr>return (doyCol$reduce(ee$Reducer$median()))})</nobr></div>
<div style="position:absolute;top:65974;left:85"><nobr>images&lt;-comp$map(function(img) {</nobr></div>
<div style="position:absolute;top:65989;left:103"><nobr>return (img$visualize('NDVI_median')$clip(mask))})</nobr></div>
<div style="position:absolute;top:66004;left:85"><nobr>gifParams&lt;-list('region'=region,'dimensions'=600,'crs'='EPSG:3857',</nobr></div>
<div style="position:absolute;top:66019;left:85"><nobr>'framesPerSecond'=5,palette=c(</nobr></div>
<div style="position:absolute;top:66034;left:121"><nobr>'#FFFFFF', '#CE7E45', '#DF923D', '#F1B555', '#FCD163', '#99B718', '#74A901',</nobr></div>
<div style="position:absolute;top:66049;left:121"><nobr>'#66A000', '#529400', '#3E8601', '#207401', '#056201', '#004C00', '#023B01',</nobr></div>
<div style="position:absolute;top:66064;left:121"><nobr>'#012E01', '#011D01', '#011301'),min=110.0,max=250.0)</nobr></div>
<div style="position:absolute;top:66079;left:85"><nobr>print(images$getVideoThumbURL(gifParams))</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:66128;left:85"><nobr>The result is a link to the animation.</nobr></div>
<div style="position:absolute;top:66159;left:85"><nobr>Alternatively click this link to see it <font color="#000080"><a href="http://amazeone.com.br/barebra/pandora/ne.gif">http://amazeone.com.br/barebra/pandora/ne.gif</a></font></nobr></div>
<div style="position:absolute;top:66221;left:85"><nobr>Now we will create an animation with the temperature variation</nobr></div>
<div style="position:absolute;top:66252;left:85"><nobr>between 20 and 23 of June 2018 for the South America using NOAA</nobr></div>
<div style="position:absolute;top:66283;left:85"><nobr>data.</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:66312;left:85"><nobr>aoi&lt;-ee$Geometry$Polygon(list(c(-90,15),c(-90,-55),c(-35,-55),c(-35,15)))</nobr></div>
<div style="position:absolute;top:66327;left:85"><nobr>tempCol&lt;-ee$ImageCollection('NOAA/GFS0P25')$filterDate('2018-06-20', '2018-06-</nobr></div>
<div style="position:absolute;top:66342;left:85"><nobr>23')$limit(72)$select('temperature_2m_above_ground')</nobr></div>
<div style="position:absolute;top:66357;left:85"><nobr>videoArgs&lt;-list(dimensions=600, region=aoi,framesPerSecond=7,crs='EPSG:3857',</nobr></div>
<div style="position:absolute;top:66372;left:103"><nobr>min=-40.0, max=35.0,palette=c('blue','purple','cyan','green','yellow','red'))</nobr></div>
<div style="position:absolute;top:66387;left:85"><nobr>print(tempCol$getVideoThumbURL(videoArgs))</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:66436;left:85"><nobr>The result is a link to the animation.</nobr></div>
<div style="position:absolute;top:66467;left:85"><nobr>Alternatively click this link to see it <font color="#000080"><a href="http://amazeone.com.br/barebra/pandora/sa.gif">http://amazeone.com.br/barebra/pandora/sa.gif</a></font></nobr></div>
<div style="position:absolute;top:66529;left:85"><nobr>We can see each one of frames used by the animation above using.</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:66558;left:85"><nobr>filmArgs&lt;-list(dimensions=256,region=aoi,crs='EPSG:3857',</nobr></div>
<div style="position:absolute;top:66573;left:103"><nobr>min=-40.0,max=35.0,palette=c('blue','purple','cyan','green','yellow','red'))</nobr></div>
<div style="position:absolute;top:66588;left:85"><nobr>print(tempCol$getFilmstripThumbURL(filmArgs))</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:66636;left:85"><nobr>The result is a link to the frames image.</nobr></div>
<div style="position:absolute;top:66667;left:85"><nobr>Use  this link to see it <font color="#000080"><a href="http://amazeone.com.br/barebra/pandora/filmstrip.png">http://amazeone.com.br/barebra/pandora/filmstrip.png</a></font></nobr></div>
</span></font>

<div style="position:absolute;top:67061;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="55"><b>Page 55</b></a></font></td></tr></tbody></table></div><font size="4" face="Times"><span style="font-size:22px;font-family:Times">
<div style="position:absolute;top:67162;left:85"><nobr><b>Advanced visualization techniques using ee$ImageCollection</b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:67200;left:85"><nobr>In the next examples we will see how to achieve advanced and</nobr></div>
<div style="position:absolute;top:67231;left:85"><nobr>integrated results using image collection.</nobr></div>
<div style="position:absolute;top:67293;left:85"><nobr>In this example we add a feature object to the animation.</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:67322;left:85"><nobr>tempCol&lt;-ee$ImageCollection('NOAA/GFS0P25')$filterDate('2018-06-22','2018-06-</nobr></div>
<div style="position:absolute;top:67337;left:85"><nobr>23')$limit(24)$select('temperature_2m_above_ground')</nobr></div>
<div style="position:absolute;top:67352;left:85"><nobr>tempColVis&lt;-tempCol$map(function(img){return (img)})</nobr></div>
<div style="position:absolute;top:67367;left:85"><nobr>southAmCol&lt;-ee$FeatureCollection('USDOS/LSIB_SIMPLE/2017')</nobr></div>
<div style="position:absolute;top:67382;left:85"><nobr>$filterMetadata('wld_rgn','equals','South America')</nobr></div>
<div style="position:absolute;top:67397;left:85"><nobr>southAmAoi&lt;-ee$Geometry$Rectangle(-90.6,-54.8,-28.4,17.4)</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:67445;left:85"><nobr>by creating overlays associated to the ImageCollection.</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:67474;left:85"><nobr>empty&lt;-ee$Image()$byte()</nobr></div>
<div style="position:absolute;top:67489;left:85"><nobr>southAmOutline&lt;-empty$paint(featureCollection=southAmCol,color=1,width=</nobr></div>
<div style="position:absolute;top:67504;left:85"><nobr>1)$visualize(palette='#000000')</nobr></div>
<div style="position:absolute;top:67519;left:85"><nobr>tempColOutline&lt;-tempColVis$map(function(img) {return</nobr></div>
<div style="position:absolute;top:67534;left:85"><nobr>(img$blend(southAmOutline))})</nobr></div>
<div style="position:absolute;top:67549;left:85"><nobr>videoArgs&lt;-list(dimensions=600,region=southAmAoi,framesPerSecond=7 ,</nobr></div>
<div style="position:absolute;top:67564;left:85"><nobr>crs='EPSG:3857',bands=c('vis-red'),min=-40.0, max=35.0,palette=c('blue',</nobr></div>
<div style="position:absolute;top:67579;left:85"><nobr>'purple', 'cyan', 'green', 'yellow', 'red'))</nobr></div>
<div style="position:absolute;top:67594;left:85"><nobr>print(tempColOutline$getVideoThumbURL(videoArgs))</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:67642;left:85"><nobr>The result is a link to the animation.</nobr></div>
<div style="position:absolute;top:67673;left:85"><nobr>Use this link to see it <font color="#000080">http://amazeone.com.br/barebra/pandora/sa_adv1.g  if<a href="http://amazeone.com.br/barebra/pandora/sa_adv1.gif"> </a></font></nobr></div>
<div style="position:absolute;top:67736;left:85"><nobr>Now we create a mask over the animation</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:67765;left:85"><nobr>empty&lt;-ee$Image()$byte()</nobr></div>
<div style="position:absolute;top:67780;left:85"><nobr>southAmOutline&lt;-empty$paint(featureCollection=southAmCol,color=1,width=</nobr></div>
<div style="position:absolute;top:67795;left:85"><nobr>1)$visualize(palette='#000000')</nobr></div>
<div style="position:absolute;top:67810;left:85"><nobr>tempColOutline&lt;-tempColVis$map(function(img) {return</nobr></div>
<div style="position:absolute;top:67825;left:85"><nobr>(img$blend(southAmOutline))})</nobr></div>
<div style="position:absolute;top:67840;left:85"><nobr>dullLayer&lt;-</nobr></div>
<div style="position:absolute;top:67855;left:85"><nobr>ee$Image$constant(200)$visualize(opacity=0.55,min=0,max=255,forceRgbOutput=TRUE)</nobr></div>
<div style="position:absolute;top:67870;left:85"><nobr>finalVisCol&lt;-tempColOutline$map(function(img){return (img$blend(dullLayer)</nobr></div>
<div style="position:absolute;top:67885;left:85"><nobr>$blend(img$clipToCollection(southAmCol)))})</nobr></div>
<div style="position:absolute;top:67900;left:85"><nobr>videoArgs&lt;-</nobr></div>
<div style="position:absolute;top:67915;left:85"><nobr>list(dimensions=600,region=southAmAoi,framesPerSecond=7,crs='EPSG:3857',bands=c(</nobr></div>
<div style="position:absolute;top:67930;left:85"><nobr>'vis-red'),min=-40.0, max=35.0,palette=c('blue', 'purple', 'cyan', 'green',</nobr></div>
<div style="position:absolute;top:67945;left:85"><nobr>'yellow', 'red'))</nobr></div>
<div style="position:absolute;top:67960;left:85"><nobr>print(finalVisCol$getVideoThumbURL(videoArgs))</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:68009;left:85"><nobr>The result is a link to the animation.</nobr></div>
<div style="position:absolute;top:68040;left:85"><nobr>Use this link to see it <font color="#000080">http://amazeone.com.br/barebra/pandora/sa_adv2  .g  if <a href="http://amazeone.com.br/barebra/pandora/sa_adv2.gif"> </a></font></nobr></div>
</span></font>

<div style="position:absolute;top:68323;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="56"><b>Page 56</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:68410;left:85"><nobr>Now adding a Hillshade to the animação.</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:68439;left:85"><nobr>hillshade&lt;-ee$Terrain$hillshade(ee$Image('USGS/SRTMGL1_003')$multiply(100))</nobr></div>
<div style="position:absolute;top:68454;left:85"><nobr>$clipToCollection(southAmCol)</nobr></div>
<div style="position:absolute;top:68469;left:85"><nobr>finalVisCol&lt;-tempColVis$map(function(img){</nobr></div>
<div style="position:absolute;top:68484;left:103"><nobr>return (hillshade$blend(img$clipToCollection(southAmCol)</nobr></div>
<div style="position:absolute;top:68499;left:85"><nobr>$visualize(opacity=0.5,palette=c('blue', 'purple', 'cyan', 'green', 'yellow',</nobr></div>
<div style="position:absolute;top:68514;left:85"><nobr>'red'),min=-40,max=35)))})</nobr></div>
<div style="position:absolute;top:68529;left:85"><nobr>videoArgs &lt;-list(dimensions=600,region=southAmAoi,framesPerSecond=7,</nobr></div>
<div style="position:absolute;top:68544;left:85"><nobr>crs='EPSG:3857')</nobr></div>
<div style="position:absolute;top:68559;left:85"><nobr>print(finalVisCol$getVideoThumbURL(videoArgs))</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:68608;left:85"><nobr>The result is a link to the animation.</nobr></div>
<div style="position:absolute;top:68639;left:85"><nobr>Use this link to see it <font color="#000080">http://amazeone.com.br/barebra/pandora/sa_adv3  .g  if<a href="http://amazeone.com.br/barebra/pandora/sa_adv3.gif"> </a></font></nobr></div>
<div style="position:absolute;top:68701;left:85"><nobr>In this last example we will create a transition animation using  image</nobr></div>
<div style="position:absolute;top:68732;left:85"><nobr>collections. The example will flicker from an image from the winter</nobr></div>
<div style="position:absolute;top:68764;left:85"><nobr>with another from the summer and we will use the country boundary as</nobr></div>
<div style="position:absolute;top:68795;left:85"><nobr>a mask.</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:68839;left:85"><nobr>aoi&lt;-ee$Geometry$Polygon(list(c(-90,15),c(-90,-55),c(-35,-55),c(-35,15)))</nobr></div>
<div style="position:absolute;top:68854;left:85"><nobr>temp&lt;-ee$ImageCollection('NOAA/GFS0P25')</nobr></div>
<div style="position:absolute;top:68869;left:85"><nobr><b>#summer in northern hemisphere</b></nobr></div>
<div style="position:absolute;top:68884;left:85"><nobr>summerSolTemp&lt;-temp$filterDate('2018-06-21', '2018-06-22')</nobr></div>
<div style="position:absolute;top:68899;left:85"><nobr>$filterMetadata('forecast_hours', 'equals', 12)$first()</nobr></div>
<div style="position:absolute;top:68914;left:85"><nobr>$select('temperature_2m_above_ground')</nobr></div>
<div style="position:absolute;top:68929;left:85"><nobr><b>#winter in northern hemisphere</b></nobr></div>
<div style="position:absolute;top:68944;left:85"><nobr>winterSolTemp&lt;-temp$filterDate('2018-12-22', '2018-12-23')</nobr></div>
<div style="position:absolute;top:68959;left:85"><nobr>$filterMetadata('forecast_hours', 'equals', 12)$first()</nobr></div>
<div style="position:absolute;top:68974;left:85"><nobr>$select('temperature_2m_above_ground')</nobr></div>
<div style="position:absolute;top:68989;left:85"><nobr><b>#combining the two collections</b></nobr></div>
<div style="position:absolute;top:69004;left:85"><nobr>tempCol&lt;-ee$ImageCollection(list(summerSolTemp$set('season',</nobr></div>
<div style="position:absolute;top:69019;left:85"><nobr>'summer'),winterSolTemp$set('season', 'winter')))</nobr></div>
<div style="position:absolute;top:69034;left:85"><nobr>countries&lt;-ee$FeatureCollection('USDOS/LSIB_SIMPLE/2017')</nobr></div>
<div style="position:absolute;top:69049;left:85"><nobr>tempColVis&lt;-tempCol$map(function(img) {</nobr></div>
<div style="position:absolute;top:69064;left:103"><nobr>return (img$clipToCollection(countries)$unmask(0)$copyProperties(img,</nobr></div>
<div style="position:absolute;top:69079;left:85"><nobr>img$propertyNames()))})</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:69127;left:85"><nobr>And creating the flicker visualization using:</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:69156;left:85"><nobr>videoArgs&lt;-list(dimensions=600,region=aoi,framesPerSecond=2,crs='EPSG:3857',</nobr></div>
<div style="position:absolute;top:69171;left:85"><nobr>bands=c('temperature_2m_above_ground'),min=-40.0, max=35.0,palette=c('blue',</nobr></div>
<div style="position:absolute;top:69186;left:85"><nobr>'purple', 'cyan', 'green', 'yellow', 'red'))</nobr></div>
<div style="position:absolute;top:69201;left:85"><nobr>print(tempColVis$getVideoThumbURL(videoArgs))</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:69249;left:85"><nobr>The result is a link to the animation.</nobr></div>
<div style="position:absolute;top:69280;left:85"><nobr>Use this link to see it <font color="#000080">http://amazeone.com.br/barebra/pandora/sa_  trans1.g  if <a href="http://amazeone.com.br/barebra/pandora/sa_trans1.gif"> </a></font></nobr></div>
</span></font>

<div style="position:absolute;top:69585;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="57"><b>Page 57</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:69672;left:85"><nobr>Some snapshots of the animations we created above:</nobr></div>
</span></font>

<div style="position:absolute;top:70847;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="58"><b>Page 58</b></a></font></td></tr></tbody></table></div><font size="4" face="Times"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:70951;left:85"><nobr><b>ee$Geometry</b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:70992;left:85"><nobr>Google earth engine deals with vector data using the ee$Geometry</nobr></div>
<div style="position:absolute;top:71024;left:85"><nobr>object. They are created in the geoJSON format. For more</nobr></div>
<div style="position:absolute;top:71055;left:85"><nobr>information about geoJSON please visit <font color="#000080"><a href="https://tools.ietf.org/html/rfc7946">https://tools.ietf.org/html/rfc7946 </a></font>.</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:71104;left:85"><nobr>point&lt;-ee$Geometry$Point(c(1.5, 1.5))</nobr></div>
<div style="position:absolute;top:71119;left:85"><nobr>point</nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:13px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:71134;left:85"><nobr>ee.Geometry({</nobr></div>
<div style="position:absolute;top:71149;left:103"><nobr>"type": "Point",</nobr></div>
<div style="position:absolute;top:71164;left:103"><nobr>"coordinates": [</nobr></div>
<div style="position:absolute;top:71179;left:121"><nobr>1.5,</nobr></div>
<div style="position:absolute;top:71194;left:121"><nobr>1.5</nobr></div>
<div style="position:absolute;top:71209;left:103"><nobr>]</nobr></div>
<div style="position:absolute;top:71224;left:85"><nobr>})</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:71239;left:85"><nobr>lineString&lt;-ee$Geometry$LineString(list(c(-35, -10), c(35, -10), c(35, 10), c(-</nobr></div>
<div style="position:absolute;top:71254;left:85"><nobr>35, 10)))</nobr></div>
<div style="position:absolute;top:71269;left:85"><nobr>lineString</nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:13px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:71284;left:85"><nobr>ee.Geometry({</nobr></div>
<div style="position:absolute;top:71299;left:103"><nobr>"type": "LineString",</nobr></div>
<div style="position:absolute;top:71314;left:103"><nobr>"coordinates": [</nobr></div>
<div style="position:absolute;top:71329;left:121"><nobr>[</nobr></div>
<div style="position:absolute;top:71344;left:139"><nobr>-35.0,</nobr></div>
<div style="position:absolute;top:71359;left:139"><nobr>-10.0</nobr></div>
<div style="position:absolute;top:71374;left:121"><nobr>],</nobr></div>
<div style="position:absolute;top:71389;left:121"><nobr>[</nobr></div>
<div style="position:absolute;top:71404;left:139"><nobr>35.0,</nobr></div>
<div style="position:absolute;top:71419;left:139"><nobr>-10.0</nobr></div>
<div style="position:absolute;top:71434;left:121"><nobr>],</nobr></div>
<div style="position:absolute;top:71449;left:121"><nobr>[</nobr></div>
<div style="position:absolute;top:71464;left:139"><nobr>35.0,</nobr></div>
<div style="position:absolute;top:71479;left:139"><nobr>10.0</nobr></div>
<div style="position:absolute;top:71494;left:121"><nobr>],</nobr></div>
<div style="position:absolute;top:71509;left:121"><nobr>[</nobr></div>
<div style="position:absolute;top:71524;left:139"><nobr>-35.0,</nobr></div>
<div style="position:absolute;top:71539;left:139"><nobr>10.0</nobr></div>
<div style="position:absolute;top:71554;left:121"><nobr>]</nobr></div>
<div style="position:absolute;top:71569;left:103"><nobr>]</nobr></div>
<div style="position:absolute;top:71584;left:85"><nobr>})</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:71599;left:85"><nobr>linearRing&lt;-ee$Geometry$LinearRing(list(c(-35,-10),c(35,-10),c(35,10),c(-</nobr></div>
<div style="position:absolute;top:71614;left:85"><nobr>35,10),c(-35,-10)))</nobr></div>
<div style="position:absolute;top:71629;left:85"><nobr>linearRing</nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:13px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:71644;left:85"><nobr>ee.Geometry({</nobr></div>
<div style="position:absolute;top:71659;left:103"><nobr>"type": "LinearRing",</nobr></div>
<div style="position:absolute;top:71674;left:103"><nobr>"coordinates": [</nobr></div>
<div style="position:absolute;top:71689;left:121"><nobr>[</nobr></div>
<div style="position:absolute;top:71704;left:139"><nobr>-35.0,</nobr></div>
<div style="position:absolute;top:71719;left:139"><nobr>-10.0</nobr></div>
<div style="position:absolute;top:71734;left:121"><nobr>],</nobr></div>
<div style="position:absolute;top:71749;left:121"><nobr>[</nobr></div>
<div style="position:absolute;top:71764;left:139"><nobr>35.0,</nobr></div>
<div style="position:absolute;top:71779;left:139"><nobr>-10.0</nobr></div>
<div style="position:absolute;top:71794;left:121"><nobr>],</nobr></div>
<div style="position:absolute;top:71809;left:121"><nobr>[</nobr></div>
<div style="position:absolute;top:71824;left:139"><nobr>35.0,</nobr></div>
<div style="position:absolute;top:71839;left:139"><nobr>10.0</nobr></div>
<div style="position:absolute;top:71854;left:121"><nobr>],</nobr></div>
<div style="position:absolute;top:71869;left:121"><nobr>[</nobr></div>
<div style="position:absolute;top:71884;left:139"><nobr>-35.0,</nobr></div>
<div style="position:absolute;top:71899;left:139"><nobr>10.0</nobr></div>
<div style="position:absolute;top:71914;left:121"><nobr>],</nobr></div>
<div style="position:absolute;top:71929;left:121"><nobr>[</nobr></div>
<div style="position:absolute;top:71944;left:139"><nobr>-35.0,</nobr></div>
<div style="position:absolute;top:71959;left:139"><nobr>-10.0</nobr></div>
<div style="position:absolute;top:71974;left:121"><nobr>]</nobr></div>
<div style="position:absolute;top:71989;left:103"><nobr>]</nobr></div>
<div style="position:absolute;top:72004;left:85"><nobr>})</nobr></div>
</span></font>

<div style="position:absolute;top:72109;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="59"><b>Page 59</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:72194;left:85"><nobr>retangle&lt;-ee$Geometry$Rectangle(-40,-20,40,20)</nobr></div>
<div style="position:absolute;top:72209;left:85"><nobr>retangle</nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:13px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:72224;left:85"><nobr>ee.Geometry({</nobr></div>
<div style="position:absolute;top:72239;left:103"><nobr>"type": "Polygon",</nobr></div>
<div style="position:absolute;top:72254;left:103"><nobr>"coordinates": [</nobr></div>
<div style="position:absolute;top:72269;left:121"><nobr>[</nobr></div>
<div style="position:absolute;top:72284;left:139"><nobr>[</nobr></div>
<div style="position:absolute;top:72299;left:157"><nobr>-40.0,</nobr></div>
<div style="position:absolute;top:72314;left:157"><nobr>20.0</nobr></div>
<div style="position:absolute;top:72329;left:139"><nobr>],</nobr></div>
<div style="position:absolute;top:72344;left:139"><nobr>[</nobr></div>
<div style="position:absolute;top:72359;left:157"><nobr>-40.0,</nobr></div>
<div style="position:absolute;top:72374;left:157"><nobr>-20.0</nobr></div>
<div style="position:absolute;top:72389;left:139"><nobr>],</nobr></div>
<div style="position:absolute;top:72404;left:139"><nobr>[</nobr></div>
<div style="position:absolute;top:72419;left:157"><nobr>40.0,</nobr></div>
<div style="position:absolute;top:72434;left:157"><nobr>-20.0</nobr></div>
<div style="position:absolute;top:72449;left:139"><nobr>],</nobr></div>
<div style="position:absolute;top:72464;left:139"><nobr>[</nobr></div>
<div style="position:absolute;top:72479;left:157"><nobr>40.0,</nobr></div>
<div style="position:absolute;top:72494;left:157"><nobr>20.0</nobr></div>
<div style="position:absolute;top:72509;left:139"><nobr>]</nobr></div>
<div style="position:absolute;top:72524;left:121"><nobr>]</nobr></div>
<div style="position:absolute;top:72539;left:103"><nobr>],</nobr></div>
<div style="position:absolute;top:72554;left:103"><nobr>"evenOdd": true</nobr></div>
<div style="position:absolute;top:72569;left:85"><nobr>})</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:72584;left:85"><nobr>polygon&lt;-ee$Geometry$Polygon(list(c(-5,40),c(65,40),c(65,60),c(-5,60),c(-5,60)))</nobr></div>
<div style="position:absolute;top:72599;left:85"><nobr>polygon</nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:13px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:72614;left:85"><nobr>ee.Geometry({</nobr></div>
<div style="position:absolute;top:72629;left:103"><nobr>"type": "Polygon",</nobr></div>
<div style="position:absolute;top:72644;left:103"><nobr>"coordinates": [</nobr></div>
<div style="position:absolute;top:72659;left:121"><nobr>[</nobr></div>
<div style="position:absolute;top:72674;left:139"><nobr>[</nobr></div>
<div style="position:absolute;top:72689;left:157"><nobr>-5.0,</nobr></div>
<div style="position:absolute;top:72704;left:157"><nobr>40.0</nobr></div>
<div style="position:absolute;top:72719;left:139"><nobr>],</nobr></div>
<div style="position:absolute;top:72734;left:139"><nobr>[</nobr></div>
<div style="position:absolute;top:72749;left:157"><nobr>65.0,</nobr></div>
<div style="position:absolute;top:72764;left:157"><nobr>40.0</nobr></div>
<div style="position:absolute;top:72779;left:139"><nobr>],</nobr></div>
<div style="position:absolute;top:72794;left:139"><nobr>[</nobr></div>
<div style="position:absolute;top:72809;left:157"><nobr>65.0,</nobr></div>
<div style="position:absolute;top:72824;left:157"><nobr>60.0</nobr></div>
<div style="position:absolute;top:72839;left:139"><nobr>],</nobr></div>
<div style="position:absolute;top:72854;left:139"><nobr>[</nobr></div>
<div style="position:absolute;top:72869;left:157"><nobr>-5.0,</nobr></div>
<div style="position:absolute;top:72884;left:157"><nobr>60.0</nobr></div>
<div style="position:absolute;top:72899;left:139"><nobr>],</nobr></div>
<div style="position:absolute;top:72914;left:139"><nobr>[</nobr></div>
<div style="position:absolute;top:72929;left:157"><nobr>-5.0,</nobr></div>
<div style="position:absolute;top:72944;left:157"><nobr>60.0</nobr></div>
<div style="position:absolute;top:72959;left:139"><nobr>]</nobr></div>
<div style="position:absolute;top:72974;left:121"><nobr>]</nobr></div>
<div style="position:absolute;top:72989;left:103"><nobr>],</nobr></div>
<div style="position:absolute;top:73004;left:103"><nobr>"evenOdd": true</nobr></div>
<div style="position:absolute;top:73019;left:85"><nobr>})</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:73067;left:85"><nobr>A ee$Geometry object can be constructed using multiple geometries.</nobr></div>
<div style="position:absolute;top:73098;left:85"><nobr>To extract an individual part of this multi ee$Geometry object into</nobr></div>
<div style="position:absolute;top:73129;left:85"><nobr>each one of its element we can use the function <font style="font-size:13px">geometry.geometries()</font>.</nobr></div>
<div style="position:absolute;top:73160;left:85"><nobr>For example. </nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:73189;left:85"><nobr>multiPoint&lt;-ee$Geometry$MultiPoint(list(c(-121.68, 39.91), c(-97.38, 40.34)))</nobr></div>
<div style="position:absolute;top:73204;left:85"><nobr>geometries&lt;-multiPoint$geometries()</nobr></div>
<div style="position:absolute;top:73219;left:85"><nobr>pt1&lt;-geometries$get(0)</nobr></div>
<div style="position:absolute;top:73234;left:85"><nobr>pt2&lt;-geometries$get(1)</nobr></div>
<div style="position:absolute;top:73249;left:85"><nobr>pt1</nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:13px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:73264;left:85"><nobr>ee.ComputedObject({</nobr></div>
</span></font>

<div style="position:absolute;top:73371;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="60"><b>Page 60</b></a></font></td></tr></tbody></table></div><font size="3" color="#2a6099" face="Times"><span style="font-size:13px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:73456;left:103"><nobr>"type": "Invocation",</nobr></div>
<div style="position:absolute;top:73471;left:103"><nobr>"arguments": {</nobr></div>
<div style="position:absolute;top:73486;left:121"><nobr>"list": {</nobr></div>
<div style="position:absolute;top:73501;left:139"><nobr>"type": "Invocation",</nobr></div>
<div style="position:absolute;top:73516;left:139"><nobr>"arguments": {</nobr></div>
<div style="position:absolute;top:73531;left:157"><nobr>"geometry": {</nobr></div>
<div style="position:absolute;top:73546;left:175"><nobr>"type": "MultiPoint",</nobr></div>
<div style="position:absolute;top:73561;left:175"><nobr>"coordinates": [</nobr></div>
<div style="position:absolute;top:73576;left:193"><nobr>[</nobr></div>
<div style="position:absolute;top:73591;left:211"><nobr>-121.68,</nobr></div>
<div style="position:absolute;top:73606;left:211"><nobr>39.91</nobr></div>
<div style="position:absolute;top:73621;left:193"><nobr>],</nobr></div>
<div style="position:absolute;top:73636;left:193"><nobr>[</nobr></div>
<div style="position:absolute;top:73651;left:211"><nobr>-97.38,</nobr></div>
<div style="position:absolute;top:73666;left:211"><nobr>40.34</nobr></div>
<div style="position:absolute;top:73681;left:193"><nobr>]</nobr></div>
<div style="position:absolute;top:73696;left:175"><nobr>]</nobr></div>
<div style="position:absolute;top:73711;left:157"><nobr>}</nobr></div>
<div style="position:absolute;top:73726;left:139"><nobr>},</nobr></div>
<div style="position:absolute;top:73741;left:139"><nobr>"functionName": "Geometry.geometries"</nobr></div>
<div style="position:absolute;top:73756;left:121"><nobr>},</nobr></div>
<div style="position:absolute;top:73771;left:121"><nobr>"index": 0.0</nobr></div>
<div style="position:absolute;top:73786;left:103"><nobr>},</nobr></div>
<div style="position:absolute;top:73801;left:103"><nobr>"functionName": "List.get"</nobr></div>
<div style="position:absolute;top:73816;left:85"><nobr>})</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:73831;left:85"><nobr>pt2</nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:13px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:73846;left:85"><nobr>ee.ComputedObject({</nobr></div>
<div style="position:absolute;top:73861;left:103"><nobr>"type": "Invocation",</nobr></div>
<div style="position:absolute;top:73876;left:103"><nobr>"arguments": {</nobr></div>
<div style="position:absolute;top:73891;left:121"><nobr>"list": {</nobr></div>
<div style="position:absolute;top:73906;left:139"><nobr>"type": "Invocation",</nobr></div>
<div style="position:absolute;top:73921;left:139"><nobr>"arguments": {</nobr></div>
<div style="position:absolute;top:73936;left:157"><nobr>"geometry": {</nobr></div>
<div style="position:absolute;top:73951;left:175"><nobr>"type": "MultiPoint",</nobr></div>
<div style="position:absolute;top:73966;left:175"><nobr>"coordinates": [</nobr></div>
<div style="position:absolute;top:73981;left:193"><nobr>[</nobr></div>
<div style="position:absolute;top:73996;left:211"><nobr>-121.68,</nobr></div>
<div style="position:absolute;top:74011;left:211"><nobr>39.91</nobr></div>
<div style="position:absolute;top:74026;left:193"><nobr>],</nobr></div>
<div style="position:absolute;top:74041;left:193"><nobr>[</nobr></div>
<div style="position:absolute;top:74056;left:211"><nobr>-97.38,</nobr></div>
<div style="position:absolute;top:74071;left:211"><nobr>40.34</nobr></div>
<div style="position:absolute;top:74086;left:193"><nobr>]</nobr></div>
<div style="position:absolute;top:74101;left:175"><nobr>]</nobr></div>
<div style="position:absolute;top:74116;left:157"><nobr>}</nobr></div>
<div style="position:absolute;top:74131;left:139"><nobr>},</nobr></div>
<div style="position:absolute;top:74146;left:139"><nobr>"functionName": "Geometry.geometries"</nobr></div>
<div style="position:absolute;top:74161;left:121"><nobr>},</nobr></div>
<div style="position:absolute;top:74176;left:121"><nobr>"index": 1.0</nobr></div>
<div style="position:absolute;top:74191;left:103"><nobr>},</nobr></div>
<div style="position:absolute;top:74206;left:103"><nobr>"functionName": "List.get"</nobr></div>
<div style="position:absolute;top:74221;left:85"><nobr>})</nobr></div>
</span></font>
<font size="4" face="Times"><span style="font-size:22px;font-family:Times">
<div style="position:absolute;top:74252;left:85"><nobr><b>Planar x Geodesic</b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:74290;left:85"><nobr>An ee$Geometry object geometry created using Earth Engine is</nobr></div>
<div style="position:absolute;top:74321;left:85"><nobr>geodesic (edges are the shortest path on the surface of a sphere)</nobr></div>
<div style="position:absolute;top:74352;left:85"><nobr>or planar (edges are the shortest path in a 2-D Cartesian plane).</nobr></div>
<div style="position:absolute;top:74383;left:85"><nobr>No one planar coordinate system is suitable for global collections of</nobr></div>
<div style="position:absolute;top:74414;left:85"><nobr>features, so Earth Engine's geometry constructors build geodesic</nobr></div>
<div style="position:absolute;top:74445;left:85"><nobr>geometries by default. To make a planar geometry, constructors have</nobr></div>
<div style="position:absolute;top:74476;left:85"><nobr>a geodesic parameter that can be set to false.</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:74505;left:85"><nobr>planarPolygon&lt;-ee$Geometry(polygon, {}, FALSE)</nobr></div>
</span></font>

<div style="position:absolute;top:74633;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="61"><b>Page 61</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:74720;left:85"><nobr>In the next example we illustrate the difference between a geodesic</nobr></div>
<div style="position:absolute;top:74751;left:85"><nobr>(red) and a planar (black) ee$Geometry object.</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:74780;left:85"><nobr>polygon &lt;- ee$Geometry$Polygon(list(c(-5, 40), c(65, 40), c(65, 60), c(-5, 60),</nobr></div>
<div style="position:absolute;top:74795;left:85"><nobr>c(-5, 60)))</nobr></div>
<div style="position:absolute;top:74810;left:85"><nobr>planarPolygon &lt;- ee$Geometry(polygon, {}, FALSE)</nobr></div>
<div style="position:absolute;top:74825;left:85"><nobr>polygon &lt;- ee$FeatureCollection(polygon)</nobr></div>
<div style="position:absolute;top:74840;left:85"><nobr>planarPolygon &lt;- ee$FeatureCollection(planarPolygon)</nobr></div>
<div style="position:absolute;top:74855;left:85"><nobr>Map$centerObject(polygon, zoom = 4)</nobr></div>
<div style="position:absolute;top:74870;left:85"><nobr>Map$addLayer(polygon, list(color = "FF0000"), "Geodesic") +</nobr></div>
<div style="position:absolute;top:74885;left:85"><nobr>Map$addLayer(planarPolygon, list(color = "000000"), "Planar")</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:74933;left:85"><nobr>The resulting map is:</nobr></div>
</span></font>
<font size="4" face="Times"><span style="font-size:22px;font-family:Times">
<div style="position:absolute;top:75379;left:85"><nobr><b>ee$Geometry information and metadata</b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:75417;left:85"><nobr>We just saw above how an ee$Geometry object is visualized in map,</nobr></div>
<div style="position:absolute;top:75448;left:85"><nobr>quite similar to how we do with image objects ee$image. Now we will</nobr></div>
<div style="position:absolute;top:75479;left:85"><nobr>see how to get information and metadata associated to a ee$Geometry</nobr></div>
<div style="position:absolute;top:75510;left:85"><nobr>object.</nobr></div>
<div style="position:absolute;top:75572;left:85"><nobr>Using  ee_print().</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:75616;left:85"><nobr>polygon &lt;- ee$Geometry$Polygon(list(c(-5, 40), c(65, 40), c(65, 60), c(-5, 60),</nobr></div>
<div style="position:absolute;top:75631;left:85"><nobr>c(-5, 60)))</nobr></div>
<div style="position:absolute;top:75646;left:85"><nobr>ee_print(polygon)</nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:13px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:75661;left:85"><nobr>─────────────────────────────────────────────────────── Earth Engine Geometry ──</nobr></div>
<div style="position:absolute;top:75676;left:85"><nobr>Geometry Metadata:</nobr></div>
<div style="position:absolute;top:75691;left:94"><nobr>- EPSG (SRID)    </nobr></div>
<div style="position:absolute;top:75691;left:355"><nobr>: 4326</nobr></div>
<div style="position:absolute;top:75706;left:94"><nobr>- proj4string    </nobr></div>
<div style="position:absolute;top:75706;left:355"><nobr>: +proj=longlat +datum=WGS84 +no_defs</nobr></div>
<div style="position:absolute;top:75721;left:94"><nobr>- Geotransform    </nobr></div>
<div style="position:absolute;top:75721;left:355"><nobr>: 1 0 0 0 1 0</nobr></div>
<div style="position:absolute;top:75736;left:94"><nobr>- Geodesic    </nobr></div>
<div style="position:absolute;top:75736;left:355"><nobr>: TRUE</nobr></div>
<div style="position:absolute;top:75751;left:94"><nobr>- WKT    </nobr></div>
<div style="position:absolute;top:75751;left:355"><nobr>: POLYGON</nobr></div>
<div style="position:absolute;top:75766;left:94"><nobr>──────────────────────────────────────────────────────────────────────────────</nobr></div>
</span></font>

<div style="position:absolute;top:75895;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="62"><b>Page 62</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:75982;left:85"><nobr>We can use the following to retrieve information about a ee$Geometry</nobr></div>
<div style="position:absolute;top:76013;left:85"><nobr>object:</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:76042;left:85"><nobr>polygon$area()$getInfo()</nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:13px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:76057;left:85"><nobr>[1] 9.918986e+12</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:76072;left:85"><nobr>polygon$perimeter()$getInfo()</nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:13px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:76087;left:85"><nobr>[1] 13979887</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:76102;left:85"><nobr>polygon$toGeoJSONString()</nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:13px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:76117;left:85"><nobr>[1] "{\"type\": \"Polygon\", \"coordinates\": [[[-5.0, 40.0], [65.0, 40.0],</nobr></div>
<div style="position:absolute;top:76132;left:85"><nobr>[65.0, 60.0], [-5.0, 60.0], [-5.0, 60.0]]], \"evenOdd\": true}"</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:76147;left:94"><nobr>polygon$type()$getInfo()</nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:13px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:76162;left:85"><nobr>[1] "Polygon"</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:76177;left:85"><nobr>polygon$coordinates()$getInfo()</nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:13px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:76192;left:85"><nobr>[[1]]</nobr></div>
<div style="position:absolute;top:76207;left:85"><nobr>[[1]][[1]]</nobr></div>
<div style="position:absolute;top:76222;left:85"><nobr>[1] -5 40</nobr></div>
<div style="position:absolute;top:76252;left:85"><nobr>[[1]][[2]]</nobr></div>
<div style="position:absolute;top:76267;left:85"><nobr>[1] 65 40</nobr></div>
<div style="position:absolute;top:76297;left:85"><nobr>[[1]][[3]]</nobr></div>
<div style="position:absolute;top:76312;left:85"><nobr>[1] 65 60</nobr></div>
<div style="position:absolute;top:76342;left:85"><nobr>[[1]][[4]]</nobr></div>
<div style="position:absolute;top:76357;left:85"><nobr>[1] -5 60</nobr></div>
<div style="position:absolute;top:76387;left:85"><nobr>[[1]][[5]]</nobr></div>
<div style="position:absolute;top:76402;left:85"><nobr>[1] -5 60</nobr></div>
<div style="position:absolute;top:76432;left:85"><nobr>[[1]][[6]]</nobr></div>
<div style="position:absolute;top:76447;left:85"><nobr>[1] -5 40</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:76477;left:85"><nobr>polygon$geodesic()$getInfo()</nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:13px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:76492;left:85"><nobr>[1] TRUE</nobr></div>
</span></font>
<font size="4" face="Times"><span style="font-size:22px;font-family:Times">
<div style="position:absolute;top:76523;left:85"><nobr><b>ee$Geometry operations</b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:76561;left:85"><nobr>ee$Geometry objects have some ways to execute geospatial operations</nobr></div>
<div style="position:absolute;top:76592;left:85"><nobr>in Google Earth Engine. We will cover a few of them now using two</nobr></div>
<div style="position:absolute;top:76623;left:85"><nobr>circular geometries.</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:76652;left:85"><nobr>poly1 &lt;- ee$Geometry$Point(c(-50, 30))$buffer(1e6)</nobr></div>
<div style="position:absolute;top:76666;left:85"><nobr>poly2 &lt;- ee$Geometry$Point(c(-40, 30))$buffer(1e6)</nobr></div>
<div style="position:absolute;top:76679;left:85"><nobr>Map$setCenter(-45, 30,4)</nobr></div>
<div style="position:absolute;top:76693;left:85"><nobr>Map$addLayer(poly1, list(color = "FF0000"), "poly1") +</nobr></div>
</span></font>

<div style="position:absolute;top:77157;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="63"><b>Page 63</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:77242;left:85"><nobr>Map$addLayer(poly2, list(color = "0000FF"), "poly2")</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:77256;left:85"><nobr>intersection &lt;- poly1$intersection(poly2, ee$ErrorMargin(1))</nobr></div>
<div style="position:absolute;top:77271;left:85"><nobr>Map$addLayer(intersection, list(color = "00FF00"), "intersection")</nobr></div>
<div style="position:absolute;top:77644;left:85"><nobr>union &lt;- poly1$union(poly2, ee$ErrorMargin(1))</nobr></div>
<div style="position:absolute;top:77659;left:85"><nobr>Map$addLayer(union, list(color = "FF00FF"), "union")</nobr></div>
<div style="position:absolute;top:78025;left:85"><nobr>diff1 &lt;- poly1$difference(poly2, ee$ErrorMargin(1))</nobr></div>
<div style="position:absolute;top:78040;left:85"><nobr>Map$addLayer(diff1, list(color = "FFFF00"), "difference")</nobr></div>
</span></font>

<div style="position:absolute;top:78419;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="64"><b>Page 64</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:78535;left:85"><nobr>symDiff &lt;- poly1$symmetricDifference(poly2, ee$ErrorMargin(1))</nobr></div>
<div style="position:absolute;top:78550;left:85"><nobr>Map$addLayer(symDiff, list(color = "000000"), "symmetric difference")</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:78875;left:85"><nobr>Calculating buffer and centroid of a geometry.</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:78904;left:85"><nobr>polygon&lt;-ee$Geometry$Polygon(list(c(-5,40),c(65,40),c(65,60),c(-5,60),c(-5,60)))</nobr></div>
<div style="position:absolute;top:78919;left:85"><nobr>buffer&lt;-polygon$buffer(1000000)</nobr></div>
<div style="position:absolute;top:78934;left:85"><nobr>centroid&lt;-polygon$centroid()</nobr></div>
<div style="position:absolute;top:78949;left:85"><nobr>Map$setCenter(35,50,3)</nobr></div>
<div style="position:absolute;top:78964;left:85"><nobr>Map$addLayer(buffer,list(),'buffer')</nobr></div>
</span></font>

<div style="position:absolute;top:79681;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="65"><b>Page 65</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:79766;left:85"><nobr>Map$addLayer(centroid,list(),'centroid')</nobr></div>
</span></font>
<font size="4" face="Times"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:80146;left:85"><nobr><b>ee$Feature</b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:80188;left:85"><nobr>No Earth Engine um objeto Feature é definido com uma característica</nobr></div>
<div style="position:absolute;top:80219;left:85"><nobr>GeoJSON. Especificamente, uma característica ou Feature é um objeto</nobr></div>
<div style="position:absolute;top:80250;left:85"><nobr>composto por uma propriedade geométrica com um objeto Geometry</nobr></div>
<div style="position:absolute;top:80281;left:85"><nobr>(ou vazio) e uma propriedade property com um dicionário de outras</nobr></div>
<div style="position:absolute;top:80312;left:85"><nobr>propriedades não geométricas ou atributos.</nobr></div>
<div style="position:absolute;top:80374;left:85"><nobr>Neste exemplo criamos um objeto ee$Feature.</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:80403;left:85"><nobr>polygon&lt;-ee$Geometry$Polygon(list(c(-35,-10),c(35,-10),c(35,10),c(-35,10),c(-</nobr></div>
<div style="position:absolute;top:80418;left:85"><nobr>35,-10)))</nobr></div>
<div style="position:absolute;top:80433;left:85"><nobr>polyFeature&lt;-ee$Feature(polygon,list(foo=42, bar='tart'))</nobr></div>
<div style="position:absolute;top:80448;left:85"><nobr>ee_print(polyFeature)</nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:13px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:80463;left:85"><nobr>─────────────────────────────────────────────────────── Earth Engine Feature ──</nobr></div>
<div style="position:absolute;top:80478;left:85"><nobr>Feature Metadata:</nobr></div>
<div style="position:absolute;top:80493;left:94"><nobr>- Number of Properties     : 2</nobr></div>
<div style="position:absolute;top:80508;left:85"><nobr>Geometry Metadata:</nobr></div>
<div style="position:absolute;top:80523;left:94"><nobr>- EPSG (SRID)    </nobr></div>
<div style="position:absolute;top:80523;left:355"><nobr>: 4326</nobr></div>
<div style="position:absolute;top:80538;left:94"><nobr>- proj4string    </nobr></div>
<div style="position:absolute;top:80538;left:355"><nobr>: +proj=longlat +datum=WGS84 +no_defs</nobr></div>
<div style="position:absolute;top:80553;left:94"><nobr>- Geotransform    </nobr></div>
<div style="position:absolute;top:80553;left:355"><nobr>: 1 0 0 0 1 0</nobr></div>
<div style="position:absolute;top:80568;left:94"><nobr>- Geodesic    </nobr></div>
<div style="position:absolute;top:80568;left:355"><nobr>: TRUE</nobr></div>
<div style="position:absolute;top:80583;left:94"><nobr>- WKT    </nobr></div>
<div style="position:absolute;top:80583;left:355"><nobr>: POLYGON</nobr></div>
<div style="position:absolute;top:80598;left:94"><nobr>───────────────────────────────────────────────────────────────────────────────</nobr></div>
</span></font>

<div style="position:absolute;top:80943;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="66"><b>Page 66</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:81030;left:85"><nobr>Plotting on a map.</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:81061;left:85"><nobr>Map$addLayer(polyFeature, list(), 'feature')</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:81485;left:85"><nobr>Information of this object can be accessed using:</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:81514;left:85"><nobr>polyFeature$getInfo()</nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:13px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:81529;left:85"><nobr>$type</nobr></div>
<div style="position:absolute;top:81544;left:85"><nobr>[1] "Feature"</nobr></div>
<div style="position:absolute;top:81574;left:85"><nobr>$geometry</nobr></div>
<div style="position:absolute;top:81589;left:85"><nobr>$geometry$type</nobr></div>
<div style="position:absolute;top:81604;left:85"><nobr>[1] "Polygon"</nobr></div>
<div style="position:absolute;top:81619;left:85"><nobr>$geometry$coordinates</nobr></div>
<div style="position:absolute;top:81634;left:85"><nobr>$geometry$coordinates[[1]]</nobr></div>
<div style="position:absolute;top:81649;left:85"><nobr>$geometry$coordinates[[1]][[1]]</nobr></div>
<div style="position:absolute;top:81664;left:85"><nobr>[1] -35 -10</nobr></div>
<div style="position:absolute;top:81679;left:85"><nobr>$geometry$coordinates[[1]][[2]]</nobr></div>
<div style="position:absolute;top:81694;left:85"><nobr>[1]  35 -10</nobr></div>
<div style="position:absolute;top:81709;left:85"><nobr>$geometry$coordinates[[1]][[3]]</nobr></div>
<div style="position:absolute;top:81724;left:85"><nobr>[1] 35 10</nobr></div>
<div style="position:absolute;top:81739;left:85"><nobr>$geometry$coordinates[[1]][[4]]</nobr></div>
<div style="position:absolute;top:81754;left:85"><nobr>[1] -35  10</nobr></div>
<div style="position:absolute;top:81769;left:85"><nobr>$geometry$coordinates[[1]][[5]]</nobr></div>
<div style="position:absolute;top:81784;left:85"><nobr>[1] -35 -10</nobr></div>
<div style="position:absolute;top:81814;left:85"><nobr>$properties</nobr></div>
<div style="position:absolute;top:81829;left:85"><nobr>$properties$bar</nobr></div>
<div style="position:absolute;top:81844;left:85"><nobr>[1] "tart"</nobr></div>
<div style="position:absolute;top:81874;left:85"><nobr>$properties$foo</nobr></div>
<div style="position:absolute;top:81889;left:85"><nobr>[1] 42</nobr></div>
</span></font>
<font size="4" face="Times"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:81923;left:85"><nobr><b>ee$FeatureCollection</b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:81964;left:85"><nobr>In the next example we will show how to create a eeFeatureCollection</nobr></div>
<div style="position:absolute;top:81996;left:85"><nobr>object and hoe to visualize it on a map.</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:82025;left:85"><nobr>fc &lt;- ee$FeatureCollection(list(</nobr></div>
<div style="position:absolute;top:82040;left:85"><nobr>ee$Feature(ee$Geometry$Polygon(list(c(-109.05, 41),c(-109.05,37),c(-</nobr></div>
<div style="position:absolute;top:82055;left:85"><nobr>102.05,37),c(-102.05,41))),list(name="Colorado",fill=1)),</nobr></div>
<div style="position:absolute;top:82070;left:85"><nobr>ee$Feature(ee$Geometry$Polygon(list(c(-114.05,37.0),c(-109.05,37.0),c(-</nobr></div>
<div style="position:absolute;top:82085;left:85"><nobr>109.05,41.0),c(-111.05,41.0),c(-111.05,42.0),c(-114.05,42.0))),list(name="Utah",</nobr></div>
<div style="position:absolute;top:82100;left:85"><nobr>fill=2))</nobr></div>
</span></font>

<div style="position:absolute;top:82205;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="67"><b>Page 67</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:82290;left:85"><nobr>))</nobr></div>
<div style="position:absolute;top:82305;left:85"><nobr>Map$setCenter(-107,41,6)</nobr></div>
<div style="position:absolute;top:82320;left:85"><nobr>Map$addLayer(eeObject=fc,visParams=list(palette=c("000000","FF0000","00FF00","00</nobr></div>
<div style="position:absolute;top:82335;left:85"><nobr>00FF"),max=3,opacity=0.5),name="Colorado &amp; Utah")</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:82734;left:85"><nobr>Now creating a ee$featureCollection using random points.</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:82763;left:85"><nobr>region&lt;-ee$Geometry$Rectangle(-119.224, 34.669, -99.536, 50.064)</nobr></div>
<div style="position:absolute;top:82778;left:85"><nobr>randomPoints&lt;-ee$FeatureCollection$randomPoints(region)</nobr></div>
<div style="position:absolute;top:82793;left:85"><nobr>Map$setCenter(-107,41,5)</nobr></div>
<div style="position:absolute;top:82808;left:85"><nobr>Map$addLayer(randomPoints, list(), 'Random Points')</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:83218;left:85"><nobr>Creating a ee$FeatureCollection based on Google Earth Engine data.</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:83247;left:85"><nobr>fc&lt;-ee$FeatureCollection('TIGER/2016/Roads')</nobr></div>
<div style="position:absolute;top:83262;left:85"><nobr>Map$setCenter(-73.9596, 40.7688, 12)</nobr></div>
<div style="position:absolute;top:83277;left:85"><nobr>Map$addLayer(fc, list(), 'NY Streets Census data')</nobr></div>
</span></font>

<div style="position:absolute;top:83467;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="68"><b>Page 68</b></a></font></td></tr></tbody></table></div><font size="4" face="Times"><span style="font-size:22px;font-family:Times">
<div style="position:absolute;top:83950;left:85"><nobr><b>ee$FeatureCollection visualization</b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:83989;left:85"><nobr>Visualizing an ee$FeatureCollection can the done in similar way that we</nobr></div>
<div style="position:absolute;top:84020;left:85"><nobr>do with other objects in GEE.</nobr></div>
<div style="position:absolute;top:84082;left:85"><nobr>Creating a ee$Feature Collection objct and visualizing it using</nobr></div>
<div style="position:absolute;top:84113;left:85"><nobr>standard parameters.</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:84142;left:85"><nobr>Map$setCenter(-50,15,3)</nobr></div>
<div style="position:absolute;top:84157;left:85"><nobr>ecoregions&lt;-ee$FeatureCollection('RESOLVE/ECOREGIONS/2017')</nobr></div>
<div style="position:absolute;top:84172;left:85"><nobr>Map$addLayer(ecoregions, list(), 'Standard')</nobr></div>
</span></font>

<div style="position:absolute;top:84729;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="69"><b>Page 69</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:84816;left:85"><nobr>Using visualization parameters:</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:84845;left:85"><nobr>Map$addLayer(ecoregions, list(color='FF0000'),'color')</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:85259;left:85"><nobr>Using the draw function.</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:85289;left:85"><nobr>Map$addLayer(ecoregions$draw(color='green',strokeWidth=5),list(),'draw')</nobr></div>
</span></font>

<div style="position:absolute;top:85991;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="70"><b>Page 70</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:86078;left:85"><nobr>We can categorize efficiently what we want to see using the</nobr></div>
<div style="position:absolute;top:86109;left:85"><nobr>ee$FeatureCollection properties. This is done using the function <font style="font-size:13px">paint</font>.</nobr></div>
<div style="position:absolute;top:86140;left:85"><nobr>Initially we will use a fixed value for the edges.</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:86184;left:85"><nobr>empty&lt;-ee$Image()$byte()</nobr></div>
<div style="position:absolute;top:86199;left:85"><nobr>outline&lt;-empty$paint(featureCollection=ecoregions,color=1,width=3)</nobr></div>
<div style="position:absolute;top:86214;left:85"><nobr>Map$addLayer(outline, list(palette='#FF0000'),'edges')</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:86618;left:85"><nobr>Using the parameter ‘BIOME_NUM’ to color the object edges creating</nobr></div>
<div style="position:absolute;top:86649;left:85"><nobr>an RGB palette.</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:86678;left:85"><nobr>outlines&lt;-empty$paint(featureCollection=ecoregions,color='BIOME_NUM',width=2)</nobr></div>
<div style="position:absolute;top:86693;left:85"><nobr>palette&lt;-c('#FF0000', '#00FF00', '#0000FF')</nobr></div>
<div style="position:absolute;top:86708;left:85"><nobr>Map$addLayer(outlines, list(palette=palette, max=14),'Color edges')</nobr></div>
</span></font>

<div style="position:absolute;top:87253;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="71"><b>Page 71</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:87340;left:85"><nobr>Using property ‘NNH’ to define the edge thickness.</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:87369;left:85"><nobr>outlines&lt;-</nobr></div>
<div style="position:absolute;top:87384;left:85"><nobr>empty$paint(featureCollection=ecoregions,color='BIOME_NUM',width='NNH')</nobr></div>
<div style="position:absolute;top:87399;left:85"><nobr>Map$addLayer(outlines, list(palette=palette, max=14),'Edges color and</nobr></div>
<div style="position:absolute;top:87414;left:85"><nobr>thickness')</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:87838;left:85"><nobr>Now color filling the features using ‘BIOME_NUM’.</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:87868;left:85"><nobr>fills&lt;-empty$paint(featureCollection=ecoregions,color='BIOME_NUM')</nobr></div>
<div style="position:absolute;top:87883;left:85"><nobr>Map$addLayer(fills, list(palette=palette, max=14), 'Color Fill')</nobr></div>
</span></font>

<div style="position:absolute;top:88515;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="72"><b>Page 72</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:88602;left:85"><nobr>To finalize, edges and color fill.</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:88631;left:85"><nobr>filledOutlines&lt;-empty$paint(ecoregions, 'BIOME_NUM')$paint(ecoregions, 0, 2)</nobr></div>
<div style="position:absolute;top:88646;left:85"><nobr>Map$addLayer(filledOutlines,list(palette= c('#000000',palette), max=14), 'Edges</nobr></div>
<div style="position:absolute;top:88661;left:85"><nobr>and color fill')</nobr></div>
</span></font>
<font size="4" face="Times"><span style="font-size:22px;font-family:Times">
<div style="position:absolute;top:89074;left:85"><nobr><b>ee$FeatureCollection information and metadata</b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:89112;left:85"><nobr>Retrieving information and metadata from a ee$FeatureCollection using</nobr></div>
<div style="position:absolute;top:89143;left:85"><nobr>ee_print().</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:89172;left:85"><nobr>sheds&lt;-ee$FeatureCollection('USGS/WBD/2017/HUC06')</nobr></div>
<div style="position:absolute;top:89187;left:85"><nobr>$filterBounds(ee$Geometry$Rectangle(-127.18,</nobr></div>
<div style="position:absolute;top:89187;left:530"><nobr>19.39,</nobr></div>
<div style="position:absolute;top:89187;left:633"><nobr>-62.75,</nobr></div>
<div style="position:absolute;top:89187;left:745"><nobr>51.29))</nobr></div>
<div style="position:absolute;top:89202;left:85"><nobr>$map(function(feature){</nobr></div>
<div style="position:absolute;top:89217;left:130"><nobr>num&lt;-ee$Number$parse(feature$get('areasqkm'))</nobr></div>
<div style="position:absolute;top:89232;left:130"><nobr>return (feature$set('areasqkm', num))</nobr></div>
<div style="position:absolute;top:89247;left:112"><nobr>})</nobr></div>
<div style="position:absolute;top:89262;left:85"><nobr>ee_print(sheds)</nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:13px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:89277;left:85"><nobr>────────────────────────────────────────────── Earth Engine FeatureCollection ──</nobr></div>
<div style="position:absolute;top:89292;left:85"><nobr>FeatureCollection Metadata:</nobr></div>
<div style="position:absolute;top:89307;left:94"><nobr>- Class    </nobr></div>
<div style="position:absolute;top:89307;left:355"><nobr>: ee$FeatureCollection</nobr></div>
<div style="position:absolute;top:89322;left:94"><nobr>- Number of Features    </nobr></div>
<div style="position:absolute;top:89322;left:355"><nobr>: 336</nobr></div>
<div style="position:absolute;top:89337;left:94"><nobr>- Number of Properties     : 14</nobr></div>
<div style="position:absolute;top:89352;left:85"><nobr>Feature Metadata:</nobr></div>
<div style="position:absolute;top:89367;left:94"><nobr>- Number of Properties     : 14</nobr></div>
<div style="position:absolute;top:89382;left:85"><nobr>Geometry Metadata (f_index = 0):</nobr></div>
<div style="position:absolute;top:89397;left:94"><nobr>- EPSG (SRID)    </nobr></div>
<div style="position:absolute;top:89397;left:355"><nobr>: 4326</nobr></div>
<div style="position:absolute;top:89412;left:94"><nobr>- proj4string    </nobr></div>
<div style="position:absolute;top:89412;left:355"><nobr>: +proj=longlat +datum=WGS84 +no_defs</nobr></div>
<div style="position:absolute;top:89427;left:94"><nobr>- Geotransform    </nobr></div>
<div style="position:absolute;top:89427;left:355"><nobr>: 1 0 0 0 1 0</nobr></div>
<div style="position:absolute;top:89442;left:94"><nobr>- Geodesic    </nobr></div>
<div style="position:absolute;top:89442;left:355"><nobr>: TRUE</nobr></div>
<div style="position:absolute;top:89457;left:94"><nobr>- WKT    </nobr></div>
<div style="position:absolute;top:89457;left:355"><nobr>: POLYGON</nobr></div>
<div style="position:absolute;top:89472;left:94"><nobr>───────────────────────────────────────────────────────────────────────────────</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:89487;left:85"><nobr>Map$setCenter(-90,35,4)</nobr></div>
<div style="position:absolute;top:89502;left:85"><nobr>Map$addLayer(sheds, list(), 'watersheds')</nobr></div>
</span></font>

<div style="position:absolute;top:89777;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="73"><b>Page 73</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:90232;left:85"><nobr>Getting specific information from an ee$FeatureCollection object.</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:90261;left:85"><nobr>sheds$size()$getInfo()</nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:13px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:90276;left:103"><nobr>[1] 336</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:90291;left:85"><nobr>sheds$aggregate_stats('areasqkm')$getInfo()</nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:13px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:90306;left:85"><nobr>$type</nobr></div>
<div style="position:absolute;top:90321;left:103"><nobr>[1] "DataDictionary"</nobr></div>
<div style="position:absolute;top:90336;left:85"><nobr>$values</nobr></div>
<div style="position:absolute;top:90351;left:94"><nobr>$values$max</nobr></div>
<div style="position:absolute;top:90366;left:103"><nobr>[1] 123604.1</nobr></div>
<div style="position:absolute;top:90381;left:94"><nobr>$values$mean</nobr></div>
<div style="position:absolute;top:90396;left:103"><nobr>[1] 25513.32</nobr></div>
<div style="position:absolute;top:90411;left:94"><nobr>$values$min</nobr></div>
<div style="position:absolute;top:90426;left:103"><nobr>[1] 601.89</nobr></div>
<div style="position:absolute;top:90441;left:94"><nobr>$values$sample_sd</nobr></div>
<div style="position:absolute;top:90456;left:103"><nobr>[1] 17082.47</nobr></div>
<div style="position:absolute;top:90471;left:94"><nobr>$values$sample_var</nobr></div>
<div style="position:absolute;top:90486;left:103"><nobr>[1] 291810677</nobr></div>
<div style="position:absolute;top:90501;left:94"><nobr>$values$sum</nobr></div>
<div style="position:absolute;top:90516;left:103"><nobr>[1] 8572476</nobr></div>
<div style="position:absolute;top:90531;left:94"><nobr>$values$sum_sq</nobr></div>
<div style="position:absolute;top:90546;left:103"><nobr>[1] 316468933433</nobr></div>
<div style="position:absolute;top:90561;left:94"><nobr>$values$total_count</nobr></div>
<div style="position:absolute;top:90576;left:103"><nobr>[1] 336</nobr></div>
<div style="position:absolute;top:90591;left:94"><nobr>$values$total_sd</nobr></div>
<div style="position:absolute;top:90606;left:103"><nobr>[1] 17057.03</nobr></div>
<div style="position:absolute;top:90621;left:94"><nobr>$values$total_var</nobr></div>
<div style="position:absolute;top:90636;left:103"><nobr>[1] 290942193</nobr></div>
<div style="position:absolute;top:90651;left:94"><nobr>$values$valid_count</nobr></div>
<div style="position:absolute;top:90666;left:103"><nobr>[1] 336</nobr></div>
<div style="position:absolute;top:90681;left:94"><nobr>$values$weight_sum</nobr></div>
<div style="position:absolute;top:90696;left:103"><nobr>[1] 336</nobr></div>
<div style="position:absolute;top:90711;left:94"><nobr>$values$weighted_sum</nobr></div>
<div style="position:absolute;top:90726;left:103"><nobr>[1] 8572476</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:90743;left:85"><nobr>Getting columns names from a feature of an ee$FeatureCollection</nobr></div>
<div style="position:absolute;top:90774;left:85"><nobr>object.</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:90803;left:85"><nobr>wdpa&lt;-ee$FeatureCollection("WCMC/WDPA/current/points")</nobr></div>
<div style="position:absolute;top:90818;left:85"><nobr>columns&lt;-wdpa$first()$getInfo()</nobr></div>
<div style="position:absolute;top:90833;left:85"><nobr>names(columns$properties)</nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:13px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:90848;left:94"><nobr>[1] "DESIG"     "DESIG_ENG"  "DESIG_TYPE" "GOV_TYPE"   "INT_CRIT" </nobr></div>
<div style="position:absolute;top:90863;left:94"><nobr>[6] "ISO3"     "IUCN_CAT"   "MANG_AUTH"  "MANG_PLAN"  "MARINE"   </nobr></div>
<div style="position:absolute;top:90878;left:85"><nobr>[11] "METADATAID" "NAME"     "NO_TAKE"    "NO_TK_AREA" "ORIG_NAME"</nobr></div>
<div style="position:absolute;top:90893;left:85"><nobr>[16] "OWN_TYPE"   "PARENT_ISO" "PA_DEF"     "REP_AREA"   "REP_M_AREA"</nobr></div>
<div style="position:absolute;top:90908;left:85"><nobr>[21] "STATUS"     "STATUS_YR"  "SUB_LOC"    "VERIF"     "WDPAID"   </nobr></div>
<div style="position:absolute;top:90923;left:85"><nobr>[26] "WDPA_PID"</nobr></div>
</span></font>

<div style="position:absolute;top:91039;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="74"><b>Page 74</b></a></font></td></tr></tbody></table></div><font size="4" face="Times"><span style="font-size:22px;font-family:Times">
<div style="position:absolute;top:91140;left:85"><nobr><b>ee$FeatureCollection filtering</b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:91178;left:85"><nobr>We will cover now how to filter information and data from an</nobr></div>
<div style="position:absolute;top:91209;left:85"><nobr>ee$FeatureCollection object. The filtering is done in a similar way as</nobr></div>
<div style="position:absolute;top:91240;left:85"><nobr>we did with the other objects so far.</nobr></div>
<div style="position:absolute;top:91271;left:85"><nobr>In this example we will load data from USGS hydrographic basis and</nobr></div>
<div style="position:absolute;top:91302;left:85"><nobr>filter the ones inside continental US. We will check the number of</nobr></div>
<div style="position:absolute;top:91333;left:85"><nobr>basis first and the next step we will filter again to extract only the</nobr></div>
<div style="position:absolute;top:91364;left:85"><nobr>basins with an area grater than 25000 squared km.</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:91408;left:85"><nobr>sheds&lt;-ee$FeatureCollection('USGS/WBD/2017/HUC06')$map(function(feature){</nobr></div>
<div style="position:absolute;top:91423;left:121"><nobr>num&lt;-ee$Number$parse(feature$get('areasqkm'))</nobr></div>
<div style="position:absolute;top:91438;left:121"><nobr>return (feature$set('areasqkm', num))})</nobr></div>
<div style="position:absolute;top:91453;left:85"><nobr>continentalUS&lt;-ee$Geometry$Rectangle(-127.18, 19.39, -62.75, 51.29)</nobr></div>
<div style="position:absolute;top:91468;left:85"><nobr>filtered&lt;-sheds$filterBounds(continentalUS)</nobr></div>
<div style="position:absolute;top:91483;left:85"><nobr>filtered$size()$getInfo()</nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:13px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:91498;left:85"><nobr>[1] 336</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:91513;left:85"><nobr>largeSheds&lt;-filtered$filter(ee$Filter$gt('areasqkm', 25000))</nobr></div>
<div style="position:absolute;top:91528;left:85"><nobr>largeSheds$size()$getInfo()</nobr></div>
</span></font>
<font size="3" color="#2a6099" face="Times"><span style="font-size:13px;font-family:Times;color:#2a6099">
<div style="position:absolute;top:91543;left:85"><nobr>[1] 140</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:91558;left:85"><nobr>Map$setCenter(-90,35,4)</nobr></div>
<div style="position:absolute;top:91573;left:85"><nobr>Map$addLayer(largeSheds, list(color='#880000'), 'watersheds')</nobr></div>
</span></font>
<font size="4" face="Times"><span style="font-size:22px;font-family:Times">
<div style="position:absolute;top:92017;left:85"><nobr><b>Map an ee$FeatureCollection object</b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:92055;left:85"><nobr>We will demonstrate now how to change all the features inside an</nobr></div>
<div style="position:absolute;top:92086;left:85"><nobr>ee$FeatureCollection object using map. In the same way we used map</nobr></div>
<div style="position:absolute;top:92117;left:85"><nobr>with an ee$ImageCollection it will be used with ee$FeatureCollection</nobr></div>
<div style="position:absolute;top:92148;left:85"><nobr>passing a ee$Feature object as parameter instead an ee$ image</nobr></div>
<div style="position:absolute;top:92179;left:85"><nobr>object.</nobr></div>
</span></font>

<div style="position:absolute;top:92301;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="75"><b>Page 75</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:92388;left:85"><nobr>Adding a new column.</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:92417;left:85"><nobr>sheds&lt;-ee$FeatureCollection('USGS/WBD/2017/HUC06')</nobr></div>
<div style="position:absolute;top:92432;left:85"><nobr>columns&lt;-sheds$first()$getInfo()</nobr></div>
<div style="position:absolute;top:92447;left:85"><nobr>columns$properties</nobr></div>
<div style="position:absolute;top:92462;left:85"><nobr><b>$areaacres</b></nobr></div>
<div style="position:absolute;top:92477;left:85"><nobr><b>[1] "17935746.85"</b></nobr></div>
<div style="position:absolute;top:92492;left:85"><nobr><b>$areasqkm</b></nobr></div>
<div style="position:absolute;top:92507;left:85"><nobr><b>[1] "72583.46"</b></nobr></div>
<div style="position:absolute;top:92522;left:85"><nobr><b>$gnis_id</b></nobr></div>
<div style="position:absolute;top:92537;left:85"><nobr><b>[1] ""</b></nobr></div>
<div style="position:absolute;top:92552;left:85"><nobr><b>$huc6</b></nobr></div>
<div style="position:absolute;top:92567;left:85"><nobr><b>[1] "190301"</b></nobr></div>
<div style="position:absolute;top:92582;left:85"><nobr><b>$loaddate</b></nobr></div>
<div style="position:absolute;top:92597;left:85"><nobr><b>[1] "20120611075458"</b></nobr></div>
<div style="position:absolute;top:92612;left:85"><nobr><b>$metasource</b></nobr></div>
<div style="position:absolute;top:92627;left:85"><nobr><b>[1] ""</b></nobr></div>
<div style="position:absolute;top:92642;left:85"><nobr><b>$name</b></nobr></div>
<div style="position:absolute;top:92657;left:85"><nobr><b>[1] "Aleutian Islands"</b></nobr></div>
<div style="position:absolute;top:92672;left:85"><nobr><b>$shape_area</b></nobr></div>
<div style="position:absolute;top:92687;left:85"><nobr><b>[1] "9.9308571861444"</b></nobr></div>
<div style="position:absolute;top:92702;left:85"><nobr><b>$shape_leng</b></nobr></div>
<div style="position:absolute;top:92717;left:85"><nobr><b>[1] "81.5083456556245"</b></nobr></div>
<div style="position:absolute;top:92732;left:85"><nobr><b>$sourcedata</b></nobr></div>
<div style="position:absolute;top:92747;left:85"><nobr><b>[1] ""</b></nobr></div>
<div style="position:absolute;top:92762;left:85"><nobr><b>$sourcefeat</b></nobr></div>
<div style="position:absolute;top:92777;left:85"><nobr><b>[1] ""</b></nobr></div>
<div style="position:absolute;top:92792;left:85"><nobr><b>$sourceorig</b></nobr></div>
<div style="position:absolute;top:92807;left:85"><nobr><b>[1] ""</b></nobr></div>
<div style="position:absolute;top:92822;left:85"><nobr><b>$states</b></nobr></div>
<div style="position:absolute;top:92837;left:85"><nobr><b>[1] "AK"</b></nobr></div>
<div style="position:absolute;top:92852;left:85"><nobr><b>$tnmid</b></nobr></div>
<div style="position:absolute;top:92867;left:85"><nobr><b>[1] "{7D8E9EC1-6A0D-4FED-8063-94688560AC75}"</b></nobr></div>
<div style="position:absolute;top:92882;left:85"><nobr>addArea&lt;-function(feature){</nobr></div>
<div style="position:absolute;top:92897;left:129"><nobr>return (feature$set(list(areaHa= feature$geometry()$area()$divide(100 *</nobr></div>
<div style="position:absolute;top:92912;left:85"><nobr>100))))</nobr></div>
<div style="position:absolute;top:92927;left:85"><nobr>}</nobr></div>
<div style="position:absolute;top:92942;left:85"><nobr>areaAdded&lt;-sheds$map(addArea)</nobr></div>
<div style="position:absolute;top:92957;left:85"><nobr>columns2&lt;-areaAdded$first()$getInfo()</nobr></div>
<div style="position:absolute;top:92972;left:85"><nobr>columns2$properties</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:92987;left:85"><nobr><b>$areaHa</b></nobr></div>
<div style="position:absolute;top:93005;left:85"><nobr><b>[1] 7227401</b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:93023;left:85"><nobr><b>$areaacres</b></nobr></div>
<div style="position:absolute;top:93038;left:85"><nobr><b>[1] "17935746.85"</b></nobr></div>
<div style="position:absolute;top:93053;left:85"><nobr><b>$areasqkm</b></nobr></div>
<div style="position:absolute;top:93068;left:85"><nobr><b>[1] "72583.46"</b></nobr></div>
<div style="position:absolute;top:93083;left:85"><nobr><b>$gnis_id</b></nobr></div>
<div style="position:absolute;top:93098;left:85"><nobr><b>[1] ""</b></nobr></div>
<div style="position:absolute;top:93113;left:85"><nobr><b>$huc6</b></nobr></div>
<div style="position:absolute;top:93128;left:85"><nobr><b>[1] "190301"</b></nobr></div>
<div style="position:absolute;top:93143;left:85"><nobr><b>$loaddate</b></nobr></div>
<div style="position:absolute;top:93158;left:85"><nobr><b>[1] "20120611075458"</b></nobr></div>
<div style="position:absolute;top:93173;left:85"><nobr><b>$metasource</b></nobr></div>
<div style="position:absolute;top:93188;left:85"><nobr><b>[1] ""</b></nobr></div>
<div style="position:absolute;top:93203;left:85"><nobr><b>$name</b></nobr></div>
<div style="position:absolute;top:93218;left:85"><nobr><b>[1] "Aleutian Islands"</b></nobr></div>
<div style="position:absolute;top:93233;left:85"><nobr><b>$shape_area</b></nobr></div>
<div style="position:absolute;top:93248;left:85"><nobr><b>[1] "9.9308571861444"</b></nobr></div>
<div style="position:absolute;top:93263;left:85"><nobr><b>$shape_leng</b></nobr></div>
<div style="position:absolute;top:93278;left:85"><nobr><b>[1] "81.5083456556245"</b></nobr></div>
<div style="position:absolute;top:93293;left:85"><nobr><b>$sourcedata</b></nobr></div>
<div style="position:absolute;top:93308;left:85"><nobr><b>[1] ""</b></nobr></div>
<div style="position:absolute;top:93323;left:85"><nobr><b>$sourcefeat</b></nobr></div>
<div style="position:absolute;top:93338;left:85"><nobr><b>[1] ""</b></nobr></div>
<div style="position:absolute;top:93353;left:85"><nobr><b>$sourceorig</b></nobr></div>
<div style="position:absolute;top:93368;left:85"><nobr><b>[1] ""</b></nobr></div>
<div style="position:absolute;top:93383;left:85"><nobr><b>$states</b></nobr></div>
<div style="position:absolute;top:93398;left:85"><nobr><b>[1] "AK"</b></nobr></div>
<div style="position:absolute;top:93413;left:85"><nobr><b>$tnmid</b></nobr></div>
<div style="position:absolute;top:93428;left:85"><nobr><b>[1] "{7D8E9EC1-6A0D-4FED-8063-94688560AC75}"</b></nobr></div>
</span></font>

<div style="position:absolute;top:93563;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="76"><b>Page 76</b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:93650;left:85"><nobr>In the example above we created a neu property (attribute) based on</nobr></div>
<div style="position:absolute;top:93681;left:85"><nobr>the ee$Feature object geometry. New attributes can be created also</nobr></div>
<div style="position:absolute;top:93712;left:85"><nobr>by computing the existing parameters.</nobr></div>
<div style="position:absolute;top:93774;left:85"><nobr>A new ee$FeatureCollection can be entirely created using map(). The</nobr></div>
<div style="position:absolute;top:93805;left:85"><nobr>example below convert the ‘watershed’ object in an</nobr></div>
<div style="position:absolute;top:93836;left:85"><nobr>ee$FeatureCollection ‘centroid’ and select only some attributes of the</nobr></div>
<div style="position:absolute;top:93867;left:85"><nobr>original object.</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:93896;left:85"><nobr>getCentroid&lt;-function(feature) {</nobr></div>
<div style="position:absolute;top:93911;left:94"><nobr>keepProperties = list('name', 'huc6', 'tnmid', 'areasqkm')</nobr></div>
<div style="position:absolute;top:93926;left:94"><nobr>centroid = feature$geometry()$centroid()</nobr></div>
<div style="position:absolute;top:93941;left:94"><nobr>return (ee$Feature(centroid)$copyProperties(feature, keepProperties))</nobr></div>
<div style="position:absolute;top:93956;left:85"><nobr>}</nobr></div>
<div style="position:absolute;top:93971;left:85"><nobr>centroids&lt;- sheds$map(getCentroid)</nobr></div>
<div style="position:absolute;top:93986;left:85"><nobr>Map$addLayer(centroids, list(color='FF0000'),'centroids')</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:94386;left:85"><nobr>And checking the columns created into the ee$FeatureCollection</nobr></div>
<div style="position:absolute;top:94417;left:85"><nobr>‘centroid’.</nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:94446;left:85"><nobr>columns&lt;-centroids$first()$getInfo()</nobr></div>
<div style="position:absolute;top:94461;left:85"><nobr>names(columns$properties)</nobr></div>
<div style="position:absolute;top:94476;left:85"><nobr><b>[1] "areasqkm" "huc6"     "name"     "tnmid"</b></nobr></div>
<div style="position:absolute;top:94491;left:85"><nobr>columns$properties</nobr></div>
<div style="position:absolute;top:94506;left:85"><nobr><b>$areasqkm</b></nobr></div>
<div style="position:absolute;top:94521;left:85"><nobr><b>[1] "72583.46"</b></nobr></div>
<div style="position:absolute;top:94536;left:85"><nobr><b>$huc6</b></nobr></div>
<div style="position:absolute;top:94551;left:85"><nobr><b>[1] "190301"</b></nobr></div>
<div style="position:absolute;top:94566;left:85"><nobr><b>$name</b></nobr></div>
<div style="position:absolute;top:94581;left:85"><nobr><b>[1] "Aleutian Islands"</b></nobr></div>
<div style="position:absolute;top:94596;left:85"><nobr><b>$tnmid</b></nobr></div>
<div style="position:absolute;top:94611;left:85"><nobr><b>[1] "{7D8E9EC1-6A0D-4FED-8063-94688560AC75}"</b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:16px;font-family:Times">
<div style="position:absolute;top:94659;left:85"><nobr>In the next volume we will finalize  covering ee$Reducer and ee$Join</nobr></div>
<div style="position:absolute;top:94690;left:85"><nobr>Fortaleza July 20, 2020.</nobr></div>
</span></font>


</div></body></html>